/*! For license information please see 0bef5732cbf5469c0f4b.chunk.js.LICENSE.txt */
(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6161],{9066:(e,t,a)=>{"use strict";a.d(t,{l:()=>n});const n=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",catalog:null==e?void 0:e.catalog,schema:null==e?void 0:e.schema}}},3800:function(e,t){var a;!function(n,o){"use strict";function r(){}r.TO_RAD=Math.PI/180,r.TO_DEG=180/Math.PI,r.PI_X2=2*Math.PI,r.PI_DIV4=Math.PI/4;var i=Object.create(r.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:r.prototype},extend:{value:function(e,t){for(var a in e)void 0!==i.prototype[a]&&!0!==t||("function"==typeof e[a]&&"function"==typeof e[a].bind?i.prototype[a]=e[a].bind(i):i.prototype[a]=e[a])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*r.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*r.TO_DEG}),i.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:o,latitude:e.length>=2?1:o,elevation:e.length>=3?2:o};var t=function(t){var a;return t.every((function(t){return"object"!=typeof e||!e.hasOwnProperty(t)||(a=t,!1)})),a},a=t(["lng","lon","longitude"]),n=t(["lat","latitude"]),r=t(["alt","altitude","elevation","elev"]);return void 0===n&&void 0===a&&void 0===r?o:{latitude:n,longitude:a,elevation:r}},getLat:function(e,t){return!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var a={latitude:!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},n=e[this.getKeys(e).elevation];return void 0!==n&&(a.elevation=n),a},ll:function(e,t){return this.coords.call(this,e,t)},validate:function(e){var t=this.getKeys(e);if(void 0===t||void 0===t.latitude||"undefined"===t.longitude)return!1;var a=e[t.latitude],n=e[t.longitude];return!(void 0===a||!this.isDecimal(a)&&!this.isSexagesimal(a)||void 0===n||!this.isDecimal(n)&&!this.isSexagesimal(n)||(a=this.useDecimal(a),n=this.useDecimal(n),a<this.minLat||a>this.maxLat||n<this.minLon||n>this.maxLon))},getDistance:function(e,t,a,n){a=Math.floor(a)||1,n=Math.floor(n)||0;var o,r,l,s,c,d,u,h=this.coords(e),p=this.coords(t),f=6378137,g=6356752.314245,m=1/298.257223563,v=(p.longitude-h.longitude).toRad(),b=Math.atan((1-m)*Math.tan(parseFloat(h.latitude).toRad())),y=Math.atan((1-m)*Math.tan(parseFloat(p.latitude).toRad())),x=Math.sin(b),w=Math.cos(b),C=Math.sin(y),S=Math.cos(y),A=v,k=100;do{var E=Math.sin(A),_=Math.cos(A);if(0===(d=Math.sqrt(S*E*(S*E)+(w*C-x*S*_)*(w*C-x*S*_))))return i.distance=0;o=x*C+w*S*_,r=Math.atan2(d,o),c=o-2*x*C/(s=1-(l=w*S*E/d)*l),isNaN(c)&&(c=0);var M=m/16*s*(4+m*(4-3*s));u=A,A=v+(1-M)*m*l*(r+M*d*(c+M*o*(2*c*c-1)))}while(Math.abs(A-u)>1e-12&&--k>0);if(0===k)return NaN;var D=s*(f*f-g*g)/(g*g),T=D/1024*(256+D*(D*(74-47*D)-128)),O=g*(1+D/16384*(4096+D*(D*(320-175*D)-768)))*(r-T*d*(c+T/4*(o*(2*c*c-1)-T/6*c*(4*d*d-3)*(4*c*c-3))));if(O=O.toFixed(n),void 0!==this.elevation(e)&&void 0!==this.elevation(t)){var Y=Math.abs(this.elevation(e)-this.elevation(t));O=Math.sqrt(O*O+Y*Y)}return this.distance=Math.round(O*Math.pow(10,n)/a)*a/Math.pow(10,n)},getDistanceSimple:function(e,t,a){a=Math.floor(a)||1;var n=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return i.distance=Math.floor(Math.round(n/a)*a)},getCenter:function(e){var t=e;if("object"==typeof e&&!(e instanceof Array))for(var a in t=[],e)t.push(this.coords(e[a]));if(!t.length)return!1;var n,o,i,l=0,s=0,c=0;t.forEach((function(e){n=this.latitude(e).toRad(),o=this.longitude(e).toRad(),l+=Math.cos(n)*Math.cos(o),s+=Math.cos(n)*Math.sin(o),c+=Math.sin(n)}),this);var d=t.length;return l/=d,s/=d,c/=d,o=Math.atan2(s,l),i=Math.sqrt(l*l+s*s),{latitude:((n=Math.atan2(c,i))*r.TO_DEG).toFixed(6),longitude:(o*r.TO_DEG).toFixed(6)}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),a={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==t&&(a.maxElev=0,a.minElev=1/0);for(var n=0,o=e.length;n<o;++n)a.maxLat=Math.max(this.latitude(e[n]),a.maxLat),a.minLat=Math.min(this.latitude(e[n]),a.minLat),a.maxLng=Math.max(this.longitude(e[n]),a.maxLng),a.minLng=Math.min(this.longitude(e[n]),a.minLng),t&&(a.maxElev=Math.max(this.elevation(e[n]),a.maxElev),a.minElev=Math.min(this.elevation(e[n]),a.minElev));return a},getCenterOfBounds:function(e){var t=this.getBounds(e),a=t.minLat+(t.maxLat-t.minLat)/2,n=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(a.toFixed(6)),longitude:parseFloat(n.toFixed(6))}},getBoundsOfDistance:function(e,t){var a,n,o=this.latitude(e),i=this.longitude(e),l=o.toRad(),s=i.toRad(),c=t/this.radius,d=l-c,u=l+c,h=this.maxLat.toRad(),p=this.minLat.toRad(),f=this.maxLon.toRad(),g=this.minLon.toRad();if(d>p&&u<h){var m=Math.asin(Math.sin(c)/Math.cos(l));(a=s-m)<g&&(a+=r.PI_X2),(n=s+m)>f&&(n-=r.PI_X2)}else d=Math.max(d,p),u=Math.min(u,h),a=g,n=f;return[{latitude:d.toDeg(),longitude:a.toDeg()},{latitude:u.toDeg(),longitude:n.toDeg()}]},isPointInside:function(e,t){for(var a=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(this.longitude(t[n])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[r])||this.longitude(t[r])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[n]))&&this.latitude(e)<(this.latitude(t[r])-this.latitude(t[n]))*(this.longitude(e)-this.longitude(t[n]))/(this.longitude(t[r])-this.longitude(t[n]))+this.latitude(t[n])&&(a=!a);return a},preparePolygonForIsPointInsideOptimized:function(e){for(var t=0,a=e.length-1;t<e.length;t++)this.longitude(e[a])===this.longitude(e[t])?(e[t].constant=this.latitude(e[t]),e[t].multiple=0):(e[t].constant=this.latitude(e[t])-this.longitude(e[t])*this.latitude(e[a])/(this.longitude(e[a])-this.longitude(e[t]))+this.longitude(e[t])*this.latitude(e[t])/(this.longitude(e[a])-this.longitude(e[t])),e[t].multiple=(this.latitude(e[a])-this.latitude(e[t]))/(this.longitude(e[a])-this.longitude(e[t]))),a=t},isPointInsideWithPreparedPolygon:function(e,t){for(var a=!1,n=this.longitude(e),o=this.latitude(e),r=0,i=t.length-1;r<t.length;r++)(this.longitude(t[r])<n&&this.longitude(t[i])>=n||this.longitude(t[i])<n&&this.longitude(t[r])>=n)&&(a^=n*t[r].multiple+t[r].constant<o),i=r;return a},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,a){return this.getDistance(e,t)<a},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var a=this.longitude(t).toRad()-this.longitude(e).toRad(),n=Math.log(Math.tan(this.latitude(t).toRad()/2+r.PI_DIV4)/Math.tan(this.latitude(e).toRad()/2+r.PI_DIV4));return Math.abs(a)>Math.PI&&(a=a>0?-1*(r.PI_X2-a):r.PI_X2+a),(Math.atan2(a,n).toDeg()+360)%360},getBearing:function(e,t){return t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e),(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(e,t,a){var n,o;switch(o="circle"==a?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(o/22.5)){case 1:n={exact:"NNE",rough:"N"};break;case 2:n={exact:"NE",rough:"N"};break;case 3:n={exact:"ENE",rough:"E"};break;case 4:n={exact:"E",rough:"E"};break;case 5:n={exact:"ESE",rough:"E"};break;case 6:n={exact:"SE",rough:"E"};break;case 7:n={exact:"SSE",rough:"S"};break;case 8:n={exact:"S",rough:"S"};break;case 9:n={exact:"SSW",rough:"S"};break;case 10:n={exact:"SW",rough:"S"};break;case 11:n={exact:"WSW",rough:"W"};break;case 12:n={exact:"W",rough:"W"};break;case 13:n={exact:"WNW",rough:"W"};break;case 14:n={exact:"NW",rough:"W"};break;case 15:n={exact:"NNW",rough:"N"};break;default:n={exact:"N",rough:"N"}}return n.bearing=o,n},getDirection:function(e,t,a){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){return Object.keys(t).map((function(a){var n=this.getDistance(e,t[a]),o=Object.create(t[a]);return o.distance=n,o.key=a,o}),this).sort((function(e,t){return e.distance-t.distance}))},isPointInLine:function(e,t,a){return(this.getDistance(t,e,1,3)+this.getDistance(e,a,1,3)).toFixed(3)==this.getDistance(t,a,1,3)},isPointNearLine:function(e,t,a,n){return this.getDistanceFromLine(e,t,a)<n},getDistanceFromLine:function(e,t,a){var n=this.getDistance(t,e,1,3),o=this.getDistance(e,a,1,3),r=this.getDistance(t,a,1,3),i=Math.acos((n*n+r*r-o*o)/(2*n*r)),l=Math.acos((o*o+r*r-n*n)/(2*o*r));return i>Math.PI/2?n:l>Math.PI/2?o:Math.sin(i)*n},findNearest:function(e,t,a,n){a=a||0,n=n||1;var o=this.orderByDistance(e,t);return 1===n?o[a]:o.splice(a,n)},getPathLength:function(e){for(var t,a=0,n=0,o=e.length;n<o;++n)t&&(a+=this.getDistance(this.coords(e[n]),t)),t=this.coords(e[n]);return a},getSpeed:function(e,t,a){var n=a&&a.unit||"km";"mph"==n?n="mi":"kmh"==n&&(n="km");var o=i.getDistance(e,t)/(1*t.time/1e3-1*e.time/1e3)*3600;return Math.round(o*this.measures[n]*1e4)/1e4},computeDestinationPoint:function(e,t,a,n){var o=this.latitude(e),r=this.longitude(e);n=void 0===n?this.radius:Number(n);var i=Number(t)/n,l=Number(a).toRad(),s=Number(o).toRad(),c=Number(r).toRad(),d=Math.asin(Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(l)),u=c+Math.atan2(Math.sin(l)*Math.sin(i)*Math.cos(s),Math.cos(i)-Math.sin(s)*Math.sin(d));return u=(u+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:d.toDeg(),longitude:u.toDeg()}},convertUnit:function(e,t,a){if(0===t)return 0;if(void 0===t){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;t=this.distance}if(e=e||"m",a=null==a?4:a,void 0!==this.measures[e])return this.round(t*this.measures[e],a);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map((function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var a in e)e[a]=t.useDecimal(e[a]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e})),e}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var a in e)e[a]=this.useDecimal(e[a]);return e}if(this.isDecimal(e))return parseFloat(e);if(!0===this.isSexagesimal(e))return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),a=Math.abs(t[0]),n=60*("0."+(t[1]||0)),o=n.toString().split(".");return n=Math.floor(n),o=(60*("0."+(o[1]||0))).toFixed(2),this.sexagesimal[e]=a+"° "+n+"' "+o+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern).exec(e),a=0,n=0;t&&(a=parseFloat(t[2]/60),n=parseFloat(t[4]/3600)||0);var o=(parseFloat(t[1])+a+n).toFixed(8);return o="S"==t[7]||"W"==t[7]?parseFloat(-o):parseFloat(o),this.decimal[e]=o,o},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}}),void 0!==e.exports?(e.exports=i,"object"==typeof n&&(n.geolib=i)):(a=function(){return i}.apply(t,[]))===o||(e.exports=a)}(this)},20311:e=>{"use strict";e.exports=function(e,t,a,n,o,r,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[a,n,o,r,i,l],d=0;(s=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},76135:(e,t,a)=>{e.exports=a(39754)},33215:(e,t,a)=>{var n=a(30641),o=a(24066);e.exports=function(e,t){return e&&n(e,o(t))}},52182:(e,t,a)=>{var n=a(9325),o=a(13222),r=/^\s+/,i=n.parseInt;e.exports=function(e,t,a){return a||null==t?t=0:t&&(t=+t),i(o(e).replace(r,""),t||0)}},51545:(e,t,a)=>{"use strict";a.d(t,{Ht:()=>l,cG:()=>r});var n=a(70731),o=a.n(n);const r={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},i=(e,t)=>String(e.rankedValue).localeCompare(String(t.rankedValue));function l(e,t,a){void 0===a&&(a={});const{keys:n,threshold:o=r.MATCHES,baseSort:l=i,sorter:d=(e=>e.sort(((e,t)=>c(e,t,l))))}=a,h=e.reduce((function(e,i,l){const c=function(e,t,a,n){if(!t)return{rankedValue:e,rank:s(e,a,n),keyIndex:-1,keyThreshold:n.threshold};const o=function(e,t){const a=[];for(let n=0,o=t.length;n<o;n++){const o=t[n],r=p(o),i=u(e,o);for(let e=0,t=i.length;e<t;e++)a.push({itemValue:i[e],attributes:r})}return a}(e,t);return o.reduce(((e,t,o)=>{let{rank:i,rankedValue:l,keyIndex:c,keyThreshold:d}=e,{itemValue:u,attributes:h}=t,p=s(u,a,n),f=l;const{minRanking:g,maxRanking:m,threshold:v}=h;return p<g&&p>=r.MATCHES?p=g:p>m&&(p=m),p>i&&(i=p,c=o,d=v,f=u),{rankedValue:f,rank:i,keyIndex:c,keyThreshold:d}}),{rankedValue:e,rank:r.NO_MATCH,keyIndex:-1,keyThreshold:n.threshold})}(i,n,t,a),{rank:d,keyThreshold:h=o}=c;return d>=h&&e.push({...c,item:i,index:l}),e}),[]);return d(h).map((e=>{let{item:t}=e;return t}))}function s(e,t,a){return e=d(e,a),(t=d(t,a)).length>e.length?r.NO_MATCH:e===t?r.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?r.EQUAL:e.startsWith(t)?r.STARTS_WITH:e.includes(` ${t}`)?r.WORD_STARTS_WITH:e.includes(t)?r.CONTAINS:1===t.length?r.NO_MATCH:function(e){let t="";return e.split(" ").forEach((e=>{e.split("-").forEach((e=>{t+=e.substr(0,1)}))})),t}(e).includes(t)?r.ACRONYM:function(e,t){let a=0,n=0;function o(e,t,n){for(let o=n,r=t.length;o<r;o++)if(t[o]===e)return a+=1,o+1;return-1}const i=o(t[0],e,0);if(i<0)return r.NO_MATCH;n=i;for(let a=1,i=t.length;a<i;a++)if(n=o(t[a],e,n),!(n>-1))return r.NO_MATCH;return function(e){const n=1/e,o=a/t.length;return r.MATCHES+o*n}(n-i)}(e,t)}function c(e,t,a){const{rank:n,keyIndex:o}=e,{rank:r,keyIndex:i}=t;return n===r?o===i?a(e,t):o<i?-1:1:n>r?-1:1}function d(e,t){let{keepDiacritics:a}=t;return e=`${e}`,a||(e=o()(e)),e}function u(e,t){let a;if("object"==typeof t&&(t=t.key),"function"==typeof t)a=t(e);else if(null==e)a=null;else if(Object.hasOwnProperty.call(e,t))a=e[t];else{if(t.includes("."))return function(e,t){const a=e.split(".");let n=[t];for(let e=0,t=a.length;e<t;e++){const t=a[e];let o=[];for(let e=0,a=n.length;e<a;e++){const a=n[e];if(null!=a)if(Object.hasOwnProperty.call(a,t)){const e=a[t];null!=e&&o.push(e)}else"*"===t&&(o=o.concat(a))}n=o}return Array.isArray(n[0])?[].concat(...n):n}(t,e);a=null}return null==a?[]:Array.isArray(a)?a:[String(a)]}l.rankings=r;const h={maxRanking:1/0,minRanking:-1/0};function p(e){return"string"==typeof e?h:{...h,...e}}},50650:(e,t,a)=>{"use strict";a.r(t),a.d(t,{amber:()=>m,black:()=>_,blue:()=>s,blueGrey:()=>w,brown:()=>y,cyan:()=>d,darkIcons:()=>A,darkText:()=>C,deepOrange:()=>b,deepPurple:()=>i,default:()=>M,green:()=>h,grey:()=>x,indigo:()=>l,lightBlue:()=>c,lightGreen:()=>p,lightIcons:()=>k,lightText:()=>S,lime:()=>f,orange:()=>v,pink:()=>o,purple:()=>r,red:()=>n,teal:()=>u,white:()=>E,yellow:()=>g});var n={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},o={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},r={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},i={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},l={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},s={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},d={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},u={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},h={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},p={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},m={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},b={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},y={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},x={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},w={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},C={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},S={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},A={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},k={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},E="#ffffff",_="#000000";const M={red:n,pink:o,purple:r,deepPurple:i,indigo:l,blue:s,lightBlue:c,cyan:d,teal:u,green:h,lightGreen:p,lime:f,yellow:g,amber:m,orange:v,deepOrange:b,brown:y,grey:x,blueGrey:w,darkText:C,lightText:S,darkIcons:A,lightIcons:k,white:E,black:_}},20788:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=s(a(96540)),r=s(a(58527)),i=a(2825),l=s(a(39539));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.AlphaPicker=function(e){var t=e.rgb,a=e.hsl,l=e.width,s=e.height,c=e.onChange,d=e.direction,u=e.style,h=e.renderers,p=e.pointer,f=e.className,g=void 0===f?"":f,m=(0,r.default)({default:{picker:{position:"relative",width:l,height:s},alpha:{radius:"2px",style:u}}});return o.default.createElement("div",{style:m.picker,className:"alpha-picker "+g},o.default.createElement(i.Alpha,n({},m.alpha,{rgb:t,hsl:a,pointer:p,renderers:h,onChange:c,direction:d})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:l.default},t.default=(0,i.ColorWrap)(c)},39539:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.AlphaPointer=function(e){var t=e.direction,a=(0,o.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return n.default.createElement("div",{style:a.picker})};t.default=i},97868:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var n=c(a(96540)),o=c(a(5556)),r=c(a(58527)),i=c(a(26195)),l=a(2825),s=c(a(27140));function c(e){return e&&e.__esModule?e:{default:e}}var d=t.Block=function(e){var t=e.onChange,a=e.onSwatchHover,o=e.hex,c=e.colors,d=e.width,u=e.triangle,h=e.className,p=void 0===h?"":h,f="transparent"===o,g=function(e,a){i.default.isValidHex(e)&&t({hex:e,source:"hex"},a)},m=(0,r.default)({default:{card:{width:d,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:o,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:i.default.getContrastingColor(o),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+o+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===u});return n.default.createElement("div",{style:m.card,className:"block-picker "+p},n.default.createElement("div",{style:m.triangle}),n.default.createElement("div",{style:m.head},f&&n.default.createElement(l.Checkboard,{borderRadius:"6px 6px 0 0"}),n.default.createElement("div",{style:m.label},o)),n.default.createElement("div",{style:m.body},n.default.createElement(s.default,{colors:c,onClick:g,onSwatchHover:a}),n.default.createElement(l.EditableInput,{style:{input:m.input},value:o,onChange:g})))};d.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),colors:o.default.arrayOf(o.default.string),triangle:o.default.oneOf(["top","hide"])},d.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,l.ColorWrap)(d)},27140:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(55378)),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.BlockSwatches=function(e){var t=e.colors,a=e.onClick,l=e.onSwatchHover,s=(0,o.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return n.default.createElement("div",{style:s.swatches},(0,r.default)(t,(function(e){return n.default.createElement(i.Swatch,{key:e,color:e,style:s.swatch,onClick:a,onHover:l,focusStyle:{boxShadow:"0 0 4px "+e}})})),n.default.createElement("div",{style:s.clear}))};t.default=s},9626:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var n=d(a(96540)),o=d(a(5556)),r=d(a(58527)),i=a(2825),l=d(a(13719)),s=d(a(29537)),c=d(a(46617));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Chrome=function(e){var t=e.onChange,a=e.disableAlpha,o=e.rgb,d=e.hsl,u=e.hsv,h=e.hex,p=e.renderers,f=e.className,g=void 0===f?"":f,m=(0,r.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:a});return n.default.createElement("div",{style:m.picker,className:"chrome-picker "+g},n.default.createElement("div",{style:m.saturation},n.default.createElement(i.Saturation,{style:m.Saturation,hsl:d,hsv:u,pointer:c.default,onChange:t})),n.default.createElement("div",{style:m.body},n.default.createElement("div",{style:m.controls,className:"flexbox-fix"},n.default.createElement("div",{style:m.color},n.default.createElement("div",{style:m.swatch},n.default.createElement("div",{style:m.active}),n.default.createElement(i.Checkboard,{renderers:p}))),n.default.createElement("div",{style:m.toggles},n.default.createElement("div",{style:m.hue},n.default.createElement(i.Hue,{style:m.Hue,hsl:d,pointer:s.default,onChange:t})),n.default.createElement("div",{style:m.alpha},n.default.createElement(i.Alpha,{style:m.Alpha,rgb:o,hsl:d,pointer:s.default,renderers:p,onChange:t})))),n.default.createElement(l.default,{rgb:o,hsl:d,hex:h,onChange:t,disableAlpha:a})))};u.propTypes={disableAlpha:o.default.bool},u.defaultProps={disableAlpha:!1},t.default=(0,i.ColorWrap)(u)},13719:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=s(a(96540)),r=s(a(58527)),i=s(a(26195)),l=a(2825);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.ChromeFields=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=Array(o),l=0;l<o;l++)r[l]=arguments[l];return a=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={view:""},n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?i.default.isValidHex(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&n.props.onChange({h:e.h||n.props.hsl.h,s:Number(e.s&&e.s||n.props.hsl.s),l:Number(e.l&&e.l||n.props.hsl.l),source:"hsl"},t)},n.showHighlight=function(e){e.target.style.background="#eee"},n.hideHighlight=function(e){e.target.style.background="transparent"},c(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),a=void 0;return"hex"===this.state.view?a=o.default.createElement("div",{style:t.fields,className:"flexbox-fix"},o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?a=o.default.createElement("div",{style:t.fields,className:"flexbox-fix"},o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),o.default.createElement("div",{style:t.alpha},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(a=o.default.createElement("div",{style:t.fields,className:"flexbox-fix"},o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),o.default.createElement("div",{style:t.alpha},o.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),o.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},a,o.default.createElement("div",{style:t.toggle},o.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},o.default.createElement("svg",{style:t.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},o.default.createElement("path",{ref:function(t){return e.iconUp=t},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),o.default.createElement("path",{ref:function(t){return e.iconDown=t},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),t}(o.default.Component);t.default=d},29537:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointer=function(){var e=(0,o.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return n.default.createElement("div",{style:e.picker})};t.default=i},46617:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointerCircle=function(){var e=(0,o.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return n.default.createElement("div",{style:e.picker})};t.default=i},49366:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var n=d(a(96540)),o=d(a(5556)),r=d(a(58527)),i=d(a(55378)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(50650)),s=a(2825),c=d(a(12978));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Circle=function(e){var t=e.width,a=e.onChange,o=e.onSwatchHover,l=e.colors,s=e.hex,d=e.circleSize,u=e.circleSpacing,h=e.className,p=void 0===h?"":h,f=(0,r.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}}),g=function(e,t){return a({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:f.card,className:"circle-picker "+p},(0,i.default)(l,(function(e){return n.default.createElement(c.default,{key:e,color:e,onClick:g,onSwatchHover:o,active:s===e.toLowerCase(),circleSize:d,circleSpacing:u})})))};u.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),circleSize:o.default.number,circleSpacing:o.default.number},u.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[l.red[500],l.pink[500],l.purple[500],l.deepPurple[500],l.indigo[500],l.blue[500],l.lightBlue[500],l.cyan[500],l.teal[500],l.green[500],l.lightGreen[500],l.lime[500],l.yellow[500],l.amber[500],l.orange[500],l.deepOrange[500],l.brown[500],l.blueGrey[500]]},t.default=(0,s.ColorWrap)(u)},12978:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var n=l(a(96540)),o=a(58527),r=l(o),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.CircleSwatch=function(e){var t=e.color,a=e.onClick,o=e.onSwatchHover,l=e.hover,s=e.active,c=e.circleSize,d=e.circleSpacing,u=(0,r.default)({default:{swatch:{width:c,height:c,marginRight:d,marginBottom:d,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+c/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:l,active:s});return n.default.createElement("div",{style:u.swatch},n.default.createElement(i.Swatch,{style:u.Swatch,color:t,onClick:a,onHover:o,focusStyle:{boxShadow:u.Swatch.boxShadow+", 0 0 5px "+t}}))};s.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,o.handleHover)(s)},73477:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(96540),i=d(r),l=d(a(58527)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(46412)),c=d(a(25413));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.Alpha=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return a=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.handleChange=function(e,t){var a=s.calculateChange(e,t,n.props,n.container);a&&n.props.onChange&&n.props.onChange(a,e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},u(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,a=(0,l.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:n({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.default.createElement("div",{style:a.alpha},i.default.createElement("div",{style:a.checkboard},i.default.createElement(c.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:a.gradient}),i.default.createElement("div",{style:a.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:a.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:a.slider}))))}}]),t}(r.PureComponent||r.Component);t.default=h},25413:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var n=i(a(96540)),o=i(a(58527)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(27218));function i(e){return e&&e.__esModule?e:{default:e}}var l=t.Checkboard=function(e){var t=e.white,a=e.grey,i=e.size,l=e.renderers,s=e.borderRadius,c=e.boxShadow,d=(0,o.default)({default:{grid:{borderRadius:s,boxShadow:c,absolute:"0px 0px 0px 0px",background:"url("+r.get(t,a,i,l.canvas)+") center left"}}});return n.default.createElement("div",{style:d.grid})};l.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=l},46201:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(96540),i=c(r),l=c(a(38221)),s=c(a(26195));function c(e){return e&&e.__esModule?e:{default:e}}var d=t.ColorWrap=function(e){var t=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.handleChange=function(e,a){if(s.default.simpleCheckForValidColor(e)){var n=s.default.toState(e,e.h||t.state.oldHue);t.setState(n),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,n,a),t.props.onChange&&t.props.onChange(n,a)}},t.handleSwatchHover=function(e,a){if(s.default.simpleCheckForValidColor(e)){var n=s.default.toState(e,e.h||t.state.oldHue);t.setState(n),t.props.onSwatchHover&&t.props.onSwatchHover(n,a)}},t.state=n({},s.default.toState(e.color,0)),t.debounce=(0,l.default)((function(e,t,a){e(t,a)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),o(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(n({},s.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.default.createElement(e,n({},this.props,this.state,{onChange:this.handleChange},t))}}]),a}(r.PureComponent||r.Component);return t.propTypes=n({},e.propTypes),t.defaultProps=n({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=d},6593:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(96540),r=l(o),i=l(a(58527));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.handleBlur=function(){a.state.blurValue&&a.setState({value:a.state.blurValue,blurValue:null})},a.handleChange=function(e){a.props.label?a.props.onChange&&a.props.onChange(s({},a.props.label,e.target.value),e):a.props.onChange&&a.props.onChange(e.target.value,e),a.setState({value:e.target.value})},a.handleKeyDown=function(e){var t=String(e.target.value),n=t.indexOf("%")>-1,o=Number(t.replace(/%/g,""));if(!isNaN(o)){var r=a.props.arrowOffset||1;38===e.keyCode&&(null!==a.props.label?a.props.onChange&&a.props.onChange(s({},a.props.label,o+r),e):a.props.onChange&&a.props.onChange(o+r,e),n?a.setState({value:o+r+"%"}):a.setState({value:o+r})),40===e.keyCode&&(null!==a.props.label?a.props.onChange&&a.props.onChange(s({},a.props.label,o-r),e):a.props.onChange&&a.props.onChange(o-r,e),n?a.setState({value:o-r+"%"}):a.setState({value:o-r}))}},a.handleDrag=function(e){if(a.props.dragLabel){var t=Math.round(a.props.value+e.movementX);t>=0&&t<=a.props.dragMax&&a.props.onChange&&a.props.onChange(s({},a.props.label,t),e)}},a.handleMouseDown=function(e){a.props.dragLabel&&(e.preventDefault(),a.handleDrag(e),window.addEventListener("mousemove",a.handleDrag),window.addEventListener("mouseup",a.handleMouseUp))},a.handleMouseUp=function(){a.unbindEventListeners()},a.unbindEventListeners=function(){window.removeEventListener("mousemove",a.handleDrag),window.removeEventListener("mouseup",a.handleMouseUp)},a.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return r.default.createElement("div",{style:t.wrap},r.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?r.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(o.PureComponent||o.Component);t.default=c},64899:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(96540),r=s(o),i=s(a(58527)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(89278));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.Hue=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return a=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.handleChange=function(e,t){var a=l.calculateChange(e,t,n.props,n.container);a&&n.props.onChange&&n.props.onChange(a,e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},c(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,a=void 0===t?"horizontal":t,n=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===a});return r.default.createElement("div",{style:n.hue},r.default.createElement("div",{className:"hue-"+a,style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),r.default.createElement("div",{style:n.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:n.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=d},69657:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var n=i(a(96540)),o=i(a(5556)),r=i(a(58527));function i(e){return e&&e.__esModule?e:{default:e}}var l=t.Raised=function(e){var t=e.zDepth,a=e.radius,o=e.background,i=e.children,l=(0,r.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:a,background:o}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return n.default.createElement("div",{style:l.wrap},n.default.createElement("div",{style:l.bg}),n.default.createElement("div",{style:l.content},i))};l.propTypes={background:o.default.string,zDepth:o.default.oneOf([0,1,2,3,4,5]),radius:o.default.number},l.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=l},4749:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(96540),r=c(o),i=c(a(58527)),l=c(a(7350)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(75841));function c(e){return e&&e.__esModule?e:{default:e}}var d=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e,t){a.props.onChange&&a.throttle(a.props.onChange,s.calculateChange(e,t,a.props,a.container),e)},a.handleMouseDown=function(e){a.handleChange(e,!0),window.addEventListener("mousemove",a.handleChange),window.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},a.throttle=(0,l.default)((function(e,t,a){e(t,a)}),50),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},a=t.color,n=t.white,o=t.black,l=t.pointer,s=t.circle,c=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:a,white:n,black:o,pointer:l,circle:s}},{custom:!!this.props.style});return r.default.createElement("div",{style:c.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),r.default.createElement("div",{style:c.white,className:"saturation-white"},r.default.createElement("div",{style:c.black,className:"saturation-black"}),r.default.createElement("div",{style:c.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:c.circle}))))}}]),t}(o.PureComponent||o.Component);t.default=d},28333:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=s(a(96540)),r=s(a(58527)),i=a(74572),l=a(2825);function s(e){return e&&e.__esModule?e:{default:e}}var c=t.Swatch=function(e){var t=e.color,a=e.style,i=e.onClick,s=void 0===i?function(){}:i,c=e.onHover,d=e.title,u=void 0===d?t:d,h=e.children,p=e.focus,f=e.focusStyle,g=void 0===f?{}:f,m="transparent"===t,v=(0,r.default)({default:{swatch:n({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},a,p?g:{})}}),b={};return c&&(b.onMouseOver=function(e){return c(t,e)}),o.default.createElement("div",n({style:v.swatch,onClick:function(e){return s(t,e)},title:u,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&s(t,e)}},b),h,m&&o.default.createElement(l.Checkboard,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,i.handleFocus)(c)},2825:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(73477);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return u(n).default}});var o=a(25413);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return u(o).default}});var r=a(6593);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return u(r).default}});var i=a(64899);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return u(i).default}});var l=a(69657);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return u(l).default}});var s=a(4749);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return u(s).default}});var c=a(46201);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return u(c).default}});var d=a(28333);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return u(d).default}})},34952:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var n=u(a(96540)),o=u(a(5556)),r=u(a(58527)),i=u(a(55378)),l=u(a(26195)),s=a(2825),c=u(a(39909)),d=u(a(61421));function u(e){return e&&e.__esModule?e:{default:e}}var h=t.Compact=function(e){var t=e.onChange,a=e.onSwatchHover,o=e.colors,u=e.hex,h=e.rgb,p=e.className,f=void 0===p?"":p,g=(0,r.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),m=function(e,a){e.hex?l.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},a):t(e,a)};return n.default.createElement(s.Raised,{style:g.Compact},n.default.createElement("div",{style:g.compact,className:"compact-picker "+f},n.default.createElement("div",null,(0,i.default)(o,(function(e){return n.default.createElement(c.default,{key:e,color:e,active:e.toLowerCase()===u,onClick:m,onSwatchHover:a})})),n.default.createElement("div",{style:g.clear})),n.default.createElement(d.default,{hex:u,rgb:h,onChange:m})))};h.propTypes={colors:o.default.arrayOf(o.default.string)},h.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,s.ColorWrap)(h)},39909:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(26195)),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.CompactColor=function(e){var t=e.color,a=e.onClick,l=void 0===a?function(){}:a,s=e.onSwatchHover,c=e.active,d=(0,o.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:r.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:c,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return n.default.createElement(i.Swatch,{style:d.color,color:t,onClick:l,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},n.default.createElement("div",{style:d.dot}))};t.default=s},61421:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var n=i(a(96540)),o=i(a(58527)),r=a(2825);function i(e){return e&&e.__esModule?e:{default:e}}var l=t.CompactFields=function(e){var t=e.hex,a=e.rgb,i=e.onChange,l=(0,o.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),s=function(e,t){e.r||e.g||e.b?i({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,source:"rgb"},t):i({hex:e.hex,source:"hex"},t)};return n.default.createElement("div",{style:l.fields,className:"flexbox-fix"},n.default.createElement("div",{style:l.active}),n.default.createElement(r.EditableInput,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:t,onChange:s}),n.default.createElement(r.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:a.r,onChange:s}),n.default.createElement(r.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:a.g,onChange:s}),n.default.createElement(r.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:a.b,onChange:s}))};t.default=l},40652:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var n=c(a(96540)),o=c(a(5556)),r=c(a(58527)),i=c(a(55378)),l=a(2825),s=c(a(48372));function c(e){return e&&e.__esModule?e:{default:e}}var d=t.Github=function(e){var t=e.width,a=e.colors,o=e.onChange,l=e.onSwatchHover,c=e.triangle,d=e.className,u=void 0===d?"":d,h=(0,r.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c,"bottom-left-triangle":"bottom-left"==c,"bottom-right-triangle":"bottom-right"===c}),p=function(e,t){return o({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:h.card,className:"github-picker "+u},n.default.createElement("div",{style:h.triangleShadow}),n.default.createElement("div",{style:h.triangle}),(0,i.default)(a,(function(e){return n.default.createElement(s.default,{color:e,key:e,onClick:p,onSwatchHover:l})})))};d.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),colors:o.default.arrayOf(o.default.string),triangle:o.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},d.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,l.ColorWrap)(d)},48372:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var n=l(a(96540)),o=a(58527),r=l(o),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.GithubSwatch=function(e){var t=e.hover,a=e.color,o=e.onClick,l=e.onSwatchHover,s={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},c=(0,r.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:s}},{hover:t});return n.default.createElement("div",{style:c.swatch},n.default.createElement(i.Swatch,{color:a,onClick:o,onHover:l,focusStyle:s}))};t.default=(0,o.handleHover)(s)},33736:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=s(a(96540)),r=s(a(58527)),i=a(2825),l=s(a(69183));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.HuePicker=function(e){var t=e.width,a=e.height,l=e.onChange,s=e.hsl,c=e.direction,d=e.pointer,u=e.className,h=void 0===u?"":u,p=(0,r.default)({default:{picker:{position:"relative",width:t,height:a},hue:{radius:"2px"}}});return o.default.createElement("div",{style:p.picker,className:"hue-picker "+h},o.default.createElement(i.Hue,n({},p.hue,{hsl:s,pointer:d,onChange:function(e){return l({a:1,h:e.h,l:.5,s:1})},direction:c})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:l.default},t.default=(0,i.ColorWrap)(c)},69183:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(e){var t=e.direction,a=(0,o.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return n.default.createElement("div",{style:a.picker})};t.default=i},61396:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(26195)),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.Material=function(e){var t=e.onChange,a=e.hex,l=e.rgb,s=e.className,c=void 0===s?"":s,d=(0,o.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+a,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),u=function(e,a){e.hex?r.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},a):(e.r||e.g||e.b)&&t({r:e.r||l.r,g:e.g||l.g,b:e.b||l.b,source:"rgb"},a)};return n.default.createElement(i.Raised,null,n.default.createElement("div",{style:d.material,className:"material-picker "+c},n.default.createElement(i.EditableInput,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:a,onChange:u}),n.default.createElement("div",{style:d.split,className:"flexbox-fix"},n.default.createElement("div",{style:d.third},n.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:l.r,onChange:u})),n.default.createElement("div",{style:d.third},n.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:l.g,onChange:u})),n.default.createElement("div",{style:d.third},n.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:l.b,onChange:u})))))};t.default=(0,i.ColorWrap)(s)},32572:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=p(a(96540)),r=p(a(5556)),i=p(a(58527)),l=a(2825),s=p(a(16273)),c=p(a(8183)),d=p(a(58843)),u=p(a(47716)),h=p(a(8649));function p(e){return e&&e.__esModule?e:{default:e}}var f=t.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={currentColor:e.hex},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,a=(0,i.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return o.default.createElement("div",{style:a.picker,className:"photoshop-picker "+t},o.default.createElement("div",{style:a.head},this.props.header),o.default.createElement("div",{style:a.body,className:"flexbox-fix"},o.default.createElement("div",{style:a.saturation},o.default.createElement(l.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),o.default.createElement("div",{style:a.hue},o.default.createElement(l.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:d.default,onChange:this.props.onChange})),o.default.createElement("div",{style:a.controls},o.default.createElement("div",{style:a.top,className:"flexbox-fix"},o.default.createElement("div",{style:a.previews},o.default.createElement(h.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),o.default.createElement("div",{style:a.actions},o.default.createElement(u.default,{label:"OK",onClick:this.props.onAccept,active:!0}),o.default.createElement(u.default,{label:"Cancel",onClick:this.props.onCancel}),o.default.createElement(s.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(o.default.Component);f.propTypes={header:r.default.string},f.defaultProps={header:"Color Picker"},t.default=(0,l.ColorWrap)(f)},47716:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopBotton=function(e){var t=e.onClick,a=e.label,r=e.children,i=e.active,l=(0,o.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return n.default.createElement("div",{style:l.button,onClick:t},a||r)};t.default=i},16273:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(26195)),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.PhotoshopPicker=function(e){var t=e.onChange,a=e.rgb,l=e.hsv,s=e.hex,c=(0,o.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),d=function(e,n){e["#"]?r.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},n):e.r||e.g||e.b?t({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,source:"rgb"},n):(e.h||e.s||e.v)&&t({h:e.h||l.h,s:e.s||l.s,v:e.v||l.v,source:"hsv"},n)};return n.default.createElement("div",{style:c.fields},n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"h",value:Math.round(l.h),onChange:d}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"s",value:Math.round(100*l.s),onChange:d}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"v",value:Math.round(100*l.v),onChange:d}),n.default.createElement("div",{style:c.divider}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:a.r,onChange:d}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:a.g,onChange:d}),n.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:a.b,onChange:d}),n.default.createElement("div",{style:c.divider}),n.default.createElement(i.EditableInput,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"#",value:s.replace("#",""),onChange:d}),n.default.createElement("div",{style:c.fieldSymbols},n.default.createElement("div",{style:c.symbol},"°"),n.default.createElement("div",{style:c.symbol},"%"),n.default.createElement("div",{style:c.symbol},"%")))};t.default=s},58843:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(){var e=(0,o.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return n.default.createElement("div",{style:e.pointer},n.default.createElement("div",{style:e.left},n.default.createElement("div",{style:e.leftInside})),n.default.createElement("div",{style:e.right},n.default.createElement("div",{style:e.rightInside})))};t.default=i},8183:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(e){var t=e.hsl,a=(0,o.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return n.default.createElement("div",{style:a.picker})};t.default=i},8649:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPreviews=function(e){var t=e.rgb,a=e.currentColor,r=(0,o.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:a,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return n.default.createElement("div",null,n.default.createElement("div",{style:r.label},"new"),n.default.createElement("div",{style:r.swatches},n.default.createElement("div",{style:r.new}),n.default.createElement("div",{style:r.current})),n.default.createElement("div",{style:r.label},"current"))};t.default=i},91614:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var n=c(a(96540)),o=c(a(5556)),r=c(a(58527)),i=a(2825),l=c(a(22939)),s=c(a(69577));function c(e){return e&&e.__esModule?e:{default:e}}var d=t.Sketch=function(e){var t=e.width,a=e.rgb,o=e.hex,c=e.hsv,d=e.hsl,u=e.onChange,h=e.onSwatchHover,p=e.disableAlpha,f=e.presetColors,g=e.renderers,m=e.className,v=void 0===m?"":m,b=(0,r.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+a.r+","+a.g+","+a.b+","+a.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:p});return n.default.createElement("div",{style:b.picker,className:"sketch-picker "+v},n.default.createElement("div",{style:b.saturation},n.default.createElement(i.Saturation,{style:b.Saturation,hsl:d,hsv:c,onChange:u})),n.default.createElement("div",{style:b.controls,className:"flexbox-fix"},n.default.createElement("div",{style:b.sliders},n.default.createElement("div",{style:b.hue},n.default.createElement(i.Hue,{style:b.Hue,hsl:d,onChange:u})),n.default.createElement("div",{style:b.alpha},n.default.createElement(i.Alpha,{style:b.Alpha,rgb:a,hsl:d,renderers:g,onChange:u}))),n.default.createElement("div",{style:b.color},n.default.createElement(i.Checkboard,null),n.default.createElement("div",{style:b.activeColor}))),n.default.createElement(l.default,{rgb:a,hsl:d,hex:o,onChange:u,disableAlpha:p}),n.default.createElement(s.default,{colors:f,onClick:u,onSwatchHover:h}))};d.propTypes={disableAlpha:o.default.bool,width:o.default.oneOfType([o.default.string,o.default.number])},d.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,i.ColorWrap)(d)},22939:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(26195)),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.SketchFields=function(e){var t=e.onChange,a=e.rgb,l=e.hsl,s=e.hex,c=e.disableAlpha,d=(0,o.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:c}),u=function(e,n){e.hex?r.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):e.r||e.g||e.b?t({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,a:a.a,source:"rgb"},n):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:l.h,s:l.s,l:l.l,a:e.a,source:"rgb"},n))};return n.default.createElement("div",{style:d.fields,className:"flexbox-fix"},n.default.createElement("div",{style:d.double},n.default.createElement(i.EditableInput,{style:{input:d.input,label:d.label},label:"hex",value:s.replace("#",""),onChange:u})),n.default.createElement("div",{style:d.single},n.default.createElement(i.EditableInput,{style:{input:d.input,label:d.label},label:"r",value:a.r,onChange:u,dragLabel:"true",dragMax:"255"})),n.default.createElement("div",{style:d.single},n.default.createElement(i.EditableInput,{style:{input:d.input,label:d.label},label:"g",value:a.g,onChange:u,dragLabel:"true",dragMax:"255"})),n.default.createElement("div",{style:d.single},n.default.createElement(i.EditableInput,{style:{input:d.input,label:d.label},label:"b",value:a.b,onChange:u,dragLabel:"true",dragMax:"255"})),n.default.createElement("div",{style:d.alpha},n.default.createElement(i.EditableInput,{style:{input:d.input,label:d.label},label:"a",value:Math.round(100*a.a),onChange:u,dragLabel:"true",dragMax:"100"})))};t.default=s},69577:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=s(a(96540)),r=s(a(5556)),i=s(a(58527)),l=a(2825);function s(e){return e&&e.__esModule?e:{default:e}}var c=t.SketchPresetColors=function(e){var t=e.colors,a=e.onClick,r=void 0===a?function(){}:a,s=e.onSwatchHover,c=(0,i.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),d=function(e,t){r({hex:e,source:"hex"},t)};return o.default.createElement("div",{style:c.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,a=""+t.color+(t.title||"");return o.default.createElement("div",{key:a,style:c.swatchWrap},o.default.createElement(l.Swatch,n({},t,{style:c.swatch,onClick:d,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};c.propTypes={colors:r.default.arrayOf(r.default.oneOfType([r.default.string,r.default.shape({color:r.default.string,title:r.default.string})])).isRequired},t.default=c},25928:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var n=s(a(96540)),o=s(a(58527)),r=a(2825),i=s(a(39976)),l=s(a(28767));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.Slider=function(e){var t=e.hsl,a=e.onChange,l=e.pointer,s=e.className,c=void 0===s?"":s,d=(0,o.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return n.default.createElement("div",{className:"slider-picker "+c},n.default.createElement("div",{style:d.hue},n.default.createElement(r.Hue,{style:d.Hue,hsl:t,pointer:l,onChange:a})),n.default.createElement("div",{style:d.swatches},n.default.createElement(i.default,{hsl:t,onClick:a})))};c.defaultProps={pointer:l.default},t.default=(0,r.ColorWrap)(c)},28767:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(){var e=(0,o.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return n.default.createElement("div",{style:e.picker})};t.default=i},43520:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var n=r(a(96540)),o=r(a(58527));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderSwatch=function(e){var t=e.hsl,a=e.offset,r=e.onClick,i=void 0===r?function(){}:r,l=e.active,s=e.first,c=e.last,d=(0,o.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*a+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:s,last:c});return n.default.createElement("div",{style:d.swatch,onClick:function(e){return i({h:t.h,s:.5,l:a,source:"hsl"},e)}})};t.default=i},39976:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var n=i(a(96540)),o=i(a(58527)),r=i(a(43520));function i(e){return e&&e.__esModule?e:{default:e}}var l=t.SliderSwatches=function(e){var t=e.onClick,a=e.hsl,i=(0,o.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return n.default.createElement("div",{style:i.swatches},n.default.createElement("div",{style:i.swatch},n.default.createElement(r.default,{hsl:a,offset:".80",active:Math.round(100*a.l)/100==.8&&Math.round(100*a.s)/100==.5,onClick:t,first:!0})),n.default.createElement("div",{style:i.swatch},n.default.createElement(r.default,{hsl:a,offset:".65",active:Math.round(100*a.l)/100==.65&&Math.round(100*a.s)/100==.5,onClick:t})),n.default.createElement("div",{style:i.swatch},n.default.createElement(r.default,{hsl:a,offset:".50",active:Math.round(100*a.l)/100==.5&&Math.round(100*a.s)/100==.5,onClick:t})),n.default.createElement("div",{style:i.swatch},n.default.createElement(r.default,{hsl:a,offset:".35",active:Math.round(100*a.l)/100==.35&&Math.round(100*a.s)/100==.5,onClick:t})),n.default.createElement("div",{style:i.swatch},n.default.createElement(r.default,{hsl:a,offset:".20",active:Math.round(100*a.l)/100==.2&&Math.round(100*a.s)/100==.5,onClick:t,last:!0})),n.default.createElement("div",{style:i.clear}))};t.default=l},13070:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var n=u(a(96540)),o=u(a(5556)),r=u(a(58527)),i=u(a(55378)),l=u(a(26195)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(50650)),c=a(2825),d=u(a(9979));function u(e){return e&&e.__esModule?e:{default:e}}var h=t.Swatches=function(e){var t=e.width,a=e.height,o=e.onChange,s=e.onSwatchHover,u=e.colors,h=e.hex,p=e.className,f=void 0===p?"":p,g=(0,r.default)({default:{picker:{width:t,height:a},overflow:{height:a,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),m=function(e,t){l.default.isValidHex(e)&&o({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:g.picker,className:"swatches-picker "+f},n.default.createElement(c.Raised,null,n.default.createElement("div",{style:g.overflow},n.default.createElement("div",{style:g.body},(0,i.default)(u,(function(e){return n.default.createElement(d.default,{key:e.toString(),group:e,active:h,onClick:m,onSwatchHover:s})})),n.default.createElement("div",{style:g.clear})))))};h.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),height:o.default.oneOfType([o.default.string,o.default.number]),colors:o.default.arrayOf(o.default.arrayOf(o.default.string))},h.defaultProps={width:320,height:240,colors:[[s.red[900],s.red[700],s.red[500],s.red[300],s.red[100]],[s.pink[900],s.pink[700],s.pink[500],s.pink[300],s.pink[100]],[s.purple[900],s.purple[700],s.purple[500],s.purple[300],s.purple[100]],[s.deepPurple[900],s.deepPurple[700],s.deepPurple[500],s.deepPurple[300],s.deepPurple[100]],[s.indigo[900],s.indigo[700],s.indigo[500],s.indigo[300],s.indigo[100]],[s.blue[900],s.blue[700],s.blue[500],s.blue[300],s.blue[100]],[s.lightBlue[900],s.lightBlue[700],s.lightBlue[500],s.lightBlue[300],s.lightBlue[100]],[s.cyan[900],s.cyan[700],s.cyan[500],s.cyan[300],s.cyan[100]],[s.teal[900],s.teal[700],s.teal[500],s.teal[300],s.teal[100]],["#194D33",s.green[700],s.green[500],s.green[300],s.green[100]],[s.lightGreen[900],s.lightGreen[700],s.lightGreen[500],s.lightGreen[300],s.lightGreen[100]],[s.lime[900],s.lime[700],s.lime[500],s.lime[300],s.lime[100]],[s.yellow[900],s.yellow[700],s.yellow[500],s.yellow[300],s.yellow[100]],[s.amber[900],s.amber[700],s.amber[500],s.amber[300],s.amber[100]],[s.orange[900],s.orange[700],s.orange[500],s.orange[300],s.orange[100]],[s.deepOrange[900],s.deepOrange[700],s.deepOrange[500],s.deepOrange[300],s.deepOrange[100]],[s.brown[900],s.brown[700],s.brown[500],s.brown[300],s.brown[100]],[s.blueGrey[900],s.blueGrey[700],s.blueGrey[500],s.blueGrey[300],s.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,c.ColorWrap)(h)},71903:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(26195)),i=a(2825);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.SwatchesColor=function(e){var t=e.color,a=e.onClick,l=void 0===a?function(){}:a,s=e.onSwatchHover,c=e.first,d=e.last,u=e.active,h=(0,o.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:r.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:c,last:d,active:u,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return n.default.createElement(i.Swatch,{color:t,style:h.color,onClick:l,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},n.default.createElement("div",{style:h.check},n.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},n.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=s},9979:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var n=l(a(96540)),o=l(a(58527)),r=l(a(55378)),i=l(a(71903));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.SwatchesGroup=function(e){var t=e.onClick,a=e.onSwatchHover,l=e.group,s=e.active,c=(0,o.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return n.default.createElement("div",{style:c.group},(0,r.default)(l,(function(e,o){return n.default.createElement(i.default,{key:e,color:e,active:e.toLowerCase()===s,first:0===o,last:o===l.length-1,onClick:t,onSwatchHover:a})})))};t.default=s},7468:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var n=c(a(96540)),o=c(a(5556)),r=c(a(58527)),i=c(a(55378)),l=c(a(26195)),s=a(2825);function c(e){return e&&e.__esModule?e:{default:e}}var d=t.Twitter=function(e){var t=e.onChange,a=e.onSwatchHover,o=e.hex,c=e.colors,d=e.width,u=e.triangle,h=e.className,p=void 0===h?"":h,f=(0,r.default)({default:{card:{width:d,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===u,"top-left-triangle":"top-left"===u,"top-right-triangle":"top-right"===u}),g=function(e,a){l.default.isValidHex(e)&&t({hex:e,source:"hex"},a)};return n.default.createElement("div",{style:f.card,className:"twitter-picker "+p},n.default.createElement("div",{style:f.triangleShadow}),n.default.createElement("div",{style:f.triangle}),n.default.createElement("div",{style:f.body},(0,i.default)(c,(function(e,t){return n.default.createElement(s.Swatch,{key:t,color:e,hex:e,style:f.swatch,onClick:g,onHover:a,focusStyle:{boxShadow:"0 0 4px "+e}})})),n.default.createElement("div",{style:f.hash},"#"),n.default.createElement(s.EditableInput,{style:{input:f.input},value:o.replace("#",""),onChange:g}),n.default.createElement("div",{style:f.clear})))};d.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),triangle:o.default.oneOf(["hide","top-left","top-right"]),colors:o.default.arrayOf(o.default.string)},d.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,s.ColorWrap)(d)},46412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChange=function(e,t,a,n){e.preventDefault();var o=n.clientWidth,r=n.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=i-(n.getBoundingClientRect().left+window.pageXOffset),c=l-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===a.direction){var d;if(d=c<0?0:c>r?1:Math.round(100*c/r)/100,a.hsl.a!==d)return{h:a.hsl.h,s:a.hsl.s,l:a.hsl.l,a:d,source:"rgb"}}else{var u;if(u=s<0?0:s>o?1:Math.round(100*s/o)/100,a.a!==u)return{h:a.hsl.h,s:a.hsl.s,l:a.hsl.l,a:u,source:"rgb"}}return null}},27218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={},n=t.render=function(e,t,a,n){if("undefined"==typeof document&&!n)return null;var o=n?new n:document.createElement("canvas");o.width=2*a,o.height=2*a;var r=o.getContext("2d");return r?(r.fillStyle=e,r.fillRect(0,0,o.width,o.height),r.fillStyle=t,r.fillRect(0,0,a,a),r.translate(a,a),r.fillRect(0,0,a,a),o.toDataURL()):null};t.get=function(e,t,o,r){var i=e+"-"+t+"-"+o+(r?"-server":""),l=n(e,t,o,r);return a[i]?a[i]:(a[i]=l,l)}},26195:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var n=r(a(76135)),o=r(a(87021));function r(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(e){var t=0,a=0;return(0,n.default)(["r","g","b","a","h","s","l","v"],(function(n){e[n]&&(t+=1,isNaN(e[n])||(a+=1),"s"===n||"l"===n)&&/^\d+%$/.test(e[n])&&(a+=1)})),t===a&&e},toState:function(e,t){var a=e.hex?(0,o.default)(e.hex):(0,o.default)(e),n=a.toHsl(),r=a.toHsv(),i=a.toRgb(),l=a.toHex();return 0===n.s&&(n.h=t||0,r.h=t||0),{hsl:n,hex:"000000"===l&&0===i.a?"transparent":"#"+l,rgb:i,hsv:r,oldHue:e.h||t||n.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,o.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}},t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},89278:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChange=function(e,t,a,n){e.preventDefault();var o=n.clientWidth,r=n.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=i-(n.getBoundingClientRect().left+window.pageXOffset),c=l-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===a.direction){var d=void 0;if(d=c<0?359:c>r?0:360*(-100*c/r+100)/100,a.hsl.h!==d)return{h:d,s:a.hsl.s,l:a.hsl.l,a:a.hsl.a,source:"rgb"}}else{var u=void 0;if(u=s<0?0:s>o?359:100*s/o*360/100,a.hsl.h!==u)return{h:u,s:a.hsl.s,l:a.hsl.l,a:a.hsl.a,source:"rgb"}}return null}},74572:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=(n=a(96540))&&n.__esModule?n:{default:n};function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(a){function n(){var e,t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=a=l(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(r))),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},l(a,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a),r(n,[{key:"render",value:function(){return i.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(e,o({},this.props,this.state)))}}]),n}(i.default.Component)}},75841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChange=function(e,t,a,n){e.preventDefault();var o=n.getBoundingClientRect(),r=o.width,i=o.height,l="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=l-(n.getBoundingClientRect().left+window.pageXOffset),d=s-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>r?c=r:d<0?d=0:d>i&&(d=i);var u=100*c/r,h=-100*d/i+100;return{h:a.hsl.h,s:u,v:h,a:a.hsl.a,source:"rgb"}}},77986:(e,t,a)=>{"use strict";t.Xq=t.WU=void 0;a(20788),a(97868),a(49366);var n=a(9626),o=a(34952);Object.defineProperty(t,"WU",{enumerable:!0,get:function(){return i(o).default}});a(40652),a(33736),a(61396),a(32572);var r=a(91614);Object.defineProperty(t,"Xq",{enumerable:!0,get:function(){return i(r).default}});a(25928),a(13070),a(7468),a(46201);function i(e){return e&&e.__esModule?e:{default:e}}i(n).default},26892:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var n,o=(n=a(33215))&&n.__esModule?n:{default:n},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,a){var n={};(0,o.default)(e,(function(e,t){var a=i[t];a?n=r({},n,a(e)):n[t]=e})),t[a]=n})),t};t.default=l},75268:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=(n=a(96540))&&n.__esModule?n:{default:n};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(a){function n(){var a,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var c=arguments.length,d=Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=s=i(this,(a=n.__proto__||Object.getPrototypeOf(n)).call.apply(a,[this].concat(d))),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return r.default.createElement(t,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},r.default.createElement(e,o({},s.props,s.state)))},i(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a),n}(r.default.Component)};t.default=l},16686:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=(n=a(96540))&&n.__esModule?n:{default:n};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(a){function n(){var a,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var c=arguments.length,d=Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=s=i(this,(a=n.__proto__||Object.getPrototypeOf(n)).call.apply(a,[this].concat(d))),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return r.default.createElement(t,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},r.default.createElement(e,o({},s.props,s.state)))},i(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a),n}(r.default.Component)};t.default=l},99265:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var n=l(a(85015)),o=l(a(33215)),r=l(a(11331)),i=l(a(55378));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return a.push(e)})):(0,r.default)(t)?(0,o.default)(t,(function(e,t){!0===e&&a.push(t),a.push(t+"-"+e)})):(0,n.default)(t)&&a.push(t)})),a};t.default=s},58527:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var n=c(a(99265)),o=c(a(76203)),r=c(a(26892)),i=c(a(16686)),l=c(a(75268)),s=c(a(62693));function c(e){return e&&e.__esModule?e:{default:e}}t.hover=i.default,t.handleHover=i.default,t.handleActive=l.default,t.loop=s.default;var d=t.ReactCSS=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];var l=(0,n.default)(a),s=(0,o.default)(e,l);return(0,r.default)(s)};t.default=d},62693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a={},n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a[e]=t};return 0===e&&n("first-child"),e===t-1&&n("last-child"),(0===e||e%2==0)&&n("even"),1===Math.abs(e%2)&&n("odd"),n("nth-child",e),a}},76203:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var n=i(a(33215)),o=i(a(88055)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var l=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=e.default&&(0,o.default)(e.default)||{};return t.map((function(t){var o=e[t];return o&&(0,n.default)(o,(function(e,t){a[t]||(a[t]={}),a[t]=r({},a[t],o[t])})),t})),a};t.default=l},70731:e=>{var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},a=Object.keys(t).join("|"),n=new RegExp(a,"g"),o=new RegExp(a,"");function r(e){return t[e]}var i=function(e){return e.replace(n,r)};e.exports=i,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=i},49277:(e,t,a)=>{"use strict";a.d(t,{M9:()=>c,TX:()=>d,cy:()=>s});var n=a(62193),o=a.n(n),r=a(62952),i=a(13686);const l=864e5,s=(e,t=!1,a=!1)=>{const n=new Date;if("now"===e||"No filter"===e||""===e)return n;if("today"===e)return n.setHours(0,0,0,0),n;if(a?n.setHours(-n.getTimezoneOffset()/60,0,0,0):n.setHours(0,0,0,0),t&&null!=e&&e.includes("Last"))return n;switch(e){case"Last day":return n.setUTCDate(n.getUTCDate()-1),n;case"Last week":return n.setUTCDate(n.getUTCDate()-7),n;case"Last month":return n.setUTCMonth(n.getUTCMonth()-1),n;case"Last quarter":return n.setUTCMonth(n.getUTCMonth()-3),n;case"Last year":return n.setUTCFullYear(n.getUTCFullYear()-1),n;case"previous calendar week":return t?n.setDate(n.getDate()-n.getDay()+1):n.setDate(n.getDate()-n.getDay()-6),n;case"previous calendar month":return t?n.setDate(1):(n.setDate(1),n.setMonth(n.getMonth()-1)),n;case"previous calendar year":return t?n.setFullYear(n.getFullYear(),0,1):n.setFullYear(n.getFullYear()-1,0,1),n}if(null!=e&&e.includes("ago")){const t=e.split(" "),a=parseInt(t[0],10);switch(t[1]){case"day":case"days":n.setUTCDate(n.getUTCDate()-a);break;case"week":case"weeks":n.setUTCDate(n.getUTCDate()-7*a);break;case"month":case"months":n.setUTCMonth(n.getUTCMonth()-a);break;case"year":case"years":n.setUTCFullYear(n.getUTCFullYear()-a)}return n}const r=null==e?void 0:e.split("-");let i=null;return i=r&&!o()(r)?1===r.length?new Date(Date.UTC(parseInt(r[0],10),0)):2===r.length?new Date(Date.UTC(parseInt(r[0],10),parseInt(r[1],10)-1)):3===r.length?new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10)):new Date(e):new Date(e),i&&!Number.isNaN(i.getTime())?(a?i.setHours(-i.getTimezoneOffset()/60,0,0,0):i.setHours(0,0,0,0),i):null},c=(e,t,a)=>{let n;if(n="now"===e||"today"===e?new Date:new Date(e),!Number.isNaN(n.getTime())){switch(t){case"second":n.setSeconds(n.getSeconds()+a);break;case"minute":n.setMinutes(n.getMinutes()+a);break;case"hour":n.setHours(n.getHours()+a);break;case"day":n.setDate(n.getDate()+a);break;case"week":n.setDate(n.getDate()+7*a);break;case"month":n.setMonth(n.getMonth()+a);break;case"quarter":n.setMonth(n.getMonth()+3*a);break;case"year":n.setFullYear(n.getFullYear()+a)}return n}return null},d=({timeRangeFilter:e,shifts:t,startDate:a,includeFutureOffsets:n=!0})=>{var o,d,u,h,p,f;const{customRange:g,matchedFlag:m}=(0,i.t)(null!=(o=null==e?void 0:e.comparator)?o:"");let v=null,b=null;if(m){var y,x;const{sinceDatetime:e,sinceMode:t,sinceGrain:a,sinceGrainValue:n,untilDatetime:o,untilMode:r,untilGrain:i,untilGrainValue:l}={...g};v="relative"!==t?"specific"===t?new Date(e):s(e,!1,!0):c(e,a,n),null==(y=v)||y.setHours(0,0,0,0),b="relative"!==r?"specific"===r?new Date(o):s(o,!1,!0):c(o,i,l),null==(x=b)||x.setHours(0,0,0,0)}const w=null==t?void 0:t.includes("custom"),C=null==t?void 0:t.includes("inherit");let S;var A;w&&(S=m?new Date(new Date(a).setUTCHours(new Date(a).getTimezoneOffset()/60,0,0,0)).getTime():null==(A=s(a))?void 0:A.getTime());const[k,E]=(null!=(d=null==e?void 0:e.comparator)?d:"").split(" : ").map((e=>e.trim())),_=(null==(u=null!=(h=v)?h:s(k,!1,!1))?void 0:u.getTime())||0,M=(null==(p=null!=(f=b)?f:s(E||k,!0,!1))?void 0:p.getTime())||0,D=S&&_&&Math.round((_-S)/l),T=C&&M&&_&&Math.round((M-_)/l),O=(0,r.A)(t).map((e=>{if("custom"===e&&void 0!==D&&!Number.isNaN(D)){if(n&&D<0)return-1*D+" days after";if(D>=0&&_)return`${D} days ago`}if("inherit"===e&&T&&!Number.isNaN(T)){if(n&&T<0)return-1*T+" days after";if(T>0)return`${T} days ago`}return e})).filter((e=>"custom"!==e&&"inherit"!==e));return(0,r.A)(O)}},4454:(e,t,a)=>{"use strict";a.d(t,{D:()=>O});var n=a(85015),o=a.n(n),r=a(62193),i=a.n(r),l=a(96540),s=a(78697),c=a(15595),d=a(90868),u=a(85861),h=a(46920),p=a(96453),f=a(35742),g=a(95579),m=a(61225),v=a(95093),b=a.n(v),y=a(58561),x=a.n(y),w=a(74680),C=a(95272),S=a(39829),A=a(85183),k=a(60237),E=a(27023),_=a(2445);const M=p.I4.div`
  .sdm-body {
    margin: 0 8px;
  }
  .sdm-input {
    margin-left: 45px;
    width: 401px;
  }
  .sdm-autocomplete {
    width: 401px;
    align-self: center;
  }
  .sdm-radio {
    display: block;
    height: 30px;
    margin: 10px 0px;
    line-height: 30px;
  }
  .sdm-overwrite-msg {
    margin: 7px;
  }
  .sdm-overwrite-container {
    flex: 1 1 auto;
    display: flex;
  }
`,D=async(e,t,a,n,o,r)=>{const i=`api/v1/dataset/${t}?override_columns=${r}`,l=JSON.stringify({sql:a,columns:n,owners:o,database_id:e});return(await f.A.put({endpoint:i,headers:{"Content-Type":"application/json"},body:l})).json.result},T=(0,g.t)("Untitled Dataset"),O=({visible:e,onHide:t,buttonTextOnSave:a,buttonTextOnOverwrite:n,modalDescription:r,datasource:p,openWindow:v=!0,formData:y={}})=>{const O=(0,m.d4)((e=>{var t,a;return(null==(t=e.common)||null==(a=t.conf)?void 0:a.DEFAULT_VIZ_TYPE)||"table"})),Y=()=>`${(null==p?void 0:p.name)||T} ${b()().format("L HH:mm:ss")}`,[R,F]=(0,l.useState)(Y()),[I,P]=(0,l.useState)(S.lr.SaveNew),[N,L]=(0,l.useState)(!1),[$,B]=(0,l.useState)({}),[H,j]=(0,l.useState)(void 0),[z,W]=(0,l.useState)(!1),U=(0,m.d4)((e=>e.user)),q=(0,m.wA)(),V=e=>{v?window.open(e,"_blank","noreferrer"):window.location.href=e},G={...S.V0,...y||{}},K=(0,l.useCallback)((async(e="")=>{const{userId:t}=U,a=x().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return f.A.get({endpoint:`/api/v1/dataset/?q=${a}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[U]),X=I===S.lr.SaveNew&&0===R.length||I===S.lr.OverwriteDataset&&i()(H);return(0,_.Y)(u.A,{show:e,title:(0,g.t)("Save or Overwrite Dataset"),onHide:t,footer:(0,_.FD)(_.FK,{children:[I===S.lr.SaveNew&&(0,_.Y)(h.A,{disabled:X,buttonStyle:"primary",onClick:()=>{var e,a;W(!0);const n=null!=(e=null==p?void 0:p.columns)?e:[];let r;if(o()(null==p?void 0:p.templateParams)){const e=JSON.parse(p.templateParams);e._filters&&(delete e._filters,r=JSON.stringify(e))}q((0,w.createDatasource)({sql:p.sql,dbId:p.dbId||(null==p||null==(a=p.database)?void 0:a.id),catalog:null==p?void 0:p.catalog,schema:null==p?void 0:p.schema,templateParams:r,datasourceName:R})).then((e=>(0,k.T3)(e.id,"table",{...G,datasource:`${e.id}__table`,..."table"===O&&{all_columns:n.map((e=>e.column_name))}}))).then((e=>{W(!1);const a=(0,A.eX)(null,{[E.vX.formDataKey.name]:e});V(a),F(Y()),t()})).catch((()=>{W(!1),(0,C.iB)((0,g.t)("An error occurred saving dataset"))}))},loading:z,children:a}),I===S.lr.OverwriteDataset&&(0,_.FD)(_.FK,{children:[N&&(0,_.Y)(h.A,{onClick:()=>{L(!1),B({})},children:(0,g.t)("Back")}),(0,_.Y)(h.A,{className:"md",buttonStyle:"primary",onClick:async()=>{var e,a,n;if(!N)return void L(!0);W(!0);const[,o]=await Promise.all([D(null==p?void 0:p.dbId,null==$?void 0:$.datasetid,null==p?void 0:p.sql,null==p||null==(e=p.columns)?void 0:e.map((e=>({column_name:e.column_name,type:e.type,is_dttm:e.is_dttm}))),null==$||null==(a=$.owners)?void 0:a.map((e=>e.id)),!0),(0,k.T3)($.datasetid,"table",{...G,datasource:`${$.datasetid}__table`,..."table"===O&&{all_columns:null==p||null==(n=p.columns)?void 0:n.map((e=>e.column_name))}})]);W(!1);const r=(0,A.eX)(null,{[E.vX.formDataKey.name]:o});V(r),L(!1),F(Y()),t()},disabled:X,loading:z,children:n})]})]}),children:(0,_.FD)(M,{children:[!N&&(0,_.FD)("div",{className:"sdm-body",children:[r&&(0,_.Y)("div",{className:"sdm-prompt",children:r}),(0,_.FD)(s.s.Group,{onChange:e=>{P(Number(e.target.value))},value:I,children:[(0,_.FD)(s.s,{className:"sdm-radio",value:1,children:[(0,g.t)("Save as new"),(0,_.Y)(d.pd,{className:"sdm-input",value:R,onChange:e=>{F(e.target.value)},disabled:1!==I})]}),(0,_.FD)("div",{className:"sdm-overwrite-container",children:[(0,_.Y)(s.s,{className:"sdm-radio",value:2,children:(0,g.t)("Overwrite existing")}),(0,_.Y)("div",{className:"sdm-autocomplete",children:(0,_.Y)(c.DW,{allowClear:!0,showSearch:!0,placeholder:(0,g.t)("Select or type dataset name"),ariaLabel:(0,g.t)("Existing dataset"),onChange:(e,t)=>{B(t),j(e)},options:e=>K(e),value:H,filterOption:(e,t)=>t.value.toLowerCase().includes(e.toLowerCase()),disabled:2!==I,getPopupContainer:()=>document.body})})]})]})]}),N&&(0,_.Y)("div",{className:"sdm-overwrite-msg",children:(0,g.t)("Are you sure you want to overwrite this dataset?")})]})})}},64527:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(96540),o=a(96453),r=a(2738),i=a(49501),l=a(2445);const s=(0,o.I4)(r.A)`
  text-align: left;
  font-family: ${({theme:e})=>e.typography.families.monospace};
`;function c({endTime:e,isRunning:t,startTime:a,status:o="success"}){const[r,c]=(0,n.useState)("00:00:00.00"),d=(0,n.useRef)();return(0,n.useEffect)((()=>{const n=()=>{d.current&&(clearInterval(d.current),d.current=void 0)};return t&&(d.current=setInterval((()=>{if(a){const o=e||(0,i.tB)();a<o&&c((0,i.RW)(a,o)),t||n()}}),30)),n}),[e,t,a]),(0,l.Y)(s,{type:o,role:"timer",children:r})}},8435:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Zs});var n=a(96540),o=a(61225),r=a(61574),i=a(13270),l=a(93505),s=a(95579),c=a(51436),d=a(7148),u=a(17444),h=a(95272),p=a(32132),f=a(27023),g=a(76295),m=a(68921);const v={form_data:{name:"form_data",parser:e=>{const t=JSON.parse(e);if(t.datasource){const[e,a]=t.datasource.split("__");t.datasource_id=e,t.datasource_type=a,delete t.datasource}return t}},slice_id:{name:"slice_id"},datasource_id:{name:"datasource_id"},datasource_type:{name:"datasource_type"},datasource:{name:"datasource",parser:e=>{const[t,a]=e.split("__");return{datasource_id:t,datasource_type:a}}},form_data_key:{name:"form_data_key"},permalink_key:{name:"permalink_key"},viz_type:{name:"viz_type"},dashboard_id:{name:"dashboard_id"}},b={p:"permalink_key",table:"datasource_id"},y=e=>{const t=new URLSearchParams(e);return Array.from(t.keys()).reduce(((e,a)=>{var n;const o=t.get(a);if(null===o)return e;let r;try{var i,l,s;r=null!=(i=null==(l=(s=v[a]).parser)?void 0:l.call(s,o))?i:o}catch{r=o}if("object"==typeof r)return{...e,...r};const c=(null==(n=v[a])?void 0:n.name)||a;return{...e,[c]:r}}),{})},x=(e=window.location)=>{return new URLSearchParams(Object.entries({...y(e.search),...(t=e.pathname,Object.keys(b).reduce(((e,a)=>{const n=new RegExp(`/(${a})/(\\w+)`),o=t.match(n);return null!=o&&o[2]?{...e,[b[a]]:o[2]}:e}),{}))}).map((e=>e.join("="))).join("&"));var t};var w=a(91522),C=a(44383),S=a.n(C),A=a(90179),k=a.n(A),E=a(40346),_=a.n(E),M=a(2404),D=a.n(M),T=a(38221),O=a.n(T),Y=a(5556),R=a.n(Y),F=a(82960),I=a(96453),P=a(17437),N=a(5362),L=a(83505),$=a(93211),B=a(45905),H=a(33149),j=a(36053),z=a(19129),W=a(12249),U=a(62221),q=a(95483),V=a(35839),G=a(7735),K=a(35700),X=a(46942),Q=a.n(X),J=a(2514),Z=a(34975),ee=a(4881),te=a(25062),ae=a(60237),ne=a(64349),oe=a(85183),re=a(17596),ie=a(60130),le=a(92037),se=a(48422),ce=a(5261),de=a(114),ue=a(27366),he=a(80145),pe=a(5795),fe=a(62952),ge=a(35742),me=a(62703),ve=a(25946),be=a(4454),ye=a(9066),xe=a(21357),we=a(8786),Ce=a(26761),Se=a(2738),Ae=a(95093),ke=a.n(Ae),Ee=a(2445);const _e=({cachedTimestamp:e})=>{const t=e?(0,Ee.FD)("span",{children:[(0,s.t)("Loaded data cached"),(0,Ee.FD)("b",{children:[" ",ke().utc(e).fromNow()]})]}):(0,s.t)("Loaded from cache");return(0,Ee.FD)("span",{children:[t,". ",(0,s.t)("Click to force-refresh")]})},Me=({className:e,onClick:t,cachedTimestamp:a})=>{const[o,r]=(0,n.useState)(!1),i=o?"primary":"default";return(0,Ee.Y)(z.m,{title:(0,Ee.Y)(_e,{cachedTimestamp:a}),id:"cache-desc-tooltip",children:(0,Ee.FD)(Se.A,{className:`${e}`,type:i,onClick:t,onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),children:[(0,s.t)("Cached")," ",(0,Ee.Y)("i",{className:"fa fa-refresh"})]})})};var De=a(64527);const Te={failed:"danger",loading:"warning",success:"success"},Oe=(0,n.forwardRef)((({queriesResponse:e,chartStatus:t,chartUpdateStartTime:a,chartUpdateEndTime:n,refreshCachedQuery:o,rowLimit:r},i)=>{const l="loading"===t,s=null==e?void 0:e[0];return(0,Ee.Y)("div",{ref:i,children:(0,Ee.FD)("div",{css:e=>P.AH`
            display: flex;
            justify-content: flex-end;
            padding-bottom: ${4*e.gridUnit}px;
            & .ant-tag:last-of-type {
              margin: 0;
            }
          `,children:[!l&&s&&(0,Ee.Y)(Ce.A,{rowcount:Number(s.sql_rowcount)||0,limit:Number(r)||0}),!l&&(null==s?void 0:s.is_cached)&&(0,Ee.Y)(Me,{onClick:o,cachedTimestamp:s.cached_dttm}),(0,Ee.Y)(De.A,{startTime:a,endTime:n,isRunning:l,status:Te[t]})]})})}));var Ye=a(46920);const Re=I.I4.div`
  ${({theme:e})=>P.AH`
    margin: ${4*e.gridUnit}px;
    padding: ${4*e.gridUnit}px;

    border: 1px solid ${e.colors.info.base};
    background-color: ${e.colors.info.light2};
    border-radius: 2px;

    color: ${e.colors.info.dark2};
    font-size: ${e.typography.sizes.m}px;

    p {
      margin-bottom: ${e.gridUnit}px;
    }

    & a,
    & span[role='button'] {
      color: inherit;
      text-decoration: underline;
      &:hover {
        color: ${e.colors.info.dark1};
      }
    }

    &.alert-type-warning {
      border-color: ${e.colors.alert.base};
      background-color: ${e.colors.alert.light2};

      p {
        color: ${e.colors.alert.dark2};
      }

      & a:hover,
      & span[role='button']:hover {
        color: ${e.colors.alert.dark1};
      }
    }
  `}
`,Fe=I.I4.div`
  display: flex;
  justify-content: flex-end;
  button {
    line-height: 1;
  }
`,Ie=I.I4.p`
  font-weight: ${({theme:e})=>e.typography.weights.bold};
`,Pe={warning:"warning",danger:"danger"},Ne=(0,n.forwardRef)((({title:e,bodyText:t,primaryButtonAction:a,secondaryButtonAction:n,primaryButtonText:o,secondaryButtonText:r,type:i="info",className:l=""},s)=>(0,Ee.FD)(Re,{className:`alert-type-${i} ${l}`,ref:s,children:[(0,Ee.Y)(Ie,{children:e}),(0,Ee.Y)("p",{children:t}),o&&a&&(0,Ee.FD)(Fe,{children:[n&&r&&(0,Ee.Y)(Ye.A,{buttonStyle:"link",buttonSize:"small",onClick:n,children:r}),(0,Ee.Y)(Ye.A,{buttonStyle:i in Pe?Pe[i]:"primary",buttonSize:"small",onClick:a,children:o})]})]})));var Le=a(98250);const $e={actions:R().object.isRequired,onQuery:R().func,can_overwrite:R().bool.isRequired,can_download:R().bool.isRequired,datasource:R().object,dashboardId:R().number,column_formats:R().object,containerId:R().string.isRequired,isStarred:R().bool.isRequired,slice:R().object,sliceName:R().string,table_name:R().string,vizType:R().string.isRequired,form_data:R().object,ownState:R().object,standalone:R().bool,force:R().bool,timeout:R().number,chartIsStale:R().bool,chart:ee.tb,errorMessage:R().node,triggerRender:R().bool},Be=1.25,He=[100,0],je=[300,65],ze=I.I4.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: stretch;
  overflow: auto;
  box-shadow: none;
  height: 100%;

  & > div {
    height: 100%;
  }

  .gutter {
    border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    width: ${({theme:e})=>9*e.gridUnit}px;
    margin: ${({theme:e})=>e.gridUnit*Be}px auto;
  }

  .gutter.gutter-vertical {
    display: ${({showSplite:e})=>e?"block":"none"};
    cursor: row-resize;
  }

  .ant-collapse {
    .ant-tabs {
      height: 100%;
      .ant-tabs-nav {
        padding-left: ${({theme:e})=>5*e.gridUnit}px;
        margin: 0;
      }
      .ant-tabs-content-holder {
        overflow: hidden;
        .ant-tabs-content {
          height: 100%;
        }
      }
    }
  }
`;var We={name:"1wbll7q",styles:"text-decoration:underline"};const Ue=({chart:e,slice:t,vizType:a,ownState:o,triggerRender:r,force:i,datasource:l,errorMessage:c,form_data:d,onQuery:u,actions:h,timeout:p,standalone:f,chartIsStale:g,chartAlert:m,can_download:v})=>{var b;const y=(0,I.DP)(),x=y.gridUnit*Be,w=y.gridUnit*Be,{ref:C,observerRef:S,width:A,height:k}=function(){const e=(0,n.useRef)(),[{width:t,height:a},o]=(0,n.useState)({}),r=(0,n.useCallback)((()=>{if(e.current){const{width:t,height:a}=(null==e.current.getBoundingClientRect?void 0:e.current.getBoundingClientRect())||{};o({width:t,height:a})}}),[]),{ref:i}=(0,Le.uZ)({refreshMode:"debounce",refreshRate:300,onResize:r});return{ref:e,observerRef:i,width:t,height:a}}(),[E,_]=(0,n.useState)((0,ue.G7)(ue.TO.DatapanelClosedByDefault)?He:(0,U.Gq)(U.Hh.ChartSplitSizes,He)),[M,D]=(0,n.useState)(!(0,ue.G7)(ue.TO.DatapanelClosedByDefault)&&(0,U.Gq)(U.Hh.IsDatapanelOpen,!1)),[T,O]=(0,n.useState)(!1),Y=(0,he.A)(),{useLegacyApi:R}=null!=(b=Y.get(a))?b:{},F=R&&l.type!==pe.cT.Table,N=!m&&g&&!F&&"failed"!==e.chartStatus&&(0,fe.A)(e.queriesResponse).length>0,L=(0,n.useCallback)((async function(){if(t&&null===t.query_context){const e=(0,oe.sx)({formData:t.form_data,force:i,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null});await ge.A.put({endpoint:`/api/v1/chart/${t.slice_id}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({query_context:JSON.stringify(e),query_context_generation:!0})})}}),[t]);(0,n.useEffect)((()=>{L()}),[L]),(0,n.useEffect)((()=>{(0,U.SO)(U.Hh.ChartSplitSizes,E)}),[E]);const $=(0,n.useCallback)((e=>{_(e)}),[]),B=(0,n.useCallback)((()=>{h.setForceQuery(!0),h.postChartFormData(d,!0,p,e.id,void 0,o),h.updateQueryFormData(d,e.id)}),[h,e.id,d,o,p]),H=(0,n.useCallback)((e=>{let t;t=e?[60,40]:He,_(t),D(e)}),[]),j=(0,n.useCallback)((()=>(0,Ee.Y)("div",{css:P.AH`
          min-height: 0;
          flex: 1;
          overflow: auto;
        `,ref:C,children:A&&k&&(0,Ee.Y)(me.A,{width:Math.floor(A),height:k,ownState:o,annotationData:e.annotationData,chartAlert:e.chartAlert,chartStackTrace:e.chartStackTrace,chartId:e.id,chartStatus:e.chartStatus,triggerRender:r,force:i,datasource:l,errorMessage:c,formData:d,latestQueryFormData:e.latestQueryFormData,onQuery:u,queriesResponse:e.queriesResponse,chartIsStale:g,setControlValue:h.setControlValue,timeout:p,triggerQuery:e.triggerQuery,vizType:a})})),[h.setControlValue,e.annotationData,e.chartAlert,e.chartStackTrace,e.chartStatus,e.id,e.latestQueryFormData,e.queriesResponse,e.triggerQuery,g,k,C,A,l,c,i,d,u,o,p,r,a]),z=(0,n.useMemo)((()=>(0,Ee.FD)("div",{className:"panel-body",css:P.AH`
          display: flex;
          flex-direction: column;
        `,ref:S,children:[F&&(0,Ee.Y)(ve.A,{message:(0,s.t)("Chart type requires a dataset"),type:"error",css:e=>P.AH`
              margin: 0 0 ${4*e.gridUnit}px 0;
            `,description:(0,Ee.FD)(Ee.FK,{children:[(0,s.t)("This chart type is not supported when using an unsaved query as a chart source. "),(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:()=>O(!0),css:We,children:(0,s.t)("Create a dataset")}),(0,s.t)(" to visualize your data.")]})}),N&&(0,Ee.Y)(Ne,{title:c?(0,s.t)("Required control values have been removed"):(0,s.t)("Your chart is not up to date"),bodyText:c?(0,xe.w)(!1):(0,Ee.FD)("span",{children:[(0,s.t)('You updated the values in the control panel, but the chart was not updated automatically. Run the query by clicking on the "Update chart" button or')," ",(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:u,children:(0,s.t)("click here")}),"."]}),type:"warning",css:e=>P.AH`
              margin: 0 0 ${4*e.gridUnit}px 0;
            `}),(0,Ee.Y)(Oe,{queriesResponse:e.queriesResponse,chartStatus:e.chartStatus,chartUpdateStartTime:e.chartUpdateStartTime,chartUpdateEndTime:e.chartUpdateEndTime,refreshCachedQuery:B,rowLimit:null==d?void 0:d.row_limit}),j()]})),[S,N,c,u,e.queriesResponse,e.chartStatus,e.chartUpdateStartTime,e.chartUpdateEndTime,B,null==d?void 0:d.row_limit,j]),W=(0,n.useMemo)((()=>j()),[j]),[q,V]=(0,n.useState)(e.latestQueryFormData);(0,n.useEffect)((()=>{r||V(e.latestQueryFormData)}),[e.latestQueryFormData]);const G=(0,n.useCallback)(((e,t,a)=>({[e]:`calc(${t}% - ${a+x}px)`})),[x]);if(f){const e="background-transparent";return document.body.className.split(" ").includes(e)||(document.body.className+=` ${e}`),(0,Ee.Y)("div",{id:"app",ref:S,children:W})}return(0,Ee.FD)(ze,{className:"panel panel-default chart-container",showSplite:M,children:[(0,Ee.FD)(de.A,{sizes:E,minSize:je,direction:"vertical",gutterSize:w,onDragEnd:$,elementStyle:G,expandToMin:!0,children:[z,(0,Ee.Y)(we._h,{ownState:o,queryFormData:q,datasource:l,queryForce:i,onCollapseChange:H,chartStatus:e.chartStatus,errorMessage:c,actions:h,canDownload:v})]}),T&&(0,Ee.Y)(be.D,{visible:T,onHide:()=>O(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),datasource:(0,ye.l)(l),openWindow:!1,formData:d})]})};Ue.propTypes=$e;const qe=Ue;var Ve=a(20249),Ge=a.n(Ve),Ke=a(96627),Xe=a(18253),Qe=a(28505),Je=a(67984),Ze=a(52720),et=a(61693),tt=a(48327),at=a(85861);function nt({controls:e}){const t=(0,n.useCallback)((e=>{const t=e&&"shouldStash"in e.props?e.props.children.props:null==e?void 0:e.props;return"HiddenControl"===(null==t?void 0:t.type)||!1===(null==t?void 0:t.isVisible)}),[]),a=e.filter((e=>!t(e))),o=a.length?12/a.length:12;return(0,Ee.Y)("div",{className:"row",children:e.map(((e,a)=>(0,Ee.Y)("div",{className:`col-lg-${o} col-xs-12`,style:{display:t(e)?"none":"block"},children:e},a)))})}var ot=a(49544),rt=a(81163),it=a(15595),lt=a(33228),st=a(66537),ct=a(49262);function dt(e){const{selectable:t,children:a,...n}=e,o=(0,I.DP)(),r={"&.ant-list-item":{padding:`${o.gridUnit+2}px ${3*o.gridUnit}px`,":first-of-type":{borderTopLeftRadius:o.gridUnit,borderTopRightRadius:o.gridUnit},":last-of-type":{borderBottomLeftRadius:o.gridUnit,borderBottomRightRadius:o.gridUnit}}};return t&&(r["&:hover"]={cursor:"pointer",backgroundColor:o.colors.grayscale.light4}),(0,Ee.Y)(it.B8.Item,{...n,css:r,children:a})}var ut=a(22533);const ht=(0,ct.A)((()=>a.e(5373).then(a.bind(a,87754))),(()=>(0,Ee.Y)("div",{style:{width:450,height:368}}))),pt={colorScheme:R().string.isRequired,annotationError:R().object,annotationQuery:R().object,vizType:R().string,validationErrors:R().array,name:R().string.isRequired,actions:R().object,value:R().arrayOf(R().object),onChange:R().func,refreshAnnotationData:R().func};class ft extends n.PureComponent{constructor(e){super(e),this.state={popoverVisible:{},addedAnnotationIndex:null},this.addAnnotationLayer=this.addAnnotationLayer.bind(this),this.removeAnnotationLayer=this.removeAnnotationLayer.bind(this),this.handleVisibleChange=this.handleVisibleChange.bind(this)}componentDidMount(){ht.preload()}UNSAFE_componentWillReceiveProps(e){const{name:t,annotationError:a,validationErrors:n,value:o}=e;Object.keys(a).length&&!n.length&&this.props.actions.setControlValue(t,o,Object.keys(a)),!Object.keys(a).length&&n.length&&this.props.actions.setControlValue(t,o,[])}addAnnotationLayer(e,t){let a=this.props.value;a.includes(e)?a=a.map((a=>a===e?t:a)):(a=[...a,t],this.setState({addedAnnotationIndex:a.length-1})),this.props.refreshAnnotationData({annotation:t,force:!0}),this.props.onChange(a)}handleVisibleChange(e,t){this.setState((a=>({popoverVisible:{...a.popoverVisible,[t]:e}})))}removeAnnotationLayer(e){const t=this.props.value.filter((t=>t!==e)),a=(0,ut.v)();a&&a.style.setProperty("overflow-y","auto","important"),this.props.onChange(t)}renderPopover(e,t,a){const n=(null==t?void 0:t.name)||"_new";return(0,Ee.Y)("div",{id:`annotation-pop-${n}`,children:(0,Ee.Y)(ht,{...t,error:a,colorScheme:this.props.colorScheme,vizType:this.props.vizType,addAnnotationLayer:e=>this.addAnnotationLayer(t,e),removeAnnotationLayer:()=>this.removeAnnotationLayer(t),close:()=>{this.handleVisibleChange(!1,e),this.setState({addedAnnotationIndex:null})}})})}renderInfo(e){const{annotationError:t,annotationQuery:a,theme:n}=this.props;return a[e.name]?(0,Ee.Y)("i",{className:"fa fa-refresh",style:{color:n.colors.primary.base},"aria-hidden":!0}):t[e.name]?(0,Ee.Y)(st.W,{label:"validation-errors",bsStyle:"danger",tooltip:t[e.name]}):e.show?"":(0,Ee.Y)("span",{style:{color:n.colors.error.base},children:" Hidden "})}render(){const{addedAnnotationIndex:e}=this.state,t=this.props.value[e],a=this.props.value.map(((e,t)=>(0,Ee.Y)(ut.A,{trigger:"click",title:(0,s.t)("Edit annotation layer"),css:e=>({"&:hover":{cursor:"pointer",backgroundColor:e.colors.grayscale.light4}}),content:this.renderPopover(t,e,this.props.annotationError[e.name]),visible:this.state.popoverVisible[t],onVisibleChange:e=>this.handleVisibleChange(e,t),children:(0,Ee.FD)(dt,{selectable:!0,children:[(0,Ee.Y)("span",{children:e.name}),(0,Ee.Y)("span",{style:{float:"right"},children:this.renderInfo(e)})]})},t))),n="add";return(0,Ee.Y)("div",{children:(0,Ee.FD)(it.B8,{bordered:!0,css:e=>({borderRadius:e.gridUnit}),children:[a,(0,Ee.Y)(ut.A,{trigger:"click",content:this.renderPopover(n,t),title:(0,s.t)("Add annotation layer"),visible:this.state.popoverVisible[n],destroyTooltipOnHide:!0,onVisibleChange:e=>this.handleVisibleChange(e,n),children:(0,Ee.FD)(dt,{selectable:!0,children:[(0,Ee.Y)("i",{className:"fa fa-plus"})," ","  ",(0,s.t)("Add annotation layer")]})})]})})}}ft.propTypes=pt,ft.defaultProps={vizType:"",value:[],annotationError:{},annotationQuery:{},onChange:()=>{}};const gt=(0,lt.b)(ft),mt=(0,o.Ng)((function({charts:e,explore:t}){var a,n;const o=e[(0,oe.kD)(t)]||e[0]||{};return{colorScheme:null==(a=t.controls)||null==(n=a.color_scheme)?void 0:n.value,annotationError:o.annotationError,annotationQuery:o.annotationQuery,vizType:t.controls.viz_type.value}}),(function(e){return{refreshAnnotationData:t=>e((0,J.runAnnotationQuery)(t))}}))(gt);var vt=a(52182),bt=a.n(vt),yt=a(90868),xt=a(50317);const wt=I.I4.div`
  display: flex;
`,Ct=(0,I.I4)(yt.YI)`
  flex: 1;
  margin-right: ${({theme:e})=>e.gridUnit}px;
`,St=(0,I.I4)(yt.YI)`
  flex: 1;
  margin-left: ${({theme:e})=>e.gridUnit}px;
`,At=e=>null==e||"string"==typeof e&&Number.isNaN(bt()(e))?null:Number(e);function kt({onChange:e=(()=>{}),value:t=[null,null],...a}){const[o,r]=(0,n.useState)([At(t[0]),At(t[1])]),i=t[0],l=t[1],c=(0,n.useRef)(O()(e,300)).current,d=e=>{r(e),c([void 0===e[0]?null:e[0],void 0===e[1]?null:e[1]])};return(0,n.useEffect)((()=>{r([At(i),At(l)])}),[i,l]),(0,Ee.FD)("div",{children:[(0,Ee.Y)(xt.A,{...a}),(0,Ee.FD)(wt,{children:[(0,Ee.Y)(Ct,{placeholder:(0,s.t)("Min"),onChange:e=>{d([At(e),o[1]])},value:null===o[0]?void 0:o[0]}),(0,Ee.Y)(St,{placeholder:(0,s.t)("Max"),onChange:e=>{d([o[0],At(e)])},value:null===o[1]?void 0:o[1]})]})]})}var Et=a(37648),_t=a(43561),Mt=a(58168),Dt=a(5544),Tt=a(30201),Ot=a(23029),Yt=a(92901),Rt=a(56822),Ft=a(53954),It=a(85501),Pt=a(9417),Nt=a(64467),Lt=a(28290),$t=a(20311),Bt=a.n($t),Ht=a(60436),jt=function(){function e(){(0,Ot.A)(this,e),(0,Nt.A)(this,"refs",{})}return(0,Yt.A)(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var a=this.getIndex(e,t);-1!==a&&this.refs[e].splice(a,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(zt)}}]),e}();function zt(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function Wt(e,t){return Object.keys(e).reduce((function(a,n){return-1===t.indexOf(n)&&(a[n]=e[n]),a}),{})}var Ut={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},qt=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function Vt(e,t){Object.keys(t).forEach((function(a){e.style[a]=t[a]}))}function Gt(e,t){e.style["".concat(qt,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function Kt(e,t){e.style["".concat(qt,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function Xt(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Qt(e,t,a){return Math.max(e,Math.min(a,t))}function Jt(e){return"px"===e.substr(-2)?parseFloat(e):0}function Zt(e,t){var a=t.displayName||t.name;return a?"".concat(e,"(").concat(a,")"):e}function ea(e,t){var a=e.getBoundingClientRect();return{top:a.top+t.top,left:a.left+t.left}}function ta(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function aa(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var n={left:a.left+e.offsetLeft,top:a.top+e.offsetTop};return e.parentNode===t?n:aa(e.parentNode,t,n)}}function na(e){var t=e.lockOffset,a=e.width,n=e.height,o=t,r=t,i="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);Bt()(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),o=parseFloat(t),r=parseFloat(t),i=l[1]}return Bt()(isFinite(o)&&isFinite(r),"lockOffset value should be a finite. Given %s",t),"%"===i&&(o=o*a/100,r=r*n/100),{x:o,y:r}}function oa(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),a=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return a.test(t[e])}))}(e)?e:oa(e.parentNode):null}var ra={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function ia(e){return null!=e.sortableHandle}var la=function(){function e(t,a){(0,Ot.A)(this,e),this.container=t,this.onScrollCallback=a}return(0,Yt.A)(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,a=e.translate,n=e.minTranslate,o=e.maxTranslate,r=e.width,i=e.height,l={x:0,y:0},s={x:1,y:1},c=this.container,d=c.scrollTop,u=c.scrollLeft,h=c.scrollHeight,p=c.scrollWidth,f=0===d,g=h-d-c.clientHeight==0,m=0===u,v=p-u-c.clientWidth==0;a.y>=o.y-i/2&&!g?(l.y=1,s.y=10*Math.abs((o.y-i/2-a.y)/i)):a.x>=o.x-r/2&&!v?(l.x=1,s.x=10*Math.abs((o.x-r/2-a.x)/r)):a.y<=n.y+i/2&&!f?(l.y=-1,s.y=10*Math.abs((a.y-i/2-n.y)/i)):a.x<=n.x+r/2&&!m&&(l.x=-1,s.x=10*Math.abs((a.x-r/2-n.x)/r)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),sa={axis:R().oneOf(["x","y","xy"]),contentWindow:R().any,disableAutoscroll:R().bool,distance:R().number,getContainer:R().func,getHelperDimensions:R().func,helperClass:R().string,helperContainer:R().oneOfType([R().func,"undefined"==typeof HTMLElement?R().any:R().instanceOf(HTMLElement)]),hideSortableGhost:R().bool,keyboardSortingTransitionDuration:R().number,lockAxis:R().string,lockOffset:R().oneOfType([R().number,R().string,R().arrayOf(R().oneOfType([R().number,R().string]))]),lockToContainerEdges:R().bool,onSortEnd:R().func,onSortMove:R().func,onSortOver:R().func,onSortStart:R().func,pressDelay:R().number,pressThreshold:R().number,keyCodes:R().shape({lift:R().arrayOf(R().number),drop:R().arrayOf(R().number),cancel:R().arrayOf(R().number),up:R().arrayOf(R().number),down:R().arrayOf(R().number)}),shouldCancelStart:R().func,transitionDuration:R().number,updateBeforeSortStart:R().func,useDragHandle:R().bool,useWindowAsScrollContainer:R().bool},ca={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},da={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:ca,shouldCancelStart:function(e){return-1!==[ra.Input,ra.Textarea,ra.Select,ra.Option,ra.Button].indexOf(e.target.tagName)||!!Xt(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},ua=Object.keys(sa),ha=(0,n.createContext)({manager:{}}),pa={index:R().number.isRequired,collection:R().oneOfType([R().number,R().string]),disabled:R().bool},fa=Object.keys(pa),ga=a(72652);const ma={name:R().string.isRequired,label:R().string,description:R().string,placeholder:R().string,addTooltip:R().string,itemGenerator:R().func,keyAccessor:R().func,onChange:R().func,value:R().oneOfType([R().array]),isFloat:R().bool,isInt:R().bool,controlName:R().string.isRequired},va={label:null,description:null,onChange:()=>{},placeholder:(0,s.t)("Empty collection"),itemGenerator:()=>({key:(0,_t.Ak)(11)}),keyAccessor:e=>e.key,value:[],addTooltip:(0,s.t)("Add an item")},ba=function(e){var t,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=t=function(t){function a(){var e,t;(0,Ot.A)(this,a);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=(0,Rt.A)(this,(e=(0,Ft.A)(a)).call.apply(e,[this].concat(r))),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"wrappedInstance",(0,n.createRef)()),t}return(0,It.A)(a,t),(0,Yt.A)(a,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,a=e.disabled,n=e.index,o=(0,Lt.findDOMNode)(this);o.sortableInfo={collection:t,disabled:a,index:n,manager:this.context.manager},this.node=o,this.ref={node:o},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return Bt()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,n.createElement)(e,(0,Mt.A)({ref:t},Wt(this.props,fa)))}}]),a}(n.Component),(0,Nt.A)(t,"displayName",Zt("sortableElement",e)),(0,Nt.A)(t,"contextType",ha),(0,Nt.A)(t,"propTypes",pa),(0,Nt.A)(t,"defaultProps",{collection:0}),a}(dt),ya=function(e){var t,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=t=function(t){function a(e){var t;(0,Ot.A)(this,a),t=(0,Rt.A)(this,(0,Ft.A)(a).call(this,e)),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"state",{}),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleStart",(function(e){var a=t.props,n=a.distance,o=a.shouldCancelStart;if(2!==e.button&&!o(e)){t.touched=!0,t.position=ta(e);var r=Xt(e.target,(function(e){return null!=e.sortableInfo}));if(r&&r.sortableInfo&&t.nodeIsChild(r)&&!t.state.sorting){var i=t.props.useDragHandle,l=r.sortableInfo,s=l.index,c=l.collection;if(l.disabled)return;if(i&&!Xt(e.target,ia))return;t.manager.active={collection:c,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==ra.Anchor||e.preventDefault(),n||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleMove",(function(e){var a=t.props,n=a.distance,o=a.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var r=ta(e),i={x:t.position.x-r.x,y:t.position.y-r.y},l=Math.abs(i.x)+Math.abs(i.y);t.delta=i,n||o&&!(l>=o)?n&&l>=n&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handlePress",(function(e){try{var a=t.manager.getActive(),n=function(){if(a){var n=function(){var a,n,o,c,g=h.sortableInfo.index,m=function(e){var t=window.getComputedStyle(e);return{bottom:Jt(t.marginBottom),left:Jt(t.marginLeft),right:Jt(t.marginRight),top:Jt(t.marginTop)}}(h),v=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:Jt(t.gridColumnGap),y:Jt(t.gridRowGap)}:{x:0,y:0}}(t.container),b=t.scrollContainer.getBoundingClientRect(),y=i({index:g,node:h,collection:p});if(t.node=h,t.margin=m,t.gridGap=v,t.width=y.width,t.height=y.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=h.getBoundingClientRect(),t.containerBoundingRect=b,t.index=g,t.newIndex=g,t.axis={x:r.indexOf("x")>=0,y:r.indexOf("y")>=0},t.offsetEdge=aa(h,t.container),t.initialOffset=ta(f?(0,Tt.A)({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((n="input, textarea, select, canvas, [contenteditable]",o=(a=h).querySelectorAll(n),c=a.cloneNode(!0),(0,Ht.A)(c.querySelectorAll(n)).forEach((function(e,t){"file"!==e.type&&(e.value=o[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===ra.Canvas&&o[t].width>0&&o[t].height>0&&e.getContext("2d").drawImage(o[t],0,0)})),c)),Vt(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-m.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-m.top,"px"),width:"".concat(t.width,"px")}),f&&t.helper.focus(),s&&(t.sortableGhost=h,Vt(h,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},f){var x=u?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,w=x.top,C=x.left,S=x.width,A=w+x.height,k=C+S;t.axis.x&&(t.minTranslate.x=C-t.boundingClientRect.left,t.maxTranslate.x=k-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=w-t.boundingClientRect.top,t.maxTranslate.y=A-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(u?0:b.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(u?t.contentWindow.innerWidth:b.left+b.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(u?0:b.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(u?t.contentWindow.innerHeight:b.top+b.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?e.target:t.contentWindow,f?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Ut.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),Ut.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:g}),d&&d({node:h,index:g,collection:p,isKeySorting:f,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),f&&t.keyMove(0)},o=t.props,r=o.axis,i=o.getHelperDimensions,l=o.helperClass,s=o.hideSortableGhost,c=o.updateBeforeSortStart,d=o.onSortStart,u=o.useWindowAsScrollContainer,h=a.node,p=a.collection,f=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var a=function(t,a){try{var n=(o=h.sortableInfo.index,Promise.resolve(c({collection:p,index:o,node:h,isKeySorting:f},e)).then((function(){})))}catch(e){return a(!0,e)}var o;return n&&n.then?n.then(a.bind(null,!1),a.bind(null,!0)):a(!1,value)}(0,(function(e,a){if(t._awaitingUpdateBeforeSortStart=!1,e)throw a;return a}));if(a&&a.then)return a.then((function(){}))}}();return g&&g.then?g.then(n):n()}}();return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleSortMove",(function(e){var a=t.props.onSortMove;"function"==typeof e.preventDefault&&e.cancelable&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),a&&a(e)})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleSortEnd",(function(e){var a=t.props,n=a.hideSortableGhost,o=a.onSortEnd,r=t.manager,i=r.active.collection,l=r.isKeySorting,s=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Ut.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),Ut.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),n&&t.sortableGhost&&Vt(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,d=s.length;c<d;c++){var u=s[c],h=u.node;u.edgeOffset=null,u.boundingClientRect=null,Gt(h,null),Kt(h,null),u.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof o&&o({collection:i,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:s},e),t.touched=!1})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,a=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(a){var n=(0,Tt.A)({},t.translate),o=0,r=0;return t.axis.x&&(n.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),o=t.translate.x-n.x),t.axis.y&&(n.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),r=t.translate.y-n.y),t.translate=n,Gt(t.helper,t.translate),t.scrollContainer.scrollLeft+=o,void(t.scrollContainer.scrollTop+=r)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleKeyDown",(function(e){var a=e.keyCode,n=t.props,o=n.shouldCancelStart,r=n.keyCodes,i=void 0===r?{}:r,l=(0,Tt.A)({},ca,i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||l.lift.includes(a)&&!o(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),l.lift.includes(a)&&!t.manager.active?t.keyLift(e):l.drop.includes(a)&&t.manager.active?t.keyDrop(e):l.cancel.includes(a)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):l.up.includes(a)?t.keyMove(-1):l.down.includes(a)&&t.keyMove(1))})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"keyLift",(function(e){var a=e.target,n=Xt(a,(function(e){return null!=e.sortableInfo})).sortableInfo,o=n.index,r=n.collection;t.initialFocusedNode=a,t.manager.isKeySorting=!0,t.manager.active={index:o,collection:r},t.handlePress(e)})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"keyMove",(function(e){var a=t.manager.getOrderedRefs(),n=a[a.length-1].node.sortableInfo.index,o=t.newIndex+e,r=t.newIndex;if(!(o<0||o>n)){t.prevIndex=r,t.newIndex=o;var i=function(e,t,a){return e<a&&e>t?e-1:e>a&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=a.find((function(e){return e.node.sortableInfo.index===i})),s=l.node,c=t.containerScrollDelta,d=l.boundingClientRect||ea(s,c),u=l.translate||{x:0,y:0},h=d.top+u.y-c.top,p=d.left+u.x-c.left,f=r<o,g=f&&t.axis.x?s.offsetWidth-t.width:0,m=f&&t.axis.y?s.offsetHeight-t.height:0;t.handleSortMove({pageX:p+g,pageY:h+m,ignoreTransition:0===e})}})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"isValidSortingTarget",(function(e){var a=t.props.useDragHandle,n=e.target,o=Xt(n,(function(e){return null!=e.sortableInfo}));return o&&o.sortableInfo&&!o.sortableInfo.disabled&&(a?ia(n):n.sortableInfo)}));var o=new jt;return function(e){Bt()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=o,t.wrappedInstance=(0,n.createRef)(),t.sortableContextValue={manager:o},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return(0,It.A)(a,t),(0,Yt.A)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,a=this.getContainer();Promise.resolve(a).then((function(a){e.container=a,e.document=e.container.ownerDocument||document;var n=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof n?n():n,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:oa(e.container)||e.container,e.autoScroller=new la(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return Ut[t].forEach((function(a){return e.container.addEventListener(a,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return Ut[t].forEach((function(a){return e.container.removeEventListener(a,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,a=t.lockAxis,n=t.lockOffset,o=t.lockToContainerEdges,r=t.transitionDuration,i=t.keyboardSortingTransitionDuration,l=void 0===i?r:i,s=this.manager.isKeySorting,c=e.ignoreTransition,d=ta(e),u={x:d.x-this.initialOffset.x,y:d.y-this.initialOffset.y};if(u.y-=window.pageYOffset-this.initialWindowScroll.top,u.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=u,o){var h=function(e){var t=e.height,a=e.width,n=e.lockOffset,o=Array.isArray(n)?n:[n,n];Bt()(2===o.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",n);var r=(0,Dt.A)(o,2),i=r[0],l=r[1];return[na({height:t,lockOffset:i,width:a}),na({height:t,lockOffset:l,width:a})]}({height:this.height,lockOffset:n,width:this.width}),p=(0,Dt.A)(h,2),f=p[0],g=p[1],m={x:this.width/2-f.x,y:this.height/2-f.y},v={x:this.width/2-g.x,y:this.height/2-g.y};u.x=Qt(this.minTranslate.x+m.x,this.maxTranslate.x-v.x,u.x),u.y=Qt(this.minTranslate.y+m.y,this.maxTranslate.y-v.y,u.y)}"x"===a?u.y=0:"y"===a&&(u.x=0),s&&l&&!c&&Kt(this.helper,l),Gt(this.helper,u)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,a=e.hideSortableGhost,n=e.onSortOver,o=this.containerScrollDelta,r=this.windowScrollDelta,i=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+o.left,s=this.offsetEdge.top+this.translate.y+o.top,c=this.manager.isKeySorting,d=this.newIndex;this.newIndex=null;for(var u=0,h=i.length;u<h;u++){var p=i[u].node,f=p.sortableInfo.index,g=p.offsetWidth,m=p.offsetHeight,v={height:this.height>m?m/2:this.height/2,width:this.width>g?g/2:this.width/2},b=c&&f>this.index&&f<=d,y=c&&f<this.index&&f>=d,x={x:0,y:0},w=i[u].edgeOffset;w||(w=aa(p,this.container),i[u].edgeOffset=w,c&&(i[u].boundingClientRect=ea(p,o)));var C=u<i.length-1&&i[u+1],S=u>0&&i[u-1];C&&!C.edgeOffset&&(C.edgeOffset=aa(C.node,this.container),c&&(C.boundingClientRect=ea(C.node,o))),f!==this.index?(t&&Kt(p,t),this.axis.x?this.axis.y?y||f<this.index&&(l+r.left-v.width<=w.left&&s+r.top<=w.top+v.height||s+r.top+v.height<=w.top)?(x.x=this.width+this.marginOffset.x,w.left+x.x>this.containerBoundingRect.width-v.width&&C&&(x.x=C.edgeOffset.left-w.left,x.y=C.edgeOffset.top-w.top),null===this.newIndex&&(this.newIndex=f)):(b||f>this.index&&(l+r.left+v.width>=w.left&&s+r.top+v.height>=w.top||s+r.top+v.height>=w.top+m))&&(x.x=-(this.width+this.marginOffset.x),w.left+x.x<this.containerBoundingRect.left+v.width&&S&&(x.x=S.edgeOffset.left-w.left,x.y=S.edgeOffset.top-w.top),this.newIndex=f):b||f>this.index&&l+r.left+v.width>=w.left?(x.x=-(this.width+this.marginOffset.x),this.newIndex=f):(y||f<this.index&&l+r.left<=w.left+v.width)&&(x.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(b||f>this.index&&s+r.top+v.height>=w.top?(x.y=-(this.height+this.marginOffset.y),this.newIndex=f):(y||f<this.index&&s+r.top<=w.top+v.height)&&(x.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),Gt(p,x),i[u].translate=x):a&&(this.sortableGhost=p,Vt(p,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=d);var A=c?this.prevIndex:d;n&&this.newIndex!==A&&n({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:A,isKeySorting:c,nodes:i,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Bt()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,Lt.findDOMNode)(this):e(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,n.createElement)(ha.Provider,{value:this.sortableContextValue},(0,n.createElement)(e,(0,Mt.A)({ref:t},Wt(this.props,ua))))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),a}(n.Component),(0,Nt.A)(t,"displayName",Zt("sortableList",e)),(0,Nt.A)(t,"defaultProps",da),(0,Nt.A)(t,"propTypes",sa),a}(it.B8),xa=function(e){var t,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=t=function(t){function a(){var e,t;(0,Ot.A)(this,a);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=(0,Rt.A)(this,(e=(0,Ft.A)(a)).call.apply(e,[this].concat(r))),(0,Nt.A)((0,Pt.A)((0,Pt.A)(t)),"wrappedInstance",(0,n.createRef)()),t}return(0,It.A)(a,t),(0,Yt.A)(a,[{key:"componentDidMount",value:function(){(0,Lt.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Bt()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,n.createElement)(e,(0,Mt.A)({ref:t},this.props))}}]),a}(n.Component),(0,Nt.A)(t,"displayName",Zt("sortableHandle",e)),a}((()=>(0,Ee.Y)("i",{role:"img","aria-label":"drag",className:"fa fa-bars text-primary",style:{cursor:"ns-resize"}})));var wa={name:"11g6mpt",styles:"justify-content:flex-start"};class Ca extends n.Component{constructor(e){super(e),this.onAdd=this.onAdd.bind(this)}onChange(e,t){const a=[...this.props.value];a[e]={...this.props.value[e],...t},this.props.onChange(a)}onAdd(){this.props.onChange(this.props.value.concat([this.props.itemGenerator()]))}onSortEnd({oldIndex:e,newIndex:t}){var a,n,o;this.props.onChange((n=e,o=t,(a=(a=this.props.value).slice()).splice(o<0?a.length+o:o,0,a.splice(n,1)[0]),a))}removeItem(e){this.props.onChange(this.props.value.filter(((t,a)=>e!==a)))}renderList(){if(0===this.props.value.length)return(0,Ee.Y)("div",{className:"text-muted",children:this.props.placeholder});const e=Dl[this.props.controlName];return(0,Ee.Y)(ya,{useDragHandle:!0,lockAxis:"y",onSortEnd:this.onSortEnd.bind(this),bordered:!0,css:e=>({borderRadius:e.gridUnit}),children:this.props.value.map(((t,a)=>{const{label:n,...o}=this.props;return(0,Ee.FD)(ba,{className:"clearfix",css:wa,index:a,children:[(0,Ee.Y)(xa,{}),(0,Ee.Y)("div",{css:e=>({flex:1,marginLeft:2*e.gridUnit,marginRight:2*e.gridUnit}),children:(0,Ee.Y)(e,{...o,...t,onChange:this.onChange.bind(this,a)})}),(0,Ee.Y)(st.W,{icon:"times",label:"remove-item",tooltip:(0,s.t)("Remove item"),bsStyle:"primary",onClick:this.removeItem.bind(this,a)})]},this.props.keyAccessor(t))}))})}render(){const{theme:e}=this.props;return(0,Ee.FD)("div",{className:"CollectionControl",children:[(0,Ee.FD)(ga.B3,{children:[(0,Ee.Y)(xt.A,{...this.props}),(0,Ee.Y)(ga.XB,{onClick:this.onAdd,children:(0,Ee.Y)(W.A.PlusLarge,{iconSize:"s",iconColor:e.colors.grayscale.light5})})]}),this.renderList()]})}}Ca.propTypes=ma,Ca.defaultProps=va;const Sa=(0,lt.b)(Ca);var Aa=a(77986),ka=a(76968),Ea=a(10044);const _a={onChange:R().func,value:R().object},Ma={position:"absolute",width:"50px",height:"20px",top:"0px",left:"0px",right:"0px",bottom:"0px"},Da=I.I4.div`
  ${({theme:e})=>`\n      width: 50px;\n      height: 20px;\n      position: relative;\n      padding: ${e.gridUnit}px;\n      borderRadius: ${e.borderRadius}px;\n      display: inline-block;\n      cursor: pointer;\n    `}
`,Ta={color:{...Ma,borderRadius:"2px"},checkerboard:{...Ma,background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center'}};class Oa extends n.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e){this.props.onChange(e.rgb)}renderPopover(){const e=(0,ka.A)().get().colors.filter(((e,t)=>t<7));return(0,Ee.Y)("div",{id:"filter-popover",className:"color-popover",children:(0,Ee.Y)(Aa.Xq,{css:P.AH`
            // We need to use important here as these are element level styles
            padding: 0 !important;
            box-shadow: none !important;
          `,color:this.props.value,onChange:this.onChange,presetColors:e})})}render(){const e=this.props.value||{r:0,g:0,b:0,a:0},t={...Ta.color,background:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`};return(0,Ee.FD)("div",{children:[(0,Ee.Y)(xt.A,{...this.props}),(0,Ee.Y)(Ea.A,{trigger:"click",placement:"right",content:this.renderPopover(),children:(0,Ee.FD)(Da,{children:[(0,Ee.Y)("div",{style:Ta.checkerboard}),(0,Ee.Y)("div",{style:t})]})})]})}}Oa.propTypes=_a,Oa.defaultProps={onChange:()=>{}};var Ya=a(76125),Ra=a(85015),Fa=a.n(Ra),Ia=a(6749),Pa=a(67940),Na=a(58999),La=a(78704),$a=a(65256),Ba=a(18301),Ha=a(23805),ja=a.n(Ha);const za=(0,s.t)("Close"),Wa=(0,s.t)("Save as Dataset"),Ua=(0,s.t)("Open in SQL Lab"),qa=e=>{const t=(0,r.W6)();return(0,Ee.FD)("div",{children:[(0,Ee.Y)(Ye.A,{onClick:()=>{null==e||null==e.closeModal||e.closeModal(),null==e||null==e.changeDatasource||e.changeDatasource()},children:Wa}),(0,Ee.Y)(Ye.A,{onClick:({metaKey:a})=>(a=>{const{datasource:n}=e;if(ja()(n)){const{id:e,type:o,sql:r}=n;((e,a,n,o)=>{const r={datasourceKey:`${a}__${n}`,sql:o};e?ge.A.postForm("/sqllab/",r):t.push({pathname:"/sqllab",state:{requestedQuery:r}})})(a,e,o,r)}})(Boolean(a)),children:Ua}),(0,Ee.Y)(Ye.A,{buttonStyle:"primary",onClick:()=>{null==e||null==e.closeModal||e.closeModal()},children:za})]})};var Va=a(91643),Ga=a(12066),Ka=a(71519);const Xa={actions:R().object.isRequired,onChange:R().func,value:R().string,datasource:R().object.isRequired,form_data:R().object.isRequired,isEditable:R().bool,onDatasourceSave:R().func},Qa=I.I4.div`
  .data-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;
    padding-right: ${({theme:e})=>2*e.gridUnit}px;
  }
  .error-alert {
    margin: ${({theme:e})=>2*e.gridUnit}px;
  }
  .ant-dropdown-trigger {
    margin-left: ${({theme:e})=>2*e.gridUnit}px;
    box-shadow: none;
    &:active {
      box-shadow: none;
    }
  }
  .btn-group .open .dropdown-toggle {
    box-shadow: none;
    &.button-default {
      background: none;
    }
  }
  i.angle {
    color: ${({theme:e})=>e.colors.primary.base};
  }
  svg.datasource-modal-trigger {
    color: ${({theme:e})=>e.colors.primary.base};
    cursor: pointer;
  }
  .title-select {
    flex: 1 1 100%;
    display: inline-block;
    background-color: ${({theme:e})=>e.colors.grayscale.light3};
    padding: ${({theme:e})=>2*e.gridUnit}px;
    border-radius: ${({theme:e})=>e.borderRadius}px;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  .datasource-svg {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    flex: none;
  }
  span[aria-label='dataset-physical'] {
    color: ${({theme:e})=>e.colors.grayscale.base};
  }
  span[aria-label='more-vert'] {
    color: ${({theme:e})=>e.colors.primary.base};
  }
`,Ja="change_dataset",Za="view_in_sql_lab",en="edit_dataset",tn="save_as_dataset",an={[pe.cT.Query]:(0,Ee.Y)(W.A.ConsoleSqlOutlined,{className:"datasource-svg"}),[pe.cT.Table]:(0,Ee.Y)(W.A.DatasetPhysical,{className:"datasource-svg"})},nn=(e,t)=>(null==e?void 0:e.length)>25?(0,Ee.Y)(z.m,{title:t,children:(0,Ee.Y)("span",{className:"title-select",children:e})}):(0,Ee.Y)("span",{title:t,className:"title-select",children:e}),on=e=>{e.metaKey?e.preventDefault():e.stopPropagation()};class rn extends n.PureComponent{constructor(e){super(e),this.onDatasourceSave=e=>{var t,a,n;this.props.actions.changeDatasource(e);const{temporalColumns:o,defaultTemporalColumn:r}=(0,Je.W)(e),{columns:i}=e,l=null==(t=this.props.form_data)?void 0:t.granularity_sqla,s=null==(a=i.find((({column_name:e})=>e===l)))?void 0:a.is_dttm,c=null==(n=i.find((({column_name:e})=>e===r)))?void 0:n.is_dttm;if("table"===e.type&&!s){const e=c?r:null==o?void 0:o[0];this.props.actions.setControlValue("granularity_sqla",e||null)}this.props.onDatasourceSave&&this.props.onDatasourceSave(e)},this.toggleShowDatasource=()=>{this.setState((({showDatasource:e})=>({showDatasource:!e})))},this.toggleChangeDatasourceModal=()=>{this.setState((({showChangeDatasourceModal:e})=>({showChangeDatasourceModal:!e})))},this.toggleEditDatasourceModal=()=>{this.setState((({showEditDatasourceModal:e})=>({showEditDatasourceModal:!e})))},this.toggleSaveDatasetModal=()=>{this.setState((({showSaveDatasetModal:e})=>({showSaveDatasetModal:!e})))},this.handleMenuItemClick=({key:e})=>{switch(e){case Ja:this.toggleChangeDatasourceModal();break;case en:this.toggleEditDatasourceModal();break;case Za:{const{datasource:e}=this.props,t={datasourceKey:`${e.id}__${e.type}`,sql:e.sql};ge.A.postForm("/sqllab/",{form_data:(0,Ga.J)(t)})}break;case tn:this.toggleSaveDatasetModal()}},this.state={showEditDatasourceModal:!1,showChangeDatasourceModal:!1,showSaveDatasetModal:!1}}render(){var e,t;const{showChangeDatasourceModal:a,showEditDatasourceModal:n,showSaveDatasetModal:o}=this.state,{datasource:r,onChange:i,theme:l}=this.props,c=!(null!=r&&r.id);let d=!1;if(c){const e=(0,p.P3)(f.vX.datasourceId),t=(0,p.P3)(f.vX.sliceId);e||t||(d=!0)}const{user:u}=this.props,h=(null==(e=r.owners)?void 0:e.map((e=>e.id||e.value)).includes(u.userId))||(0,$a.N6)(u),g=(0,$a.ZU)(u,"SQL Lab","menu_access"),m=(0,s.t)("Edit dataset"),v={datasourceKey:`${r.id}__${r.type}`,sql:r.sql},b=(0,Ee.FD)(Ia.W1,{onClick:this.handleMenuItemClick,children:[this.props.isEditable&&!c&&(0,Ee.Y)(Ia.W1.Item,{disabled:!h,children:h?m:(0,Ee.Y)(z.m,{title:(0,s.t)("You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access."),children:m})},en),(0,Ee.Y)(Ia.W1.Item,{children:(0,s.t)("Swap dataset")},Ja),!c&&g&&(0,Ee.Y)(Ia.W1.Item,{children:(0,Ee.Y)(Ka.N_,{to:{pathname:"/sqllab",state:{requestedQuery:v}},onClick:on,children:(0,s.t)("View in SQL Lab")})},Za)]}),y=(0,Ee.FD)(Ia.W1,{onClick:this.handleMenuItemClick,children:[(0,Ee.Y)(Ia.W1.Item,{children:(0,Ee.Y)(Ba.A,{triggerNode:(0,Ee.Y)("span",{children:(0,s.t)("Query preview")}),modalTitle:(0,s.t)("Query preview"),modalBody:(0,Ee.Y)(Va.A,{sql:(null==r?void 0:r.sql)||(null==r?void 0:r.select_star)||""}),modalFooter:(0,Ee.Y)(qa,{changeDatasource:this.toggleSaveDatasetModal,datasource:r}),draggable:!1,resizable:!1,responsive:!0})},"query_preview"),g&&(0,Ee.Y)(Ia.W1.Item,{children:(0,Ee.Y)(Ka.N_,{to:{pathname:"/sqllab",state:{requestedQuery:v}},onClick:on,children:(0,s.t)("View in SQL Lab")})},Za),(0,Ee.Y)(Ia.W1.Item,{children:(0,s.t)("Save as dataset")},tn)]}),{health_check_message:x}=r;let w;if(null!=r&&r.extra)if(Fa()(r.extra))try{w=JSON.parse(r.extra)}catch{}else w=r.extra;const C=c?(0,s.t)("Missing dataset"):(e=>"query"===(null==e?void 0:e.type)?null==e?void 0:e.sql:(null==e?void 0:e.name)||"")(r),S=C;return(0,Ee.FD)(Qa,{className:"DatasourceControl",children:[(0,Ee.FD)("div",{className:"data-container",children:[an[null==r?void 0:r.type],nn(C,S),x&&(0,Ee.Y)(z.m,{title:x,children:(0,Ee.Y)(W.A.AlertSolid,{iconColor:l.colors.warning.base})}),(null==(t=w)?void 0:t.warning_markdown)&&(0,Ee.Y)(La.A,{warningMarkdown:w.warning_markdown}),(0,Ee.Y)(it.rM,{overlay:r.type===pe.cT.Query?y:b,trigger:["click"],children:(0,Ee.Y)(W.A.MoreVert,{className:"datasource-modal-trigger"})})]}),c&&d&&(0,Ee.Y)("div",{className:"error-alert",children:(0,Ee.Y)(Na.A,{level:"warning",title:(0,s.t)("Missing URL parameters"),source:"explore",subtitle:(0,Ee.Y)(Ee.FK,{children:(0,Ee.Y)("p",{children:(0,s.t)("The URL is missing the dataset_id or slice_id parameters.")})})})}),c&&!d&&(0,Ee.Y)("div",{className:"error-alert",children:(0,Ee.Y)(Na.A,{level:"warning",title:(0,s.t)("Missing dataset"),source:"explore",subtitle:(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("p",{children:(0,s.t)("The dataset linked to this chart may have been deleted.")}),(0,Ee.Y)("p",{children:(0,Ee.Y)(Ye.A,{buttonStyle:"primary",onClick:()=>this.handleMenuItemClick({key:Ja}),children:(0,s.t)("Swap dataset")})})]})})}),n&&(0,Ee.Y)(Pa.X,{datasource:r,show:n,onDatasourceSave:this.onDatasourceSave,onHide:this.toggleEditDatasourceModal}),a&&(0,Ee.Y)(Pa.D,{onDatasourceSave:this.onDatasourceSave,onHide:this.toggleChangeDatasourceModal,show:a,onChange:i}),o&&(0,Ee.Y)(be.D,{visible:o,onHide:this.toggleSaveDatasetModal,buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:(0,ye.l)(r),openWindow:!1,formData:this.props.form_data})]})}}rn.propTypes=Xa,rn.defaultProps={onChange:()=>{},onDatasourceSave:null,value:null,isEditable:!0};const ln=(0,lt.b)(rn);var sn=a(39074),cn=a(4783),dn=a(74792),un=a(28254),hn=a(17093),pn=a(32291);const fn=I.I4.span`
  display: inline-block;
  padding: 2px 0;
`,gn=(0,I.I4)(yt.pd)`
  border-radius: ${({theme:e})=>e.borderRadius};
  height: 26px;
  padding-left: ${({theme:e})=>2.5*e.gridUnit}px;
`,mn=({title:e,isEditDisabled:t,onChange:a})=>{const[o,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),c=(0,s.t)("My metric"),d=(0,n.useCallback)((()=>r(!0)),[]),u=(0,n.useCallback)((()=>r(!1)),[]),h=(0,n.useCallback)((()=>l(!0)),[]),p=(0,n.useCallback)((()=>l(!1)),[]),f=(0,n.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),p())}),[p]),g=(0,n.useCallback)((e=>{""===e.target.value&&a(e),p()}),[a,p]);return t?(0,Ee.Y)("span",{children:(null==e?void 0:e.label)||c}):i?(0,Ee.Y)(gn,{type:"text",placeholder:null==e?void 0:e.label,value:null!=e&&e.hasCustomLabel?e.label:"",autoFocus:!0,onChange:a,onBlur:g,onKeyPress:f}):(0,Ee.Y)(z.m,{placement:"top",title:(0,s.t)("Click to edit label"),children:(0,Ee.FD)("span",{className:"AdhocMetricEditPopoverTitle inline-editable",onMouseOver:d,onMouseOut:u,onClick:h,onBlur:p,role:"button",tabIndex:0,children:[(0,Ee.Y)(fn,{children:(null==e?void 0:e.label)||c})," ",(0,Ee.Y)("i",{className:"fa fa-pencil",style:{color:o?"black":"grey"}})]})})};var vn=a(16238),bn=a(87196),yn=a(40563),xn=a(24976),wn=a(28274),Cn=a(15151),Sn=a(84080),An=a(92013);const kn={onChange:R().func.isRequired,onClose:R().func.isRequired,onResize:R().func.isRequired,getCurrentTab:R().func,getCurrentLabel:R().func,adhocMetric:R().instanceOf(hn.A).isRequired,columns:R().arrayOf(dn.A),savedMetricsOptions:R().arrayOf(pn.A),savedMetric:pn.A,datasource:R().object,isNewMetric:R().bool,isLabelModified:R().bool},En={columns:[],getCurrentTab:Cn.fZ,isNewMetric:!1},_n=(0,I.I4)(it.l6)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,Mn="SAVED";class Dn extends n.PureComponent{constructor(e){super(e),this.defaultActiveTabKey=this.getDefaultTab(),this.onSave=this.onSave.bind(this),this.onResetStateAndClose=this.onResetStateAndClose.bind(this),this.onColumnChange=this.onColumnChange.bind(this),this.onAggregateChange=this.onAggregateChange.bind(this),this.onSavedMetricChange=this.onSavedMetricChange.bind(this),this.onSqlExpressionChange=this.onSqlExpressionChange.bind(this),this.onDragDown=this.onDragDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTabChange=this.onTabChange.bind(this),this.handleAceEditorRef=this.handleAceEditorRef.bind(this),this.refreshAceEditor=this.refreshAceEditor.bind(this),this.getDefaultTab=this.getDefaultTab.bind(this),this.state={adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric,width:q._R,height:q.Z_},document.addEventListener("mouseup",this.onMouseUp)}componentDidMount(){this.props.getCurrentTab(this.defaultActiveTabKey)}componentDidUpdate(e,t){var a,n,o,r,i,l,s,c,d,u,h,p,f;(null==(a=t.adhocMetric)?void 0:a.sqlExpression)===(null==(n=this.state.adhocMetric)?void 0:n.sqlExpression)&&(null==(o=t.adhocMetric)?void 0:o.aggregate)===(null==(r=this.state.adhocMetric)?void 0:r.aggregate)&&(null==(i=t.adhocMetric)||null==(l=i.column)?void 0:l.column_name)===(null==(s=this.state.adhocMetric)||null==(c=s.column)?void 0:c.column_name)&&(null==(d=t.savedMetric)?void 0:d.metric_name)===(null==(u=this.state.savedMetric)?void 0:u.metric_name)||this.props.getCurrentLabel({savedMetricLabel:(null==(h=this.state.savedMetric)?void 0:h.verbose_name)||(null==(p=this.state.savedMetric)?void 0:p.metric_name),adhocMetricLabel:null==(f=this.state.adhocMetric)?void 0:f.getDefaultLabel()})}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}getDefaultTab(){const{adhocMetric:e,savedMetric:t,savedMetricsOptions:a,isNewMetric:n}=this.props;return(0,i.A)(e.column)||(0,i.A)(e.sqlExpression)?e.expressionType:(n||t.metric_name)&&Array.isArray(a)&&a.length>0?Mn:e.expressionType}onSave(){var e;const{adhocMetric:t,savedMetric:a}=this.state,n=null!=a&&a.metric_name?a:t,o=null!=(e=this.props.savedMetric)&&e.metric_name?this.props.savedMetric:this.props.adhocMetric;this.props.onChange({...n},o),this.props.onClose()}onResetStateAndClose(){this.setState({adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric},this.props.onClose)}onColumnChange(e){const t=this.props.columns.find((t=>t.column_name===e));this.setState((e=>({adhocMetric:e.adhocMetric.duplicateWith({column:t,expressionType:hn.t.SIMPLE}),savedMetric:void 0})))}onAggregateChange(e){this.setState((t=>({adhocMetric:t.adhocMetric.duplicateWith({aggregate:e,expressionType:hn.t.SIMPLE}),savedMetric:void 0})))}onSavedMetricChange(e){const t=this.props.savedMetricsOptions.find((t=>t.metric_name===e));this.setState((e=>({savedMetric:t,adhocMetric:e.adhocMetric.duplicateWith({column:void 0,aggregate:void 0,sqlExpression:void 0,expressionType:hn.t.SIMPLE})})))}onSqlExpressionChange(e){this.setState((t=>({adhocMetric:t.adhocMetric.duplicateWith({sqlExpression:e,expressionType:hn.t.SQL}),savedMetric:void 0})))}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),q._R),height:Math.max(this.dragStartHeight+(e.clientY-this.dragStartY),q.Z_)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}onTabChange(e){this.refreshAceEditor(),this.props.getCurrentTab(e)}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}refreshAceEditor(){setTimeout((()=>{var e;this.aceEditorRef&&(null==(e=this.aceEditorRef.editor)||null==e.resize||e.resize())}),0)}renderColumnOption(e){const t={...e};return t.metric_name&&!t.verbose_name&&(t.verbose_name=t.metric_name),(0,Ee.Y)(Sn.V,{column:t,showType:!0})}renderMetricOption(e){return(0,Ee.Y)(Sn.b,{metric:e,showType:!0})}render(){var e;const{adhocMetric:t,savedMetric:a,columns:n,savedMetricsOptions:o,onChange:r,onClose:i,onResize:l,datasource:c,isNewMetric:d,isLabelModified:u,...h}=this.props,{adhocMetric:p,savedMetric:f}=this.state,g=wn.A.concat((0,An.r)(n)),m=p.column&&p.column.column_name||p.inferSqlExpressionColumn(),v={ariaLabel:(0,s.t)("Select column"),placeholder:(0,s.t)("%s column(s)",n.length),value:m,onChange:this.onColumnChange,allowClear:!0,autoFocus:!m},b={ariaLabel:(0,s.t)("Select aggregate options"),placeholder:(0,s.t)("%s aggregates(s)",q.K8.length),value:p.aggregate||p.inferSqlExpressionAggregate(),onChange:this.onAggregateChange,allowClear:!0,autoFocus:!!m},y={ariaLabel:(0,s.t)("Select saved metrics"),placeholder:(0,s.t)("%s saved metric(s)",null!=(e=null==o?void 0:o.length)?e:0),value:null==f?void 0:f.metric_name,onChange:this.onSavedMetricChange,allowClear:!0,autoFocus:!0},x=p.isValid()||(null==f?void 0:f.metric_name),w=u||d||!p.equals(t)||!(void 0===(null==f?void 0:f.metric_name)&&void 0===(null==a?void 0:a.metric_name))&&(null==f?void 0:f.metric_name)!==(null==a?void 0:a.metric_name);let C={};if(null!=c&&c.extra)try{C=JSON.parse(c.extra)}catch{}return(0,Ee.FD)(yn.lV,{layout:"vertical",id:"metrics-edit-popover",...h,children:[(0,Ee.FD)(tt.Ay,{id:"adhoc-metric-edit-tabs",defaultActiveKey:this.defaultActiveTabKey,className:"adhoc-metric-edit-tabs",style:{height:this.state.height,width:this.state.width},onChange:this.onTabChange,allowOverflow:!0,children:[(0,Ee.Y)(tt.Ay.TabPane,{tab:(0,s.t)("Saved"),children:(0,fe.A)(o).length>0?(0,Ee.Y)(yn.eI,{label:(0,s.t)("Saved metric"),children:(0,Ee.Y)(_n,{options:(0,fe.A)(o).map((e=>({value:e.metric_name,label:e.metric_name,customLabel:this.renderMetricOption(e),key:e.id}))),...y})}):c.type===pe.cT.Table?(0,Ee.Y)(bn.u7,{image:"empty.svg",title:(0,s.t)("No saved metrics found"),description:(0,s.t)('Add metrics to dataset in "Edit datasource" modal')}):(0,Ee.Y)(bn.u7,{image:"empty.svg",title:(0,s.t)("No saved metrics found"),description:(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("span",{tabIndex:0,role:"button",onClick:()=>{this.props.handleDatasetModal(!0),this.props.onClose()},children:(0,s.t)("Create a dataset")}),(0,s.t)(" to add metrics")]})})},Mn),(0,Ee.FD)(tt.Ay.TabPane,{tab:C.disallow_adhoc_metrics?(0,Ee.Y)(z.m,{title:(0,s.t)("Simple ad-hoc metrics are not enabled for this dataset"),children:(0,s.t)("Simple")}):(0,s.t)("Simple"),disabled:C.disallow_adhoc_metrics,children:[(0,Ee.Y)(yn.eI,{label:(0,s.t)("column"),children:(0,Ee.Y)(it.l6,{options:n.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,key:e.id,customLabel:this.renderColumnOption(e)}))),...v})}),(0,Ee.Y)(yn.eI,{label:(0,s.t)("aggregate"),children:(0,Ee.Y)(it.l6,{options:q.K8.map((e=>({value:e,label:e,key:e}))),...b})})]},hn.t.SIMPLE),(0,Ee.Y)(tt.Ay.TabPane,{tab:C.disallow_adhoc_metrics?(0,Ee.Y)(z.m,{title:(0,s.t)("Custom SQL ad-hoc metrics are not enabled for this dataset"),children:(0,s.t)("Custom SQL")}):(0,s.t)("Custom SQL"),disabled:C.disallow_adhoc_metrics,children:(0,Ee.Y)(xn.YU,{showLoadingForImport:!0,ref:this.handleAceEditorRef,keywords:g,height:this.state.height-80+"px",onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:p.sqlExpression||p.translateToSql({transformCountDistinct:!0}),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0})},hn.t.SQL)]}),(0,Ee.FD)("div",{children:[(0,Ee.Y)(Ye.A,{buttonSize:"small",onClick:this.onResetStateAndClose,cta:!0,children:(0,s.t)("Close")}),(0,Ee.Y)(Ye.A,{disabled:!x||!w,buttonStyle:"primary",buttonSize:"small",onClick:this.onSave,cta:!0,children:(0,s.t)("Save")}),(0,Ee.Y)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})]})]})}}Dn.propTypes=kn,Dn.defaultProps=En;class Tn extends n.PureComponent{constructor(e){super(e),this.onPopoverResize=this.onPopoverResize.bind(this),this.onLabelChange=this.onLabelChange.bind(this),this.closePopover=this.closePopover.bind(this),this.togglePopover=this.togglePopover.bind(this),this.getCurrentTab=this.getCurrentTab.bind(this),this.getCurrentLabel=this.getCurrentLabel.bind(this),this.onChange=this.onChange.bind(this),this.handleDatasetModal=this.handleDatasetModal.bind(this),this.state={adhocMetric:e.adhocMetric,popoverVisible:!1,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1,isTitleEditDisabled:!1,showSaveDatasetModal:!1}}static getDerivedStateFromProps(e,t){return t.adhocMetric.optionName!==e.adhocMetric.optionName?{adhocMetric:e.adhocMetric,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1}:{adhocMetric:e.adhocMetric}}onLabelChange(e){var t;const{verbose_name:a,metric_name:n}=this.props.savedMetric,o=null==(t=this.props.adhocMetric)?void 0:t.getDefaultLabel(),r=e.target.value;this.setState((e=>({title:{label:r||e.currentLabel||a||n||o,hasCustomLabel:!!r},labelModified:!0})))}onPopoverResize(){this.forceUpdate()}handleDatasetModal(e){this.setState({showSaveDatasetModal:e})}closePopover(){this.togglePopover(!1),this.setState({labelModified:!1})}togglePopover(e){this.setState({popoverVisible:e})}getCurrentTab(e){this.setState({isTitleEditDisabled:e===Mn})}getCurrentLabel({savedMetricLabel:e,adhocMetricLabel:t}){const a=e||t;this.setState({currentLabel:a,labelModified:!0}),!e&&this.state.title.hasCustomLabel||this.setState({title:{label:a,hasCustomLabel:!1}})}onChange(e,t){this.props.onMetricEdit({...e,...this.state.title},t)}render(){const{adhocMetric:e,savedMetric:t,columns:a,savedMetricsOptions:n,datasource:o,isControlledComponent:r}=this.props,{verbose_name:i,metric_name:l}=t,{hasCustomLabel:c,label:d}=e,u=c?d:e.getDefaultLabel(),h=this.state.labelModified?this.state.title:{label:i||l||u,hasCustomLabel:c},{visible:p,togglePopover:f,closePopover:g}=r?{visible:this.props.visible,togglePopover:this.props.togglePopover,closePopover:this.props.closePopover}:{visible:this.state.popoverVisible,togglePopover:this.togglePopover,closePopover:this.closePopover},m=(0,Ee.Y)(vn.y,{children:(0,Ee.Y)(Dn,{adhocMetric:e,columns:a,savedMetricsOptions:n,savedMetric:t,datasource:o,handleDatasetModal:this.handleDatasetModal,onResize:this.onPopoverResize,onClose:g,onChange:this.onChange,getCurrentTab:this.getCurrentTab,getCurrentLabel:this.getCurrentLabel,isNewMetric:this.props.isNew,isLabelModified:this.state.labelModified&&u!==this.state.title.label})}),v=(0,Ee.Y)(mn,{title:h,onChange:this.onLabelChange,isEditDisabled:this.state.isTitleEditDisabled});return(0,Ee.FD)(Ee.FK,{children:[this.state.showSaveDatasetModal&&(0,Ee.Y)(be.D,{visible:this.state.showSaveDatasetModal,onHide:()=>this.handleDatasetModal(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:o}),(0,Ee.Y)(ut.A,{placement:"right",trigger:"click",content:m,defaultVisible:p,visible:p,onVisibleChange:f,title:v,destroyTooltipOnHide:!0,children:this.props.children})]})}}const On=Tn,Yn={adhocMetric:R().instanceOf(hn.A),onMetricEdit:R().func.isRequired,onRemoveMetric:R().func,columns:R().arrayOf(dn.A),savedMetricsOptions:R().arrayOf(pn.A),savedMetric:pn.A,datasource:R().object,onMoveLabel:R().func,onDropLabel:R().func,index:R().number,type:R().string,multi:R().bool,datasourceWarningMessage:R().string};class Rn extends n.PureComponent{constructor(e){super(e),this.onRemoveMetric=this.onRemoveMetric.bind(this)}onRemoveMetric(e){null==e||e.stopPropagation(),this.props.onRemoveMetric(this.props.index)}render(){const{adhocMetric:e,onMetricEdit:t,columns:a,savedMetricsOptions:n,savedMetric:o,datasource:r,onMoveLabel:i,onDropLabel:l,index:s,type:c,multi:d,datasourceWarningMessage:u}=this.props;return(0,Ee.Y)(On,{adhocMetric:e,onMetricEdit:t,columns:a,savedMetricsOptions:n,savedMetric:o,datasource:r,children:(0,Ee.Y)(ga.Px,{savedMetric:o,adhocMetric:e,label:e.label,onRemove:this.onRemoveMetric,onMoveLabel:i,onDropLabel:l,index:s,type:null!=c?c:un.S.AdhocMetricOption,withCaret:!0,isFunction:!0,multi:d,datasourceWarningMessage:u})})}}const Fn=Rn;Rn.propTypes=Yn;const In={option:R().oneOfType([R().object,R().string]).isRequired,index:R().number.isRequired,onMetricEdit:R().func,onRemoveMetric:R().func,onMoveLabel:R().func,onDropLabel:R().func,columns:R().arrayOf(dn.A),savedMetrics:R().arrayOf(pn.A),savedMetricsOptions:R().arrayOf(pn.A),multi:R().bool,datasource:R().object,datasourceWarningMessage:R().string};function Pn({option:e,onMetricEdit:t,onRemoveMetric:a,columns:n,savedMetrics:o,savedMetricsOptions:r,datasource:i,onMoveLabel:l,onDropLabel:s,index:c,type:d,multi:u,datasourceWarningMessage:h}){let p;var f;if("string"==typeof e?(f=e,p=o.find((e=>e.metric_name===f))):e.metric_name&&(p=e),e instanceof hn.A||p){var g;const o={onMetricEdit:t,onRemoveMetric:a,columns:n,savedMetricsOptions:r,datasource:i,adhocMetric:e instanceof hn.A?e:new hn.A({}),onMoveLabel:l,onDropLabel:s,index:c,savedMetric:null!=(g=p)?g:{},type:d,multi:u,datasourceWarningMessage:h};return(0,Ee.Y)(Fn,{...o})}return null}Pn.propTypes=In;var Nn=a(8901);const Ln={name:R().string.isRequired,onChange:R().func,value:R().oneOfType([R().arrayOf(R().oneOfType([R().string,Nn.A])),R().oneOfType([R().string,Nn.A])]),columns:R().arrayOf(dn.A),savedMetrics:R().arrayOf(pn.A),isLoading:R().bool,multi:R().bool,clearable:R().bool,datasource:R().object};function $n(e,t,a){var n;return null!=(n=null==e?void 0:e.filter((e=>Array.isArray(t)?!t.includes(e.metric_name)||e.metric_name===a:e)))?n:[]}function Bn(e){return e&&!(e instanceof hn.A)&&e.expressionType}function Hn(e){return e?Array.isArray(e)?e.map((e=>Bn(e)?new hn.A(e):e)):Bn(e)?[new hn.A(e)]:[e]:[]}const jn={metric_name:"",expression:""},zn=({onChange:e,multi:t,value:a,columns:o,savedMetrics:r,datasource:i,...l})=>{const[c,d]=(0,n.useState)(Hn(a)),u=(0,I.DP)(),h=(0,L.Z)(o),p=(0,L.Z)(r),f=(0,n.useCallback)((a=>{if(null===a)return void e(null);const n=(0,fe.A)(a).map((e=>e.metric_name?e.metric_name:e)).filter((e=>e));e(t?n:n[0])}),[t,e]),g=(0,n.useCallback)((e=>{const t=[...c,e];d(t),f(t)}),[f,c]),m=(0,n.useCallback)(((e,t)=>{const a=c.map((a=>a!==t.metric_name&&void 0===a.optionName||a.optionName!==t.optionName?a:e));d(a),f(a)}),[f,c]),v=(0,n.useCallback)((e=>{if(!Array.isArray(c))return;const t=[...c];t.splice(e,1),d(t),f(t)}),[f,c]),b=(0,n.useCallback)(((e,t)=>{const a=[...c];[a[t],a[e]]=[a[e],a[t]],d(a)}),[c]),y=(0,n.useCallback)((()=>!t&&c.length>0),[t,c.length]),x=(0,n.useMemo)((()=>$n(r,a,null)),[a,r]),w=(0,n.useMemo)((()=>new hn.A({})),[c]),C=(0,n.useCallback)((e=>y()?e:(0,Ee.Y)(On,{adhocMetric:w,onMetricEdit:g,columns:o,savedMetricsOptions:x,savedMetric:jn,datasource:i,isNew:!0,children:e})),[o,i,y,w,g,x]);(0,n.useEffect)((()=>{if(a&&(!D()(h,o)||!D()(p,r))){const e=((e,t,a)=>(0,fe.A)(e).filter((e=>"string"==typeof e||e.metric_name?null==a?void 0:a.some((t=>t.metric_name===e||t.metric_name===e.metric_name)):null==t?void 0:t.some((t=>!e.column||e.column.column_name===t.column_name)))))(a,o,r);D()(e,a)||f(e)}}),[o,f,r]),(0,n.useEffect)((()=>{d(Hn(a))}),[a]);const S=(0,n.useCallback)((()=>f(c)),[f,c]),A=(0,n.useCallback)(((e,a)=>(0,Ee.Y)(Pn,{index:a,option:e,onMetricEdit:m,onRemoveMetric:v,columns:o,datasource:i,savedMetrics:r,savedMetricsOptions:$n(r,c,null==c?void 0:c[a]),onMoveLabel:b,onDropLabel:S,multi:t},a)),[o,i,b,t,S,m,v,r,c]);return(0,Ee.FD)("div",{className:"metrics-select",children:[(0,Ee.FD)(ga.B3,{children:[(0,Ee.Y)(xt.A,{...l}),C((0,Ee.Y)(ga.XB,{disabled:y(),children:(0,Ee.Y)(W.A.PlusLarge,{iconSize:"s",iconColor:u.colors.grayscale.light5})}))]}),(0,Ee.Y)(ga.p6,{children:c.length>0?c.map(((e,t)=>A(e,t))):C((0,Ee.FD)(ga.JG,{children:[(0,Ee.Y)(W.A.PlusSmall,{iconColor:u.colors.grayscale.light1}),(0,s.t)("Add metric")]}))})]})};zn.propTypes=Ln,zn.defaultProps={onChange:()=>{},clearable:!0,savedMetrics:[],columns:[]};const Wn=zn;var Un=a(83780);const qn="fix",Vn="metric",Gn={onChange:R().func,value:R().object,isFloat:R().bool,datasource:R().object.isRequired,default:R().shape({type:R().oneOf(["fix","metric"]),value:R().oneOfType([R().string,R().number])})},Kn={onChange:()=>{},default:{type:qn,value:5}};class Xn extends n.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.setType=this.setType.bind(this),this.setFixedValue=this.setFixedValue.bind(this),this.setMetric=this.setMetric.bind(this);const t=(e.value?e.value.type:e.default.type)||qn,a=(e.value?e.value.value:e.default.value)||"100";this.state={type:t,fixedValue:t===qn?a:"",metricValue:t===Vn?a:null}}onChange(){this.props.onChange({type:this.state.type,value:this.state.type===qn?this.state.fixedValue:this.state.metricValue})}setType(e){this.setState({type:e},this.onChange)}setFixedValue(e){this.setState({fixedValue:e},this.onChange)}setMetric(e){this.setState({metricValue:e},this.onChange)}render(){const e=(this.props.value||this.props.default).type||qn,t=this.props.datasource?this.props.datasource.columns:null,a=this.props.datasource?this.props.datasource.metrics:null;return(0,Ee.FD)("div",{children:[(0,Ee.Y)(xt.A,{...this.props}),(0,Ee.Y)(et.A,{ghost:!0,css:e=>(0,P.AH)("&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px ",2*e.gridUnit,"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:",2*e.gridUnit,"px;}}",""),children:(0,Ee.Y)(et.A.Panel,{showArrow:!1,header:(0,Ee.FD)(Se.A,{children:[this.state.type===qn&&(0,Ee.Y)("span",{children:this.state.fixedValue}),this.state.type===Vn&&(0,Ee.FD)("span",{children:[(0,Ee.FD)("span",{children:[(0,s.t)("metric"),": "]}),(0,Ee.Y)("strong",{children:this.state.metricValue?this.state.metricValue.label:null})]})]}),children:(0,Ee.FD)("div",{className:"well",children:[(0,Ee.Y)(Un.A,{title:(0,s.t)("Fixed"),isSelected:e===qn,onSelect:()=>{this.setType(qn)},children:(0,Ee.Y)(cn.A,{isFloat:!0,onChange:this.setFixedValue,onFocus:()=>{this.setType(qn)},value:this.state.fixedValue})}),(0,Ee.Y)(Un.A,{title:(0,s.t)("Based on a metric"),isSelected:e===Vn,onSelect:()=>{this.setType(Vn)},children:(0,Ee.Y)(Wn,{name:"metric",columns:t,savedMetrics:a,multi:!1,onFocus:()=>{this.setType(Vn)},onChange:this.setMetric,value:this.state.metricValue,datasource:this.props.datasource})})]})})})]})}}function Qn(e){return void 0!==e.value}Xn.propTypes=Gn,Xn.defaultProps=Kn;const Jn=(0,ce.Ay)((({addDangerToast:e,allowClear:t=!0,ariaLabel:a,dataEndpoint:o,multi:r=!0,mutator:i,onChange:l,placeholder:d,value:u,...h})=>{const[p,f]=(0,n.useState)([]);return(0,n.useEffect)((()=>{ge.A.get({endpoint:o}).then((e=>{const t=i?i(e.json):e.json.result;f(t)})).catch((t=>(0,c.h4)(t).then((t=>{const{error:a}=t;e((0,s.t)("Error while fetching data: %s",a))}))))}),[e,o,i]),(0,Ee.Y)(it.l6,{allowClear:t,ariaLabel:a||(0,s.t)("Select ..."),value:(()=>{const e=u||(void 0!==h.default?h.default:void 0);if(null!==e||p.find((e=>null===e.value)))return e})(),header:(0,Ee.Y)(xt.A,{...h}),mode:r?"multiple":"single",onChange:e=>{let t=e;Array.isArray(e)&&(t=e.map((e=>Qn(e)?e.value:e))),Qn(e)&&(t=e.value),l(t)},options:p,placeholder:d})}));var Zn=a(57701),eo=a(89379),to=a(82284),ao=a(12533),no=a(43210),oo=a(68210),ro=a(80045);function io(e,t,a){return(e-t)/(a-t)}function lo(e,t,a,n){var o=io(t,a,n),r={};switch(e){case"rtl":r.right="".concat(100*o,"%"),r.transform="translateX(50%)";break;case"btt":r.bottom="".concat(100*o,"%"),r.transform="translateY(50%)";break;case"ttb":r.top="".concat(100*o,"%"),r.transform="translateY(-50%)";break;default:r.left="".concat(100*o,"%"),r.transform="translateX(-50%)"}return r}function so(e,t){return Array.isArray(e)?e[t]:e}var co=a(16928);const uo=n.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});var ho=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],po=n.forwardRef((function(e,t){var a,o=e.prefixCls,r=e.value,i=e.valueIndex,l=e.onStartMove,s=e.style,c=e.render,d=e.dragging,u=e.onOffsetChange,h=e.onChangeComplete,p=e.onFocus,f=e.onMouseEnter,g=(0,ro.A)(e,ho),m=n.useContext(uo),v=m.min,b=m.max,y=m.direction,x=m.disabled,w=m.keyboard,C=m.range,S=m.tabIndex,A=m.ariaLabelForHandle,k=m.ariaLabelledByForHandle,E=m.ariaValueTextFormatterForHandle,_=m.styles,M=m.classNames,D="".concat(o,"-handle"),T=function(e){x||l(e,i)},O=lo(y,r,v,b),Y={};null!==i&&(Y={tabIndex:x?null:so(S,i),role:"slider","aria-valuemin":v,"aria-valuemax":b,"aria-valuenow":r,"aria-disabled":x,"aria-label":so(A,i),"aria-labelledby":so(k,i),"aria-valuetext":null===(a=so(E,i))||void 0===a?void 0:a(r),"aria-orientation":"ltr"===y||"rtl"===y?"horizontal":"vertical",onMouseDown:T,onTouchStart:T,onFocus:function(e){null==p||p(e,i)},onMouseEnter:function(e){f(e,i)},onKeyDown:function(e){if(!x&&w){var t=null;switch(e.which||e.keyCode){case co.A.LEFT:t="ltr"===y||"btt"===y?-1:1;break;case co.A.RIGHT:t="ltr"===y||"btt"===y?1:-1;break;case co.A.UP:t="ttb"!==y?1:-1;break;case co.A.DOWN:t="ttb"!==y?-1:1;break;case co.A.HOME:t="min";break;case co.A.END:t="max";break;case co.A.PAGE_UP:t=2;break;case co.A.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),u(t,i))}},onKeyUp:function(e){switch(e.which||e.keyCode){case co.A.LEFT:case co.A.RIGHT:case co.A.UP:case co.A.DOWN:case co.A.HOME:case co.A.END:case co.A.PAGE_UP:case co.A.PAGE_DOWN:null==h||h()}}});var R=n.createElement("div",(0,Mt.A)({ref:t,className:Q()(D,(0,Nt.A)((0,Nt.A)({},"".concat(D,"-").concat(i+1),null!==i&&C),"".concat(D,"-dragging"),d),M.handle),style:(0,eo.A)((0,eo.A)((0,eo.A)({},O),s),_.handle)},Y,g));return c&&(R=c(R,{index:i,prefixCls:o,value:r,dragging:d})),R}));const fo=po;var go=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","onFocus"],mo=n.forwardRef((function(e,t){var a=e.prefixCls,o=e.style,r=e.onStartMove,i=e.onOffsetChange,l=e.values,s=e.handleRender,c=e.activeHandleRender,d=e.draggingIndex,u=e.onFocus,h=(0,ro.A)(e,go),p=n.useRef({});n.useImperativeHandle(t,(function(){return{focus:function(e){var t;null===(t=p.current[e])||void 0===t||t.focus()}}}));var f=n.useState(-1),g=(0,Dt.A)(f,2),m=g[0],v=g[1],b=(0,eo.A)({prefixCls:a,onStartMove:r,onOffsetChange:i,render:s,onFocus:function(e,t){v(t),null==u||u(e)},onMouseEnter:function(e,t){v(t)}},h);return n.createElement(n.Fragment,null,l.map((function(e,t){return n.createElement(fo,(0,Mt.A)({ref:function(e){e?p.current[t]=e:delete p.current[t]},dragging:d===t,style:so(o,t),key:t,value:e,valueIndex:t},b))})),c&&n.createElement(fo,(0,Mt.A)({key:"a11y"},b,{value:l[m],valueIndex:null,dragging:-1!==d,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}));const vo=mo,bo=function(e){var t=e.prefixCls,a=e.style,o=e.children,r=e.value,i=e.onClick,l=n.useContext(uo),s=l.min,c=l.max,d=l.direction,u=l.includedStart,h=l.includedEnd,p=l.included,f="".concat(t,"-text"),g=lo(d,r,s,c);return n.createElement("span",{className:Q()(f,(0,Nt.A)({},"".concat(f,"-active"),p&&u<=r&&r<=h)),style:(0,eo.A)((0,eo.A)({},g),a),onMouseDown:function(e){e.stopPropagation()},onClick:function(){i(r)}},o)},yo=function(e){var t=e.prefixCls,a=e.marks,o=e.onClick,r="".concat(t,"-mark");return a.length?n.createElement("div",{className:r},a.map((function(e){var t=e.value,a=e.style,i=e.label;return n.createElement(bo,{key:t,prefixCls:r,style:a,value:t,onClick:o},i)}))):null},xo=function(e){var t=e.prefixCls,a=e.value,o=e.style,r=e.activeStyle,i=n.useContext(uo),l=i.min,s=i.max,c=i.direction,d=i.included,u=i.includedStart,h=i.includedEnd,p="".concat(t,"-dot"),f=d&&u<=a&&a<=h,g=(0,eo.A)((0,eo.A)({},lo(c,a,l,s)),"function"==typeof o?o(a):o);return f&&(g=(0,eo.A)((0,eo.A)({},g),"function"==typeof r?r(a):r)),n.createElement("span",{className:Q()(p,(0,Nt.A)({},"".concat(p,"-active"),f)),style:g})},wo=function(e){var t=e.prefixCls,a=e.marks,o=e.dots,r=e.style,i=e.activeStyle,l=n.useContext(uo),s=l.min,c=l.max,d=l.step,u=n.useMemo((function(){var e=new Set;if(a.forEach((function(t){e.add(t.value)})),o&&null!==d)for(var t=s;t<=c;)e.add(t),t+=d;return Array.from(e)}),[s,c,d,o,a]);return n.createElement("div",{className:"".concat(t,"-step")},u.map((function(e){return n.createElement(xo,{prefixCls:t,key:e,value:e,style:r,activeStyle:i})})))},Co=function(e){var t=e.prefixCls,a=e.style,o=e.start,r=e.end,i=e.index,l=e.onStartMove,s=e.replaceCls,c=n.useContext(uo),d=c.direction,u=c.min,h=c.max,p=c.disabled,f=c.range,g=c.classNames,m="".concat(t,"-track"),v=io(o,u,h),b=io(r,u,h),y=function(e){!p&&l&&l(e,-1)},x={};switch(d){case"rtl":x.right="".concat(100*v,"%"),x.width="".concat(100*b-100*v,"%");break;case"btt":x.bottom="".concat(100*v,"%"),x.height="".concat(100*b-100*v,"%");break;case"ttb":x.top="".concat(100*v,"%"),x.height="".concat(100*b-100*v,"%");break;default:x.left="".concat(100*v,"%"),x.width="".concat(100*b-100*v,"%")}var w=s||Q()(m,(0,Nt.A)((0,Nt.A)({},"".concat(m,"-").concat(i+1),null!==i&&f),"".concat(t,"-track-draggable"),l),g.track);return n.createElement("div",{className:w,style:(0,eo.A)((0,eo.A)({},x),a),onMouseDown:y,onTouchStart:y})},So=function(e){var t=e.prefixCls,a=e.style,o=e.values,r=e.startPoint,i=e.onStartMove,l=n.useContext(uo),s=l.included,c=l.range,d=l.min,u=l.styles,h=l.classNames,p=n.useMemo((function(){if(!c){if(0===o.length)return[];var e=null!=r?r:d,t=o[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var a=[],n=0;n<o.length-1;n+=1)a.push({start:o[n],end:o[n+1]});return a}),[o,c,r,d]);if(!s)return null;var f=h.tracks||u.tracks?n.createElement(Co,{index:null,prefixCls:t,start:p[0].start,end:p[p.length-1].end,replaceCls:Q()(h.tracks,"".concat(t,"-tracks")),style:u.tracks}):null;return n.createElement(n.Fragment,null,f,p.map((function(e,o){var r=e.start,l=e.end;return n.createElement(Co,{index:o,prefixCls:t,style:(0,eo.A)((0,eo.A)({},so(a,o)),u.track),start:r,end:l,key:o,onStartMove:i})})))};var Ao=a(81470);function ko(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}var Eo=n.forwardRef((function(e,t){var a=e.prefixCls,o=void 0===a?"rc-slider":a,r=e.className,i=e.style,l=e.classNames,s=e.styles,c=e.disabled,d=void 0!==c&&c,u=e.keyboard,h=void 0===u||u,p=e.autoFocus,f=e.onFocus,g=e.onBlur,m=e.min,v=void 0===m?0:m,b=e.max,y=void 0===b?100:b,x=e.step,w=void 0===x?1:x,C=e.value,S=e.defaultValue,A=e.range,k=e.count,E=e.onChange,_=e.onBeforeChange,M=e.onAfterChange,D=e.onChangeComplete,T=e.allowCross,O=void 0===T||T,Y=e.pushable,R=void 0!==Y&&Y,F=e.draggableTrack,I=e.reverse,P=e.vertical,N=e.included,L=void 0===N||N,$=e.startPoint,B=e.trackStyle,H=e.handleStyle,j=e.railStyle,z=e.dotStyle,W=e.activeDotStyle,U=e.marks,q=e.dots,V=e.handleRender,G=e.activeHandleRender,K=e.tabIndex,X=void 0===K?0:K,J=e.ariaLabelForHandle,Z=e.ariaLabelledByForHandle,ee=e.ariaValueTextFormatterForHandle,te=n.useRef(null),ae=n.useRef(null),ne=n.useMemo((function(){return P?I?"ttb":"btt":I?"rtl":"ltr"}),[I,P]),oe=n.useMemo((function(){return isFinite(v)?v:0}),[v]),re=n.useMemo((function(){return isFinite(y)?y:100}),[y]),ie=n.useMemo((function(){return null!==w&&w<=0?1:w}),[w]),le=n.useMemo((function(){return"boolean"==typeof R?!!R&&ie:R>=0&&R}),[R,ie]),se=n.useMemo((function(){return Object.keys(U||{}).map((function(e){var t=U[e],a={value:Number(e)};return t&&"object"===(0,to.A)(t)&&!n.isValidElement(t)&&("label"in t||"style"in t)?(a.style=t.style,a.label=t.label):a.label=t,a})).filter((function(e){var t=e.label;return t||"number"==typeof t})).sort((function(e,t){return e.value-t.value}))}),[U]),ce=function(e,t,a,o,r,i){var l=n.useCallback((function(a){return Math.max(e,Math.min(t,a))}),[e,t]),s=n.useCallback((function(n){if(null!==a){var o=e+Math.round((l(n)-e)/a)*a,r=function(e){return(String(e).split(".")[1]||"").length},i=Math.max(r(a),r(t),r(e)),s=Number(o.toFixed(i));return e<=s&&s<=t?s:null}return null}),[a,e,t,l]),c=n.useCallback((function(n){var r=l(n),i=o.map((function(e){return e.value}));null!==a&&i.push(s(n)),i.push(e,t);var c=i[0],d=t-e;return i.forEach((function(e){var t=Math.abs(r-e);t<=d&&(c=e,d=t)})),c}),[e,t,o,a,l,s]),d=function n(r,i,l){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof i){var d,u=r[l],h=u+i,p=[];o.forEach((function(e){p.push(e.value)})),p.push(e,t),p.push(s(u));var f=i>0?1:-1;"unit"===c?p.push(s(u+f*a)):p.push(s(h)),p=p.filter((function(e){return null!==e})).filter((function(e){return i<0?e<=u:e>=u})),"unit"===c&&(p=p.filter((function(e){return e!==u})));var g="unit"===c?u:h;d=p[0];var m=Math.abs(d-g);if(p.forEach((function(e){var t=Math.abs(e-g);t<m&&(d=e,m=t)})),void 0===d)return i<0?e:t;if("dist"===c)return d;if(Math.abs(i)>1){var v=(0,Ht.A)(r);return v[l]=d,n(v,i-f,l,c)}return d}return"min"===i?e:"max"===i?t:void 0},u=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e[a],r=d(e,t,a,n);return{value:r,changed:r!==o}},h=function(e){return null===i&&0===e||"number"==typeof i&&e<i};return[c,function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e.map(c),l=o[a],s=d(o,t,a,n);if(o[a]=s,!1===r){var p=i||0;a>0&&o[a-1]!==l&&(o[a]=Math.max(o[a],o[a-1]+p)),a<o.length-1&&o[a+1]!==l&&(o[a]=Math.min(o[a],o[a+1]-p))}else if("number"==typeof i||null===i){for(var f=a+1;f<o.length;f+=1)for(var g=!0;h(o[f]-o[f-1])&&g;){var m=u(o,1,f);o[f]=m.value,g=m.changed}for(var v=a;v>0;v-=1)for(var b=!0;h(o[v]-o[v-1])&&b;){var y=u(o,-1,v-1);o[v-1]=y.value,b=y.changed}for(var x=o.length-1;x>0;x-=1)for(var w=!0;h(o[x]-o[x-1])&&w;){var C=u(o,-1,x-1);o[x-1]=C.value,w=C.changed}for(var S=0;S<o.length-1;S+=1)for(var A=!0;h(o[S+1]-o[S])&&A;){var k=u(o,1,S+1);o[S+1]=k.value,A=k.changed}}return{value:o[a],values:o}}]}(oe,re,ie,se,O,le),de=(0,Dt.A)(ce,2),ue=de[0],he=de[1],pe=(0,ao.A)(S,{value:C}),fe=(0,Dt.A)(pe,2),ge=fe[0],me=fe[1],ve=n.useMemo((function(){var e=null==ge?[]:Array.isArray(ge)?ge:[ge],t=(0,Dt.A)(e,1)[0],a=null===ge?[]:[void 0===t?oe:t];if(A){if(a=(0,Ht.A)(e),k||void 0===ge){var n=k>=0?k+1:2;for(a=a.slice(0,n);a.length<n;){var o;a.push(null!==(o=a[a.length-1])&&void 0!==o?o:oe)}}a.sort((function(e,t){return e-t}))}return a.forEach((function(e,t){a[t]=ue(e)})),a}),[ge,A,oe,k,ue]),be=n.useRef(ve);be.current=ve;var ye=function(e){return A?e:e[0]},xe=function(e){var t=(0,Ht.A)(e).sort((function(e,t){return e-t}));E&&!(0,no.A)(t,be.current,!0)&&E(ye(t)),me(t)},we=function(){var e=ye(be.current);null==M||M(e),(0,oo.Ay)(!M,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==D||D(e)},Ce=function(e,t,a,o,r,i,l,s,c){var d=n.useState(null),u=(0,Dt.A)(d,2),h=u[0],p=u[1],f=n.useState(-1),g=(0,Dt.A)(f,2),m=g[0],v=g[1],b=n.useState(a),y=(0,Dt.A)(b,2),x=y[0],w=y[1],C=n.useState(a),S=(0,Dt.A)(C,2),A=S[0],k=S[1],E=n.useRef(null),_=n.useRef(null);n.useLayoutEffect((function(){-1===m&&w(a)}),[a,m]),n.useEffect((function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",_.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",_.current)}}),[]);var M=function(e,t){x.some((function(t,a){return t!==e[a]}))&&(void 0!==t&&p(t),w(e),l(e))},D=(0,Ao._q)((function(e,t){if(-1===e){var a=A[0],n=A[A.length-1],l=o-a,s=r-n,d=t*(r-o);d=Math.max(d,l),d=Math.min(d,s);var u=i(a+d);d=u-a;var h=A.map((function(e){return e+d}));M(h)}else{var p=(r-o)*t,f=(0,Ht.A)(x);f[e]=A[e];var g=c(f,p,e,"dist");M(g.values,g.value)}})),T=n.useMemo((function(){var e=(0,Ht.A)(a).sort((function(e,t){return e-t})),t=(0,Ht.A)(x).sort((function(e,t){return e-t}));return e.every((function(e,a){return e===t[a]}))?x:a}),[a,x]);return[m,h,T,function(n,o,r){n.stopPropagation();var i=r||a,l=i[o];v(o),p(l),k(i);var c=ko(n),d=c.pageX,u=c.pageY,h=function(a){a.preventDefault();var n,r=ko(a),i=r.pageX,l=r.pageY,s=i-d,c=l-u,h=e.current.getBoundingClientRect(),p=h.width,f=h.height;switch(t){case"btt":n=-c/f;break;case"ttb":n=c/f;break;case"rtl":n=-s/p;break;default:n=s/p}D(o,n)},f=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",h),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",h),E.current=null,_.current=null,v(-1),s()};document.addEventListener("mouseup",f),document.addEventListener("mousemove",h),document.addEventListener("touchend",f),document.addEventListener("touchmove",h),E.current=h,_.current=f}]}(ae,ne,ve,oe,re,ue,xe,we,he),Se=(0,Dt.A)(Ce,4),Ae=Se[0],ke=Se[1],Ee=Se[2],_e=Se[3],Me=function(e,t){if(!d){var a=0,n=re-oe;ve.forEach((function(t,o){var r=Math.abs(e-t);r<=n&&(n=r,a=o)}));var o,r,i=(0,Ht.A)(ve);i[a]=e,A&&!ve.length&&void 0===k&&i.push(e),null==_||_(ye(i)),xe(i),t&&(null===(o=document.activeElement)||void 0===o||null===(r=o.blur)||void 0===r||r.call(o),te.current.focus(a),_e(t,a,i))}},De=n.useState(null),Te=(0,Dt.A)(De,2),Oe=Te[0],Ye=Te[1];n.useEffect((function(){if(null!==Oe){var e=ve.indexOf(Oe);e>=0&&te.current.focus(e)}Ye(null)}),[Oe]);var Re=n.useMemo((function(){return(!F||null!==ie)&&F}),[F,ie]),Fe=function(e,t){_e(e,t),null==_||_(ye(be.current))},Ie=-1!==Ae;n.useEffect((function(){if(!Ie){var e=ve.lastIndexOf(ke);te.current.focus(e)}}),[Ie]);var Pe=n.useMemo((function(){return(0,Ht.A)(Ee).sort((function(e,t){return e-t}))}),[Ee]),Ne=n.useMemo((function(){return A?[Pe[0],Pe[Pe.length-1]]:[oe,Pe[0]]}),[Pe,A,oe]),Le=(0,Dt.A)(Ne,2),$e=Le[0],Be=Le[1];n.useImperativeHandle(t,(function(){return{focus:function(){te.current.focus(0)},blur:function(){var e,t=document.activeElement;null!==(e=ae.current)&&void 0!==e&&e.contains(t)&&(null==t||t.blur())}}})),n.useEffect((function(){p&&te.current.focus(0)}),[]);var He=n.useMemo((function(){return{min:oe,max:re,direction:ne,disabled:d,keyboard:h,step:ie,included:L,includedStart:$e,includedEnd:Be,range:A,tabIndex:X,ariaLabelForHandle:J,ariaLabelledByForHandle:Z,ariaValueTextFormatterForHandle:ee,styles:s||{},classNames:l||{}}}),[oe,re,ne,d,h,ie,L,$e,Be,A,X,J,Z,ee,s,l]);return n.createElement(uo.Provider,{value:He},n.createElement("div",{ref:ae,className:Q()(o,r,(0,Nt.A)((0,Nt.A)((0,Nt.A)((0,Nt.A)({},"".concat(o,"-disabled"),d),"".concat(o,"-vertical"),P),"".concat(o,"-horizontal"),!P),"".concat(o,"-with-marks"),se.length)),style:i,onMouseDown:function(e){e.preventDefault();var t,a=ae.current.getBoundingClientRect(),n=a.width,o=a.height,r=a.left,i=a.top,l=a.bottom,s=a.right,c=e.clientX,d=e.clientY;switch(ne){case"btt":t=(l-d)/o;break;case"ttb":t=(d-i)/o;break;case"rtl":t=(s-c)/n;break;default:t=(c-r)/n}Me(ue(oe+t*(re-oe)),e)}},n.createElement("div",{className:Q()("".concat(o,"-rail"),null==l?void 0:l.rail),style:(0,eo.A)((0,eo.A)({},j),null==s?void 0:s.rail)}),n.createElement(So,{prefixCls:o,style:B,values:Pe,startPoint:$,onStartMove:Re?Fe:void 0}),n.createElement(wo,{prefixCls:o,marks:se,dots:q,style:z,activeStyle:W}),n.createElement(vo,{ref:te,prefixCls:o,style:H,values:Ee,draggingIndex:Ae,onStartMove:Fe,onOffsetChange:function(e,t){if(!d){var a=he(ve,e,t);null==_||_(ye(ve)),xe(a.values),Ye(a.value)}},onFocus:f,onBlur:g,handleRender:V,activeHandleRender:G,onChangeComplete:we}),n.createElement(yo,{prefixCls:o,marks:se,onClick:Me})))}));const _o=Eo;var Mo=a(25371),Do=a(22553),To=a(24329),Oo=a(8719),Yo=a(27707);const Ro=n.forwardRef(((e,t)=>{const{open:a}=e,o=(0,n.useRef)(null),r=(0,n.useRef)(null);function i(){Mo.A.cancel(r.current),r.current=null}return n.useEffect((()=>(a?r.current=(0,Mo.A)((()=>{var e;null===(e=o.current)||void 0===e||e.forceAlign(),r.current=null})):i(),i)),[a,e.title]),n.createElement(Yo.A,Object.assign({ref:(0,Oo.K4)(o,t)},e))}));var Fo=a(87785),Io=a(24978),Po=a(1051),No=a(55302),Lo=a(18750);const $o=e=>{const{componentCls:t,antCls:a,controlSize:n,dotSize:o,marginFull:r,marginPart:i,colorFillContentHover:l,handleColorDisabled:s,calc:c}=e;return{[t]:Object.assign(Object.assign({},(0,Po.dF)(e)),{position:"relative",height:n,margin:`${(0,Fo.zA)(i)} ${(0,Fo.zA)(r)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${(0,Fo.zA)(r)} ${(0,Fo.zA)(i)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${e.motionDurationMid}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${e.motionDurationMid}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:l},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${(0,Fo.zA)(e.handleLineWidth)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:e.handleSize,height:e.handleSize,outline:"none","&::before":{content:'""',position:"absolute",insetInlineStart:c(e.handleLineWidth).mul(-1).equal(),insetBlockStart:c(e.handleLineWidth).mul(-1).equal(),width:c(e.handleSize).add(c(e.handleLineWidth).mul(2)).equal(),height:c(e.handleSize).add(c(e.handleLineWidth).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:e.handleSize,height:e.handleSize,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${(0,Fo.zA)(e.handleLineWidth)} ${e.handleColor}`,borderRadius:"50%",cursor:"pointer",transition:`\n            inset-inline-start ${e.motionDurationMid},\n            inset-block-start ${e.motionDurationMid},\n            width ${e.motionDurationMid},\n            height ${e.motionDurationMid},\n            box-shadow ${e.motionDurationMid}\n          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:c(e.handleSizeHover).sub(e.handleSize).div(2).add(e.handleLineWidthHover).mul(-1).equal(),insetBlockStart:c(e.handleSizeHover).sub(e.handleSize).div(2).add(e.handleLineWidthHover).mul(-1).equal(),width:c(e.handleSizeHover).add(c(e.handleLineWidthHover).mul(2)).equal(),height:c(e.handleSizeHover).add(c(e.handleLineWidthHover).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${(0,Fo.zA)(e.handleLineWidthHover)} ${e.handleActiveColor}`,width:e.handleSizeHover,height:e.handleSizeHover,insetInlineStart:e.calc(e.handleSize).sub(e.handleSizeHover).div(2).equal(),insetBlockStart:e.calc(e.handleSize).sub(e.handleSizeHover).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:o,height:o,backgroundColor:e.colorBgElevated,border:`${(0,Fo.zA)(e.handleLineWidth)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`\n          ${t}-dot\n        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:e.handleSize,height:e.handleSize,boxShadow:`0 0 0 ${(0,Fo.zA)(e.handleLineWidth)} ${s}`,insetInlineStart:0,insetBlockStart:0},[`\n          ${t}-mark-text,\n          ${t}-dot\n        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${a}-tooltip-inner`]:{minWidth:"unset"}})}},Bo=(e,t)=>{const{componentCls:a,railSize:n,handleSize:o,dotSize:r,marginFull:i,calc:l}=e,s=t?"paddingBlock":"paddingInline",c=t?"width":"height",d=t?"height":"width",u=t?"insetBlockStart":"insetInlineStart",h=t?"top":"insetInlineStart",p=l(n).mul(3).sub(o).div(2).equal(),f=l(o).sub(n).div(2).equal(),g=t?{borderWidth:`${(0,Fo.zA)(f)} 0`,transform:`translateY(${(0,Fo.zA)(l(f).mul(-1).equal())})`}:{borderWidth:`0 ${(0,Fo.zA)(f)}`,transform:`translateX(${(0,Fo.zA)(e.calc(f).mul(-1).equal())})`};return{[s]:n,[d]:l(n).mul(3).equal(),[`${a}-rail`]:{[c]:"100%",[d]:n},[`${a}-track,${a}-tracks`]:{[d]:n},[`${a}-track-draggable`]:Object.assign({},g),[`${a}-handle`]:{[u]:p},[`${a}-mark`]:{insetInlineStart:0,top:0,[h]:l(n).mul(3).add(t?0:i).equal(),[c]:"100%"},[`${a}-step`]:{insetInlineStart:0,top:0,[h]:n,[c]:"100%",[d]:n},[`${a}-dot`]:{position:"absolute",[u]:l(n).sub(r).div(2).equal()}}},Ho=e=>{const{componentCls:t,marginPartWithMark:a}=e;return{[`${t}-horizontal`]:Object.assign(Object.assign({},Bo(e,!0)),{[`&${t}-with-marks`]:{marginBottom:a}})}},jo=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:Object.assign(Object.assign({},Bo(e,!1)),{height:"100%"})}},zo=(0,No.OF)("Slider",(e=>{const t=(0,Lo.h1)(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[$o(t),Ho(t),jo(t)]}),(e=>{const t=e.controlHeightLG/4;return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:e.controlHeightSM/2,dotSize:8,handleLineWidth:e.lineWidth+1,handleLineWidthHover:e.lineWidth+3,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:e.colorPrimary,handleColorDisabled:new Io.q(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}}));function Wo(){const[e,t]=n.useState(!1),a=n.useRef(),o=()=>{Mo.A.cancel(a.current)};return n.useEffect((()=>o),[]),[e,e=>{o(),e?t(e):a.current=(0,Mo.A)((()=>{t(e)}))}]}const Uo=n.forwardRef(((e,t)=>{const{prefixCls:a,range:o,className:r,rootClassName:i,style:l,disabled:s,tooltipPrefixCls:c,tipFormatter:d,tooltipVisible:u,getTooltipPopupContainer:h,tooltipPlacement:p,tooltip:f={},onChangeComplete:g}=e,m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:v}=e,{direction:b,slider:y,getPrefixCls:x,getPopupContainer:w}=n.useContext(Do.QO),C=n.useContext(To.A),S=null!=s?s:C,[A,k]=Wo(),[E,_]=Wo(),M=Object.assign({},f),{open:D,placement:T,getPopupContainer:O,prefixCls:Y,formatter:R}=M,F=null!=D?D:u,I=(A||E)&&!1!==F,P=function(e,t){return e||null===e?e:t||null===t?t:e=>"number"==typeof e?e.toString():""}(R,d),[N,L]=Wo(),$=(e,t)=>e||(t?"rtl"===b?"left":"right":"top"),B=x("slider",a),[H,j,z]=zo(B),W=Q()(r,null==y?void 0:y.className,i,{[`${B}-rtl`]:"rtl"===b,[`${B}-lock`]:N},j,z);"rtl"!==b||m.vertical||(m.reverse=!m.reverse);const[U,q]=n.useMemo((()=>o?"object"==typeof o?[!0,o.draggableTrack]:[!0,!1]:[!1]),[o]);n.useEffect((()=>{const e=()=>{(0,Mo.A)((()=>{_(!1)}),1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}}),[]);const V=U&&!F,G=V?(e,t)=>{const a=n.cloneElement(e,{style:Object.assign(Object.assign({},e.props.style),{visibility:"hidden"})});return n.createElement(Ro,Object.assign({},M,{prefixCls:x("tooltip",null!=Y?Y:c),title:P?P(t.value):"",open:null!==P&&I,placement:$(null!=T?T:p,v),key:"tooltip",overlayClassName:`${B}-tooltip`,getPopupContainer:O||h||w}),a)}:void 0,K=Object.assign(Object.assign({},null==y?void 0:y.style),l);return H(n.createElement(_o,Object.assign({},m,{step:m.step,range:U,draggableTrack:q,className:W,style:K,disabled:S,ref:t,prefixCls:B,handleRender:(e,t)=>{const{index:a}=t,o=e.props,r=Object.assign(Object.assign({},o),{onMouseEnter:e=>{var t;k(!0),null===(t=o.onMouseEnter)||void 0===t||t.call(o,e)},onMouseLeave:e=>{var t;k(!1),null===(t=o.onMouseLeave)||void 0===t||t.call(o,e)},onMouseDown:e=>{var t;_(!0),L(!0),null===(t=o.onMouseDown)||void 0===t||t.call(o,e)},onFocus:e=>{var t,a;_(!0),null===(t=m.onFocus)||void 0===t||t.call(m,e),null===(a=o.onFocus)||void 0===a||a.call(o,e)},onBlur:e=>{var t,a;_(!1),null===(t=m.onBlur)||void 0===t||t.call(m,e),null===(a=o.onBlur)||void 0===a||a.call(o,e)}}),i=n.cloneElement(e,r),l=(!!F||I)&&null!==P;return V?i:n.createElement(Ro,Object.assign({},M,{prefixCls:x("tooltip",null!=Y?Y:c),title:P?P(t.value):"",open:l,placement:$(null!=T?T:p,v),key:a,overlayClassName:`${B}-tooltip`,getPopupContainer:O||h||w}),i)},activeHandleRender:G,onChangeComplete:e=>{null==g||g(e),L(!1)}})))})),qo=Uo;function Vo(e){return(0,Ee.Y)(qo,{...e})}var Go=a(9379),Ko=a(19855);const Xo={label:R().string,tooltip:R().string,colType:R().string,width:R().string,height:R().string,timeLag:R().oneOfType([R().string,R().number]),timeRatio:R().string,comparisonType:R().string,showYAxis:R().bool,yAxisBounds:R().array,bounds:R().array,d3format:R().string,dateFormat:R().string,onChange:R().func},Qo={label:(0,s.t)("Time series columns"),tooltip:"",colType:"",width:"",height:"",timeLag:"",timeRatio:"",comparisonType:"",showYAxis:!1,yAxisBounds:[null,null],bounds:[null,null],d3format:"",dateFormat:""},Jo=[{value:"value",label:(0,s.t)("Actual value"),key:"value"},{value:"diff",label:(0,s.t)("Difference"),key:"diff"},{value:"perc",label:(0,s.t)("Percentage"),key:"perc"},{value:"perc_change",label:(0,s.t)("Percentage change"),key:"perc_change"}],Zo=[{value:"time",label:(0,s.t)("Time comparison"),key:"time"},{value:"contrib",label:(0,s.t)("Contribution"),key:"contrib"},{value:"spark",label:(0,s.t)("Sparkline"),key:"spark"},{value:"avg",label:(0,s.t)("Period average"),key:"avg"}],er=(0,I.I4)(it.fI)`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
  display: flex;
  align-items: center;
`,tr=(0,I.I4)(it.fv)`
  display: flex;
  align-items: center;
`,ar=(0,I.I4)(st.W)`
  margin-left: ${({theme:e})=>e.gridUnit}px;
  color: ${({theme:e})=>e.colors.grayscale.light1};
`,nr=I.I4.div`
  margin-top: ${({theme:e})=>5*e.gridUnit}px;
  display: flex;
  justify-content: center;
`;class or extends n.Component{constructor(e){super(e),this.onSave=this.onSave.bind(this),this.onClose=this.onClose.bind(this),this.resetState=this.resetState.bind(this),this.initialState=this.initialState.bind(this),this.onPopoverVisibleChange=this.onPopoverVisibleChange.bind(this),this.state=this.initialState()}initialState(){return{label:this.props.label,tooltip:this.props.tooltip,colType:this.props.colType,width:this.props.width,height:this.props.height,timeLag:this.props.timeLag||0,timeRatio:this.props.timeRatio,comparisonType:this.props.comparisonType,showYAxis:this.props.showYAxis,yAxisBounds:this.props.yAxisBounds,bounds:this.props.bounds,d3format:this.props.d3format,dateFormat:this.props.dateFormat,popoverVisible:!1}}resetState(){const e=this.initialState();this.setState({...e})}onSave(){this.props.onChange(this.state),this.setState({popoverVisible:!1})}onClose(){this.resetState()}onSelectChange(e,t){this.setState({[e]:t})}onTextInputChange(e,t){this.setState({[e]:t.target.value})}onCheckboxChange(e,t){this.setState({[e]:t})}onBoundsChange(e){this.setState({bounds:e})}onPopoverVisibleChange(e){e?this.setState({popoverVisible:e}):this.resetState()}onYAxisBoundsChange(e){this.setState({yAxisBounds:e})}textSummary(){return`${this.props.label}`}formRow(e,t,a,n){return(0,Ee.FD)(er,{children:[(0,Ee.FD)(tr,{xs:24,md:11,children:[e,(0,Ee.Y)(ar,{placement:"top",tooltip:t,label:a})]}),(0,Ee.Y)(it.fv,{xs:24,md:13,children:n})]})}renderPopover(){return(0,Ee.FD)("div",{id:"ts-col-popo",style:{width:320},children:[this.formRow((0,s.t)("Label"),(0,s.t)("The column header label"),"time-lag",(0,Ee.Y)(yt.pd,{value:this.state.label,onChange:this.onTextInputChange.bind(this,"label"),placeholder:(0,s.t)("Label")})),this.formRow((0,s.t)("Tooltip"),(0,s.t)("Column header tooltip"),"col-tooltip",(0,Ee.Y)(yt.pd,{value:this.state.tooltip,onChange:this.onTextInputChange.bind(this,"tooltip"),placeholder:(0,s.t)("Tooltip")})),this.formRow((0,s.t)("Type"),(0,s.t)("Type of comparison, value difference or percentage"),"col-type",(0,Ee.Y)(it.l6,{ariaLabel:(0,s.t)("Type"),value:this.state.colType||void 0,onChange:this.onSelectChange.bind(this,"colType"),options:Zo})),(0,Ee.Y)("hr",{}),"spark"===this.state.colType&&this.formRow((0,s.t)("Width"),(0,s.t)("Width of the sparkline"),"spark-width",(0,Ee.Y)(yt.pd,{value:this.state.width,onChange:this.onTextInputChange.bind(this,"width"),placeholder:(0,s.t)("Width")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Height"),(0,s.t)("Height of the sparkline"),"spark-width",(0,Ee.Y)(yt.pd,{value:this.state.height,onChange:this.onTextInputChange.bind(this,"height"),placeholder:(0,s.t)("Height")})),["time","avg"].indexOf(this.state.colType)>=0&&this.formRow((0,s.t)("Time lag"),(0,s.t)("Number of periods to compare against. You can use negative numbers to compare from the beginning of the time range."),"time-lag",(0,Ee.Y)(yt.pd,{value:this.state.timeLag,onChange:this.onTextInputChange.bind(this,"timeLag"),placeholder:(0,s.t)("Time Lag")})),["spark"].indexOf(this.state.colType)>=0&&this.formRow((0,s.t)("Time ratio"),(0,s.t)("Number of periods to ratio against"),"time-ratio",(0,Ee.Y)(yt.pd,{value:this.state.timeRatio,onChange:this.onTextInputChange.bind(this,"timeRatio"),placeholder:(0,s.t)("Time Ratio")})),"time"===this.state.colType&&this.formRow((0,s.t)("Type"),(0,s.t)("Type of comparison, value difference or percentage"),"comp-type",(0,Ee.Y)(it.l6,{ariaLabel:(0,s.t)("Type"),value:this.state.comparisonType||void 0,onChange:this.onSelectChange.bind(this,"comparisonType"),options:Jo})),"spark"===this.state.colType&&this.formRow((0,s.t)("Show Y-axis"),(0,s.t)("Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise."),"show-y-axis-bounds",(0,Ee.Y)(Et.A,{value:this.state.showYAxis,onChange:this.onCheckboxChange.bind(this,"showYAxis")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Y-axis bounds"),(0,s.t)("Manually set min/max values for the y-axis."),"y-axis-bounds",(0,Ee.Y)(kt,{value:this.state.yAxisBounds,onChange:this.onYAxisBoundsChange.bind(this)})),"spark"!==this.state.colType&&this.formRow((0,s.t)("Color bounds"),(0,s.t)("Number bounds used for color encoding from red to blue.\n               Reverse the numbers for blue to red. To get pure red or blue,\n               you can enter either only min or max."),"bounds",(0,Ee.Y)(kt,{value:this.state.bounds,onChange:this.onBoundsChange.bind(this)})),this.formRow((0,s.t)("Number format"),(0,s.t)("Optional d3 number format string"),"d3-format",(0,Ee.Y)(yt.pd,{value:this.state.d3format,onChange:this.onTextInputChange.bind(this,"d3format"),placeholder:(0,s.t)("Number format string")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Date format"),(0,s.t)("Optional d3 date format string"),"date-format",(0,Ee.Y)(yt.pd,{value:this.state.dateFormat,onChange:this.onTextInputChange.bind(this,"dateFormat"),placeholder:(0,s.t)("Date format string")})),(0,Ee.FD)(nr,{children:[(0,Ee.Y)(Ye.A,{buttonSize:"small",onClick:this.onClose,cta:!0,children:(0,s.t)("Close")}),(0,Ee.Y)(Ye.A,{buttonStyle:"primary",buttonSize:"small",onClick:this.onSave,cta:!0,children:(0,s.t)("Save")})]})]})}render(){return(0,Ee.FD)("span",{children:[this.textSummary()," ",(0,Ee.Y)(ut.A,{trigger:"click",content:this.renderPopover(),title:(0,s.t)("Column Configuration"),visible:this.state.popoverVisible,onVisibleChange:this.onPopoverVisibleChange,children:(0,Ee.Y)(st.W,{icon:"edit",className:"text-primary",label:"edit-ts-column"})})]})}}or.propTypes=Xo,or.defaultProps=Qo;var rr=a(62193),ir=a.n(rr),lr=a(13686),sr=a(49277),cr=a(77189),dr=a(78362),ur=a(42370);const hr="YYYY-MM-DD",pr=(e,t)=>D()(e,t),fr=(e,t)=>D()(e,t);var gr=a(3800);const mr=["longitude","latitude","zoom","bearing","pitch"],vr={onChange:R().func,value:R().shape({longitude:R().number,latitude:R().number,zoom:R().number,bearing:R().number,pitch:R().number}),default:R().object,name:R().string.isRequired};class br extends n.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e,t){this.props.onChange({...this.props.value,[e]:t})}renderTextControl(e){return(0,Ee.FD)("div",{children:[(0,Ee.Y)(yn.lR,{children:e}),(0,Ee.Y)(cn.A,{value:this.props.value[e],onChange:this.onChange.bind(this,e),isFloat:!0})]},e)}renderPopover(){return(0,Ee.Y)("div",{id:`filter-popover-${this.props.name}`,children:mr.map((e=>this.renderTextControl(e)))})}renderLabel(){return this.props.value.longitude&&this.props.value.latitude?`${(0,gr.decimal2sexagesimal)(this.props.value.longitude)} | ${(0,gr.decimal2sexagesimal)(this.props.value.latitude)}`:"N/A"}render(){return(0,Ee.FD)("div",{children:[(0,Ee.Y)(xt.A,{...this.props}),(0,Ee.Y)(Ea.A,{container:document.body,trigger:"click",placement:"right",content:this.renderPopover(),title:(0,s.t)("Viewport"),children:(0,Ee.Y)(Se.A,{className:"pointer",children:this.renderLabel()})})]})}}br.propTypes=vr,br.defaultProps={onChange:()=>{},default:{type:"fix",value:5},value:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0}};var yr=a(38708),xr=a(32416);const wr=[{name:"echarts_timeseries_line",icon:(0,Ee.Y)(W.A.LineChartTile,{})},{name:"echarts_timeseries_bar",icon:(0,Ee.Y)(W.A.BarChartTile,{})},{name:"echarts_area",icon:(0,Ee.Y)(W.A.AreaChartTile,{})},{name:"table",icon:(0,Ee.Y)(W.A.TableChartTile,{})},{name:"big_number_total",icon:(0,Ee.Y)(W.A.BigNumberChartTile,{})},{name:"pie",icon:(0,Ee.Y)(W.A.PieChartTile,{})}],Cr={iconSize:"l",css:e=>P.AH`
    padding: ${e.gridUnit}px;
    & > * {
      line-height: 0;
    }
  `},Sr=({isActive:e,isRendered:t,vizMeta:a,onTileClick:o})=>{var r;const{mountedPluginMetadata:i}=(0,j.Q)(),l=(0,n.useRef)(null),c=(0,I.DP)(),d=2*c.transitionTiming,[u,h]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[g,m]=(0,n.useState)(!1),v=a.name?(null==(r=i[a.name])?void 0:r.name)||`${a.name}`:(0,s.t)("Select Viz Type"),b=(0,n.useCallback)((()=>{o(a.name),f(!0),h(!1),setTimeout((()=>{f(!1)}),1e3*d)}),[o,d,a.name]);(0,n.useEffect)((()=>{m(Boolean(!p&&(!e||l.current&&l.current.scrollWidth>l.current.clientWidth)))}),[e,p]);const y=(0,n.useMemo)((()=>e?{}:{role:"button",tabIndex:0,onClick:b}),[b,e]);let x=null;return g&&(x=t?(0,s.t)("Currently rendered: %s",v):v),(0,Ee.Y)(z.m,{title:x,onVisibleChange:e=>h(e),visible:u&&!p,placement:"top",mouseEnterDelay:.4,children:(0,Ee.FD)("div",{...y,css:P.AH`
          display: flex;
          align-items: center;
          color: ${c.colors.grayscale.base};
          font-weight: ${c.typography.weights.bold};
          border-radius: 6px;
          white-space: nowrap;
          overflow: hidden;
          max-width: fit-content;

          ${!e&&P.AH`
            flex-shrink: 0;
            width: ${6*c.gridUnit}px;
            background-color: transparent;
            transition: none;
            &:hover svg path {
              fill: ${c.colors.primary.base};
              transition: fill ${c.transitionTiming}s ease-out;
            }
          `}

          ${e&&P.AH`
            width: 100%;
            background-color: ${c.colors.grayscale.light4};
            transition:
              width ${d}s ease-out,
              background-color ${d}s ease-out;
            cursor: default;
            svg path {
              fill: ${c.colors.primary.base};
            }
          `}
        `,children:[a.icon," ",(0,Ee.Y)("span",{css:P.AH`
            overflow: hidden;
            text-overflow: ellipsis;
            min-width: 0;
            padding-right: ${c.gridUnit}px;
          `,ref:l,children:v})]})})},Ar=(0,n.memo)((({currentSelection:e,onChange:t})=>{const a=(0,o.d4)((e=>{var t,a,n;return null==(t=e.charts)||null==(a=t[(0,oe.kD)(e.explore)])||null==(n=a.latestQueryFormData)?void 0:n.viz_type})),r=(0,n.useMemo)((()=>{const t=[...wr];return e&&wr.every((t=>t.name!==e))&&e!==a&&t.unshift({name:e,icon:(0,Ee.Y)(W.A.MonitorOutlined,{...Cr,"aria-label":"monitor"})}),a&&wr.every((e=>e.name!==a))&&t.unshift({name:a,icon:(0,Ee.Y)(W.A.CheckSquareOutlined,{...Cr,"aria-label":"check-square"})}),t}),[e,a]);return(0,Ee.Y)("div",{css:e=>P.AH`
          display: flex;
          justify-content: space-between;
          column-gap: ${e.gridUnit}px;
        `,children:r.map((n=>(0,Ee.Y)(Sr,{vizMeta:n,isActive:e===n.name,isRendered:a===n.name,onTileClick:t},n.name)))})})),kr=((0,yr.A)().common.conf.VIZ_TYPE_DENYLIST||[]).concat(Object.values(f.fJ)),Er=(0,he.A)();function _r({vizType:e}){return(0,j.Q)().loading||Er.has(e)?null:(0,Ee.FD)("div",{className:"text-danger",css:e=>P.AH`
        margin-top: ${e.gridUnit}px;
      `,children:[(0,Ee.Y)("i",{className:"fa fa-exclamation-circle text-danger"})," ",(0,Ee.Y)("small",{children:(0,s.t)("This visualization type is not supported.")})]})}const Mr=(0,I.I4)(at.A)`
  .ant-modal-body {
    padding: 0;
  }
`;var Dr=a(25671),Tr=a(36818),Or=a(74954),Yr=a(28990);const Rr=(0,I.I4)(yt.YI)`
  width: 100%;
`,Fr=I.I4.div`
  display: flex;
  justify-content: flex-end;
`,Ir=[{value:Tr.fH.None,label:(0,s.t)("None")},{value:Tr.fH.GreaterThan,label:">"},{value:Tr.fH.LessThan,label:"<"},{value:Tr.fH.GreaterOrEqual,label:"≥"},{value:Tr.fH.LessOrEqual,label:"≤"},{value:Tr.fH.Equal,label:"="},{value:Tr.fH.NotEqual,label:"≠"},{value:Tr.fH.Between,label:"< x <"},{value:Tr.fH.BetweenOrEqual,label:"≤ x ≤"},{value:Tr.fH.BetweenOrLeftEqual,label:"≤ x <"},{value:Tr.fH.BetweenOrRightEqual,label:"< x ≤"}],Pr=(e,t)=>a=>(n,o)=>a&&o&&!e(Number(a),Number(o))?Promise.reject(new Error(t)):Promise.resolve(),Nr=Pr(((e,t)=>e>t),(0,s.t)("This value should be smaller than the right target value")),Lr=Pr(((e,t)=>e<t),(0,s.t)("This value should be greater than the left target value")),$r=e=>e&&Tr.ro.includes(e),Br=e=>!e||e===Tr.fH.None,Hr=[{required:!0,message:(0,s.t)("Required")}],jr=[{required:!0,message:(0,s.t)("Required")},({getFieldValue:e})=>({validator:Nr(e("targetValueRight"))})],zr=[{required:!0,message:(0,s.t)("Required")},({getFieldValue:e})=>({validator:Lr(e("targetValueLeft"))})],Wr=["targetValueRight"],Ur=["targetValueLeft"],qr=(e,t)=>Br(e.operator)!==Br(t.operator)||$r(e.operator)!==$r(t.operator),Vr=({showOnlyNone:e}={})=>(0,Ee.Y)(yn.eI,{name:"operator",label:(0,s.t)("Operator"),rules:Hr,initialValue:Ir[0].value,children:(0,Ee.Y)(Yr.A,{ariaLabel:(0,s.t)("Operator"),options:e?[Ir[0]]:Ir})}),Gr=({getFieldValue:e})=>Br(e("operator"))?(0,Ee.Y)(it.fI,{gutter:12,children:(0,Ee.Y)(it.fv,{span:6,children:Vr()})}):$r(e("operator"))?(0,Ee.FD)(it.fI,{gutter:12,children:[(0,Ee.Y)(it.fv,{span:9,children:(0,Ee.Y)(yn.eI,{name:"targetValueLeft",label:(0,s.t)("Left value"),rules:jr,dependencies:Wr,validateTrigger:"onBlur",trigger:"onBlur",children:(0,Ee.Y)(Rr,{})})}),(0,Ee.Y)(it.fv,{span:6,children:Vr()}),(0,Ee.Y)(it.fv,{span:9,children:(0,Ee.Y)(yn.eI,{name:"targetValueRight",label:(0,s.t)("Right value"),rules:zr,dependencies:Ur,validateTrigger:"onBlur",trigger:"onBlur",children:(0,Ee.Y)(Rr,{})})})]}):(0,Ee.FD)(it.fI,{gutter:12,children:[(0,Ee.Y)(it.fv,{span:6,children:Vr()}),(0,Ee.Y)(it.fv,{span:18,children:(0,Ee.Y)(yn.eI,{name:"targetValue",label:(0,s.t)("Target value"),rules:Hr,children:(0,Ee.Y)(Rr,{})})})]}),Kr=({config:e,onChange:t,columns:a=[],extraColorChoices:o=[]})=>{var r;const i=[{value:(d=(0,I.DP)()).colors.success.light1,label:(0,s.t)("success")},{value:d.colors.alert.light1,label:(0,s.t)("alert")},{value:d.colors.error.light1,label:(0,s.t)("error")},{value:d.colors.success.dark1,label:(0,s.t)("success dark")},{value:d.colors.alert.dark1,label:(0,s.t)("alert dark")},{value:d.colors.error.dark1,label:(0,s.t)("error dark")}],[l,c]=(0,n.useState)(void 0===e||(null==e?void 0:e.colorScheme)!==Or.m.Green&&(null==e?void 0:e.colorScheme)!==Or.m.Red);var d;return(0,Ee.FD)(yn.lV,{onFinish:t,initialValues:e,requiredMark:"optional",layout:"vertical",children:[(0,Ee.FD)(it.fI,{gutter:12,children:[(0,Ee.Y)(it.fv,{span:12,children:(0,Ee.Y)(yn.eI,{name:"column",label:(0,s.t)("Column"),rules:Hr,initialValue:null==(r=a[0])?void 0:r.value,children:(0,Ee.Y)(Yr.A,{ariaLabel:(0,s.t)("Select column"),options:a})})}),(0,Ee.Y)(it.fv,{span:12,children:(0,Ee.Y)(yn.eI,{name:"colorScheme",label:(0,s.t)("Color scheme"),rules:Hr,initialValue:i[0].value,children:(0,Ee.Y)(Yr.A,{onChange:e=>(e=>{c(!(e===Or.m.Green||e===Or.m.Red))})(e),ariaLabel:(0,s.t)("Color scheme"),options:[...i,...o]})})})]}),(0,Ee.Y)(yn.eI,{noStyle:!0,shouldUpdate:qr,children:l?Gr:(0,Ee.Y)(it.fI,{gutter:12,children:(0,Ee.Y)(it.fv,{span:6,children:Vr({showOnlyNone:!0})})})}),(0,Ee.Y)(yn.eI,{children:(0,Ee.Y)(Fr,{children:(0,Ee.Y)(Ye.A,{htmlType:"submit",buttonStyle:"primary",children:(0,s.t)("Apply")})})})]})},Xr=({title:e,columns:t,onChange:a,config:o,children:r,extraColorChoices:i,...l})=>{const[s,c]=(0,n.useState)(!1),d=(0,n.useCallback)((e=>{c(!1),a(e)}),[a]);return(0,Ee.Y)(Ea.A,{title:e,content:(0,Ee.Y)(Kr,{onChange:d,config:o,columns:t,extraColorChoices:i}),visible:s,onVisibleChange:c,trigger:["click"],overlayStyle:{width:"450px"},...l,children:r})},Qr=I.I4.div`
  ${({theme:e})=>P.AH`
    padding: ${e.gridUnit}px;
    border: solid 1px ${e.colors.grayscale.light2};
    border-radius: ${e.gridUnit}px;
  `}
`,Jr=(0,I.I4)(ga.a2)`
  &,
  & > div {
    margin-bottom: ${({theme:e})=>e.gridUnit}px;
    :last-child {
      margin-bottom: 0;
    }
  }
`,Zr=I.I4.button`
  ${({theme:e})=>P.AH`
    color: ${e.colors.grayscale.light1};
    height: 100%;
    width: ${6*e.gridUnit}px;
    border: none;
    border-right: solid 1px ${e.colors.grayscale.dark2}0C;
    padding: 0;
    outline: none;
    border-bottom-left-radius: 3px;
    border-top-left-radius: 3px;
  `}
`,ei=({value:e,onChange:t,columnOptions:a,verboseMap:o,removeIrrelevantConditions:r,extraColorChoices:i,...l})=>{const c=(0,I.DP)(),[d,u]=(0,n.useState)(null!=e?e:[]);(0,n.useEffect)((()=>{t&&t(d)}),[d,t]),(0,n.useEffect)((()=>{if(r){const e=d.filter((e=>a.some((t=>(null==t?void 0:t.value)===(null==e?void 0:e.column)))));e.length!==d.length&&r&&u(e)}}),[d,a,r]);const h=({column:e,operator:t,targetValue:a,targetValueLeft:n,targetValueRight:r})=>{var i;const l=null!=(i=e&&(null==o?void 0:o[e]))?i:e;switch(t){case Tr.fH.None:return`${l}`;case Tr.fH.Between:return`${n} ${Tr.fH.LessThan} ${l} ${Tr.fH.LessThan} ${r}`;case Tr.fH.BetweenOrEqual:return`${n} ${Tr.fH.LessOrEqual} ${l} ${Tr.fH.LessOrEqual} ${r}`;case Tr.fH.BetweenOrLeftEqual:return`${n} ${Tr.fH.LessOrEqual} ${l} ${Tr.fH.LessThan} ${r}`;case Tr.fH.BetweenOrRightEqual:return`${n} ${Tr.fH.LessThan} ${l} ${Tr.fH.LessOrEqual} ${r}`;default:return`${l} ${t} ${a}`}};return(0,Ee.FD)("div",{children:[(0,Ee.Y)(xt.A,{...l}),(0,Ee.FD)(Qr,{children:[d.map(((e,t)=>(0,Ee.FD)(Jr,{children:[(0,Ee.Y)(Zr,{onClick:()=>(e=>{u((t=>t.filter(((t,a)=>a!==e))))})(t),children:(0,Ee.Y)(W.A.XSmall,{iconColor:c.colors.grayscale.light1})}),(0,Ee.Y)(Xr,{title:(0,s.t)("Edit formatter"),config:e,columns:a,onChange:e=>((e,t)=>{const a=[...d];a.splice(t,1,e),u(a)})(e,t),destroyTooltipOnHide:!0,extraColorChoices:i,children:(0,Ee.FD)(ga.a2,{withCaret:!0,children:[(0,Ee.Y)(ga.JU,{children:h(e)}),(0,Ee.Y)(ga.Bt,{children:(0,Ee.Y)(W.A.CaretRight,{iconColor:c.colors.grayscale.light1})})]})})]},t))),(0,Ee.Y)(Xr,{title:(0,s.t)("Add new formatter"),columns:a,onChange:e=>{u((t=>[...t,e]))},destroyTooltipOnHide:!0,extraColorChoices:i,children:(0,Ee.FD)(ga.JG,{children:[(0,Ee.Y)(W.A.PlusSmall,{iconColor:c.colors.grayscale.light1}),(0,s.t)("Add new color formatter")]})})]})]})};var ti=a(26206),ai=a(21335);const ni=(0,n.createContext)(!1),oi=(0,n.createContext)([{},()=>{}]),ri=I.I4.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
`,ii=(e={},t)=>{if(t.canDrop)return{...e,[t.key]:t.canDrop};if(t.key){const a={...e};return delete a[t.key],a}return e},li=({children:e})=>{const t=(0,ai.u)(),[a,o]=(0,n.useState)(t.getMonitor().isDragging());(0,n.useEffect)((()=>{const e=t.getMonitor(),a=e.subscribeToStateChange((()=>{if("dragIndex"in(e.getItem()||{}))return;const t=e.isDragging();o(t)}));return()=>{a()}}),[t]);const r=(0,n.useReducer)(ii,{});return(0,Ee.Y)(oi.Provider,{value:r,children:(0,Ee.Y)(ni.Provider,{value:a,children:(0,Ee.Y)(ri,{children:e})})})};function si({displayGhostButton:e=!0,accept:t,valuesRenderer:a,isLoading:o,...r}){const i=(0,I.DP)(),l=r.canDrop,c=r.canDropValue,d=(0,n.useCallback)((e=>{var t;return l(e)&&(null==(t=null==c?void 0:c(e.value))||t)}),[l,c]),[{isOver:u,canDrop:h},p]=(0,ti.H)({accept:o?[]:t,drop:e=>{r.onDrop(e),null==r.onDropValue||r.onDropValue(e.value)},canDrop:d,collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),type:e.getItemType()})}),f=(0,n.useContext)(oi)[1];(0,n.useEffect)((()=>(f({key:r.name,canDrop:d}),()=>{f({key:r.name})})),[f,r.name,d]);const g=(0,n.useContext)(ni),m=(0,n.useMemo)((()=>a()),[a]);return(0,Ee.FD)("div",{ref:p,children:[(0,Ee.Y)(ga.B3,{children:(0,Ee.Y)(xt.A,{...r})}),(0,Ee.FD)(ga.f$,{canDrop:h,isOver:u,isDragging:g,isLoading:o,children:[m,e&&(0,Ee.FD)(ga.JG,{cancelHover:!r.onClickGhostButton,onClick:r.onClickGhostButton,children:[(0,Ee.Y)(W.A.PlusSmall,{iconColor:i.colors.grayscale.light1}),(0,s.t)(r.ghostButtonText)]})]})]})}var ci,di=a(49953);!function(e){e.Isoline="ISOLINE",e.Isoband="ISOBAND"}(ci||(ci={}));const ui=I.I4.div`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
`,hi=(0,I.I4)(it.fI)`
  width: 100%;
  gap: ${({theme:e})=>2*e.gridUnit}px;
`,pi=e=>e&&(e=>!(Object.keys(e).length<4)&&e.upperThreshold&&e.lowerThreshold)(e)?ci.Isoband:ci.Isoline,fi=(e,t)=>{const a={lowerThreshold:[],upperThreshold:[],strokeWidth:[],color:[]},n=(0,di.A)(t.lowerThreshold);if(n&&a.lowerThreshold.push(n),e===ci.Isoline){const e=(0,di.A)(t.strokeWidth);e&&a.strokeWidth.push(e)}if(e===ci.Isoband){const e=(0,di.A)(t.upperThreshold);e&&a.upperThreshold.push(e),!e&&!n&&t.upperThreshold&&t.lowerThreshold&&parseFloat(t.lowerThreshold)>=parseFloat(t.upperThreshold)&&(a.lowerThreshold.push((0,s.t)("Lower threshold must be lower than upper threshold")),a.upperThreshold.push((0,s.t)("Upper threshold must be greater than lower threshold")))}return a},gi={lowerThreshold:void 0,upperThreshold:void 0,color:void 0,strokeWidth:void 0},mi=({value:e,onSave:t,onClose:a})=>{const[o,r]=(0,n.useState)(pi(e)),[i,l]=(0,n.useState)(e||gi),[c,d]=(0,n.useState)(fi(pi(e),e||gi)),[u,h]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=o===ci.Isoband,t=Boolean(i.lowerThreshold)||0===i.lowerThreshold,a=Boolean(i.upperThreshold)||0===i.upperThreshold,n=Boolean(i.strokeWidth)||0===i.strokeWidth,r="object"==typeof i.color&&"r"in i.color&&"number"==typeof i.color.r&&"g"in i.color&&"number"==typeof i.color.g&&"b"in i.color&&"number"==typeof i.color.b&&"a"in i.color&&"number"==typeof i.color.a,l=fi(o,i);l!==c&&d(l);const s=e?t&&a&&r:t&&r&&n;s!==u&&h(s)}),[i,o]);const p=e=>{const t={...i};t.color={...e,a:100},l(t)},f=e=>{const t={...i};t.lowerThreshold=e,l(t)};return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.FD)(tt.Ay,{id:"contour-edit-tabs",onChange:e=>{r(e)},defaultActiveKey:pi(e),children:[(0,Ee.Y)(tt.Ay.TabPane,{className:"adhoc-filter-edit-tab",tab:(0,s.t)("Isoline"),children:(0,Ee.FD)("div",{className:"isoline-popover-section",children:[(0,Ee.Y)(hi,{children:(0,Ee.FD)(it.fv,{flex:"1",children:[(0,Ee.Y)(xt.A,{name:"isoline-threshold",label:(0,s.t)("Threshold"),description:(0,s.t)("Defines the value that determines the boundary between different regions or levels in the data "),validationErrors:c.lowerThreshold,hovered:!0}),(0,Ee.Y)(cn.A,{value:i.lowerThreshold,onChange:f})]})}),(0,Ee.FD)(hi,{children:[(0,Ee.FD)(it.fv,{flex:"1",children:[(0,Ee.Y)(xt.A,{name:"isoline-stroke-width",label:(0,s.t)("Stroke Width"),description:(0,s.t)("The width of the Isoline in pixels"),validationErrors:c.strokeWidth,hovered:!0}),(0,Ee.Y)(cn.A,{value:i.strokeWidth||"",onChange:e=>{const t={...i};t.strokeWidth=e,l(t)}})]}),(0,Ee.FD)(it.fv,{flex:"1",children:[(0,Ee.Y)(xt.A,{name:"isoline-color",label:(0,s.t)("Color"),description:(0,s.t)("The color of the isoline"),validationErrors:c.color,hovered:!0}),(0,Ee.Y)(Oa,{value:"object"==typeof i&&(null==i?void 0:i.color),onChange:p})]})]})]},ci.Isoline)},ci.Isoline),(0,Ee.Y)(tt.Ay.TabPane,{className:"adhoc-filter-edit-tab",tab:(0,s.t)("Isoband"),children:(0,Ee.FD)("div",{className:"isoline-popover-section",children:[(0,Ee.FD)(hi,{children:[(0,Ee.FD)(it.fv,{flex:"1",children:[(0,Ee.Y)(xt.A,{name:"isoband-threshold-lower",label:(0,s.t)("Lower Threshold"),description:(0,s.t)("The lower limit of the threshold range of the Isoband"),validationErrors:c.lowerThreshold,hovered:!0}),(0,Ee.Y)(cn.A,{value:i.lowerThreshold||"",onChange:f})]}),(0,Ee.FD)(it.fv,{flex:"1",children:[(0,Ee.Y)(xt.A,{name:"isoband-threshold-upper",label:(0,s.t)("Upper Threshold"),description:(0,s.t)("The upper limit of the threshold range of the Isoband"),validationErrors:c.upperThreshold,hovered:!0}),(0,Ee.Y)(cn.A,{value:i.upperThreshold||"",onChange:e=>{const t={...i};t.upperThreshold=e,l(t)}})]})]}),(0,Ee.Y)(hi,{children:(0,Ee.FD)(it.fv,{flex:"1",children:[(0,Ee.Y)(xt.A,{name:"isoband-color",label:(0,s.t)("Color"),description:(0,s.t)("The color of the isoband"),validationErrors:c.color,hovered:!0}),(0,Ee.Y)(Oa,{value:null==i?void 0:i.color,onChange:p})]})})]},ci.Isoband)},ci.Isoband)]}),(0,Ee.FD)(ui,{children:[(0,Ee.Y)(Ye.A,{buttonSize:"small",onClick:a,cta:!0,children:(0,s.t)("Close")}),(0,Ee.Y)(Ye.A,{disabled:!u||Object.keys(c).some((e=>c[e].length>0)),buttonStyle:"primary",buttonSize:"small",className:"m-r-5",onClick:()=>{if(u&&t){const e=o===ci.Isoline?(e=>({color:e.color,lowerThreshold:e.lowerThreshold,upperThreshold:void 0,strokeWidth:e.strokeWidth}))(i):(e=>({color:e.color,lowerThreshold:e.lowerThreshold,upperThreshold:e.upperThreshold,strokeWidth:void 0}))(i);t((e=>{const t={...e};return["lowerThreshold","upperThreshold","strokeWidth"].forEach((e=>{t[e]=Number(t[e])})),t})(e)),a&&a()}},cta:!0,children:(0,s.t)("Save")})]})]})},vi=({value:e,saveContour:t,isControlled:a,visible:o,toggleVisibility:r,...i})=>{const[l,s]=(0,n.useState)(!1),c=a?o:l,d=a&&r?r:s,u=(0,Ee.Y)(mi,{value:e,onSave:t,onClose:()=>d(!1)});return(0,Ee.Y)(ut.A,{trigger:"click",content:u,defaultVisible:c,visible:c,onVisibleChange:d,destroyTooltipOnHide:!0,children:i.children})};var bi=a(30535),yi=a(70700);const xi=(0,I.I4)(st.W)`
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`;function wi({children:e,index:t,clickClose:a,withCaret:o,isExtra:r,datasourceWarningMessage:i,canDelete:l=!0}){const c=(0,I.DP)(),d=(0,n.useCallback)((e=>{e.stopPropagation(),a(t)}),[a,t]);return(0,Ee.FD)(ga.a2,{withCaret:o,children:[l&&(0,Ee.Y)(ga.Gh,{role:"button",onClick:d,children:(0,Ee.Y)(W.A.XSmall,{iconColor:c.colors.grayscale.light1})}),(0,Ee.Y)(ga.JU,{children:e}),(!!i||r)&&(0,Ee.Y)(xi,{icon:"exclamation-triangle",placement:"top",bsStyle:"warning",tooltip:i||(0,s.t)("\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              ")}),o&&(0,Ee.Y)(ga.Bt,{children:(0,Ee.Y)(W.A.CaretRight,{iconColor:c.colors.grayscale.light1})})]})}const Ci=I.I4.div`
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`;function Si(e){const{index:t,label:a,tooltipTitle:o,column:r,type:i,onShiftOptions:l,clickClose:s,withCaret:c,isExtra:d,datasourceWarningMessage:u,canDelete:h=!0,tooltipOverlay:p,...f}=e,g=(0,n.useRef)(null),m=(0,n.useRef)(null),[{isDragging:v},b]=(0,bi.i)({item:{type:i,dragIndex:t},collect:e=>({isDragging:e.isDragging()})}),[,y]=(0,ti.H)({accept:i,hover:(e,a)=>{var n;if(!g.current)return;const{dragIndex:o}=e,r=t;if(o===r)return;const i=null==(n=g.current)?void 0:n.getBoundingClientRect(),s=(i.bottom-i.top)/2,c=a.getClientOffset(),d=c?c.y-i.top:0;o<r&&d<s||o>r&&d>s||(l(o,r),e.dragIndex=r)}}),x=!v&&o&&a&&o!==a||!v&&m&&m.current&&m.current.scrollWidth>m.current.clientWidth||!v&&p,w=()=>x?p?(0,Ee.Y)(z.m,{overlay:p,children:(0,Ee.Y)("span",{children:a})}):(0,Ee.Y)(z.m,{title:o||a,children:(0,Ee.Y)("span",{children:a})}):(0,Ee.Y)("span",{children:a}),C=()=>{const e=r&&(0,yi.q0)(r)?{verbose_name:r.label,expression:r.sqlExpression}:r;return(0,Ee.Y)(Sn.V,{column:e,labelRef:m,showType:!0})};return b(y(g)),(0,Ee.Y)(ga.yJ,{ref:g,...f,children:(0,Ee.Y)(wi,{index:t,clickClose:s,withCaret:c,isExtra:d,datasourceWarningMessage:u,canDelete:h,children:(0,Ee.Y)((()=>a?(0,Ee.Y)(Ci,{ref:m,children:(0,Ee.Y)(w,{})}):r?(0,Ee.Y)(Ci,{children:(0,Ee.Y)(C,{})}):null),{})})})}const Ai=(0,I.I4)(Si)`
  max-width: 100%;
  min-width: 100%;
`,ki=I.I4.li`
  display: flex;
  align-items: center;
`,Ei=I.I4.div`
  background-color: ${({formattedColor:e})=>e};
  height: ${({theme:e})=>e.gridUnit}px;
  width: ${({theme:e})=>e.gridUnit}px;
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`,_i=({contour:e,index:t,saveContour:a,onClose:n,onShift:o})=>{const{lowerThreshold:r,upperThreshold:i,color:l,strokeWidth:c}=e,d=i,u=l?`rgba(${l.r}, ${l.g}, ${l.b}, 1)`:"undefined",h=d?(p=[r||-1,i],`${(0,s.t)("Threshold")}: [${p[0]}, ${p[1]}], color: ${u}`):((e,t)=>`${(0,s.t)("Threshold")}: ${e}, ${(0,s.t)("color")}: ${u}, ${(0,s.t)("stroke width")}: ${t}`)(r||-1,c);var p;const f=(0,Ee.FD)("div",{className:"contour-tooltip-overlay",children:[(0,Ee.FD)(ki,{children:[(0,s.t)("Threshold: "),d?`[${r}, ${i}]`:`${r}`]}),(0,Ee.FD)(ki,{children:[(0,s.t)("Color: "),(0,Ee.Y)(Ei,{formattedColor:u})," ",u]}),!d&&(0,Ee.Y)(ki,{children:`${(0,s.t)("Stroke Width:")} ${c}`})]});return(0,Ee.Y)(vi,{saveContour:a,value:e,children:(0,Ee.Y)(Ai,{index:t,label:h,type:"ContourOption",withCaret:!0,clickClose:n,onShiftOptions:o,tooltipOverlay:f})})},Mi=[{lowerThreshold:4,color:{r:255,g:0,b:255,a:100},strokeWidth:1,zIndex:0},{lowerThreshold:5,color:{r:0,g:255,b:0,a:100},strokeWidth:2,zIndex:1},{lowerThreshold:6,upperThreshold:10,color:{r:0,g:0,b:255,a:100},zIndex:2}],Di=(0,I.I4)("div")`
  position: relative;
  width: calc(100% - ${({theme:e})=>e.gridUnit}px);
  bottom: ${({theme:e})=>4*e.gridUnit}px;
  left: 0;
`,Ti=e=>(0,Tr.wS)(e)?e.column_name:e;class Oi{constructor(e,t,a){this.values=void 0,this.options=void 0,this.multi=void 0,this.options=e,this.multi=t,this.values=(0,fe.A)(a).map((t=>t&&(0,yi.eh)(t)&&t in e?e[t]:(0,yi.eh)(t)?null:t)).filter(Boolean)}add(e){(0,yi.eh)(e)&&e in this.options?this.values.push(this.options[e]):(0,yi.eh)(e)||this.values.push(e)}del(e){this.values.splice(e,1)}replace(e,t){this.values[e]&&(this.values[e]=(0,yi.eh)(t)?this.options[t]:t)}swap(e,t){[this.values[e],this.values[t]]=[this.values[t],this.values[e]]}has(e){return this.values.some((t=>(0,yi.eh)(e)?t.column_name===e||t.label===e:t.column_name===e.label||t.label===e.label))}getValues(){return this.multi?this.values.map(Ti):this.values.length>0?Ti(this.values[0]):void 0}}var Yi=a(7350),Ri=a.n(Yi);const Fi=(0,I.I4)(it.l6)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,Ii=({columns:e,editedColumn:t,getCurrentTab:a,hasCustomLabel:r,isTemporal:i,label:l,onChange:c,onClose:d,setDatasetModal:u,setLabel:h,disabledTabs:p=new Set})=>{const f=(0,o.d4)((e=>e.explore.datasource.type)),[g]=(0,n.useState)(l),[m,v,b]=(e=>e?(0,yi.q0)(e)?[e,void 0,void 0]:(0,Tr.oU)(e)?[void 0,e,void 0]:[void 0,void 0,e]:[void 0,void 0,void 0])(t),[y,x]=(0,n.useState)(m),[w,C]=(0,n.useState)(v),[S,A]=(0,n.useState)(b),[k,E]=(0,n.useState)(null),[_,M,D]=function(e,t){const[a,o]=(0,n.useState)(q._R),[r,i]=(0,n.useState)(q.Z_),[l,s]=(0,n.useState)(0),[c,d]=(0,n.useState)(0),[u,h]=(0,n.useState)(0),[p,f]=(0,n.useState)(0),[g,m]=(0,n.useState)(a),[v,b]=(0,n.useState)(r),[y,x]=(0,n.useState)(!1),w=(0,n.useCallback)((e=>{e.preventDefault(),s(e.clientX),d(e.clientY)}),[]),C=(0,n.useCallback)((()=>{x(!1)}),[]),S=(0,n.useCallback)((e=>{h(e.clientX),f(e.clientY),x(!0)}),[]);(0,n.useEffect)((()=>{y?document.addEventListener("mousemove",w):(m(a),b(r),document.removeEventListener("mousemove",w))}),[w,y]);const A=(0,n.useCallback)(Ri()((({dragStartX:e,dragStartY:t,dragStartWidth:a,dragStartHeight:n,clientX:r,clientY:l,minWidth:s,minHeight:c})=>{o(Math.max(a+(r-e),s)),i(Math.max(n+(l-t),c))}),50),[i,o]);return(0,n.useEffect)((()=>{y&&A({dragStartX:u,dragStartY:p,dragStartWidth:g,dragStartHeight:v,clientX:l,clientY:c,minWidth:e,minHeight:t})}),[y,l,c,g,v,u,p]),(0,n.useEffect)((()=>(document.addEventListener("mouseup",C),()=>document.removeEventListener("mouseup",C))),[C]),[(0,Ee.Y)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:S,className:"fa fa-expand edit-popover-resize text-muted"}),a,r]}(q._R,q.Z_),T=(0,n.useRef)(null),[O,Y]=(0,n.useMemo)((()=>null==e?void 0:e.reduce(((e,t)=>(t.expression?e[0].push(t):e[1].push(t),e)),[[],[]])),[e]),R=(0,n.useCallback)((e=>{x({label:l,sqlExpression:e,expressionType:"SQL"}),A(void 0),C(void 0)}),[l]),F=(0,n.useCallback)((e=>{const t=O.find((t=>t.column_name===e));C(t),A(void 0),x(void 0),h((null==t?void 0:t.verbose_name)||(null==t?void 0:t.column_name)||"")}),[O,h]),I=(0,n.useCallback)((e=>{const t=Y.find((t=>t.column_name===e));C(void 0),A(t),x(void 0),h((null==t?void 0:t.verbose_name)||(null==t?void 0:t.column_name)||"")}),[h,Y]),N=m?"sqlExpression":b||0===O.length?"simple":"saved";(0,n.useEffect)((()=>{a(N),E(N)}),[N,a,E]),(0,n.useEffect)((()=>{if(void 0===y&&"sqlExpression"===k&&r){const e=(null==S?void 0:S.column_name)||(null==w?void 0:w.expression)||"";x({label:l,sqlExpression:e,expressionType:"SQL"})}}),[y,N,r,a,l,w,S,k]);const L=(0,n.useCallback)((()=>{y&&y.label!==l&&(y.label=l);const e=y||w||S;e&&(c(e),d())}),[y,l,c,d,w,S]),$=(0,n.useCallback)((()=>{C(v),A(b),x(m),d()}),[m,v,b,d]),B=(0,n.useCallback)((e=>{var t;a(e),E(e),null==(t=T.current)||t.editor.focus()}),[a]),H=(0,n.useCallback)((()=>{var e;null==(e=T.current)||e.editor.resize()}),[]),j=()=>{u&&u(!0),d()},z=y||w||S,W=g!==l||(null==w?void 0:w.column_name)!==(null==v?void 0:v.column_name)||(null==S?void 0:S.column_name)!==(null==b?void 0:b.column_name)||(null==y?void 0:y.sqlExpression)!==(null==m?void 0:m.sqlExpression),U=(0,s.t)("Saved expressions"),V=(0,s.t)("Column"),G=(0,n.useMemo)((()=>wn.A.concat((0,An.r)(e))),[e]);return(0,Ee.FD)(yn.lV,{layout:"vertical",id:"metrics-edit-popover",children:[(0,Ee.FD)(tt.Ay,{id:"adhoc-metric-edit-tabs",defaultActiveKey:N,onChange:B,className:"adhoc-metric-edit-tabs",allowOverflow:!0,css:P.AH`
          height: ${D}px;
          width: ${M}px;
        `,children:[(0,Ee.Y)(tt.Ay.TabPane,{tab:(0,s.t)("Saved"),disabled:p.has("saved"),children:O.length>0?(0,Ee.Y)(yn.eI,{label:U,children:(0,Ee.Y)(Fi,{ariaLabel:U,value:null==w?void 0:w.column_name,onChange:F,allowClear:!0,autoFocus:!w,placeholder:(0,s.t)("%s column(s)",O.length),options:O.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,customLabel:(0,Ee.Y)(Sn.V,{column:e,showType:!0}),key:e.column_name})))})}):f===pe.cT.Table?(0,Ee.Y)(bn.u7,{image:"empty.svg",title:i?(0,s.t)("No temporal columns found"):(0,s.t)("No saved expressions found"),description:i?(0,s.t)('Add calculated temporal columns to dataset in "Edit datasource" modal'):(0,s.t)('Add calculated columns to dataset in "Edit datasource" modal')}):(0,Ee.Y)(bn.u7,{image:"empty.svg",title:i?(0,s.t)("No temporal columns found"):(0,s.t)("No saved expressions found"),description:i?(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:j,children:(0,s.t)("Create a dataset")})," ",(0,s.t)(" to mark a column as a time column")]}):(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:j,children:(0,s.t)("Create a dataset")})," ",(0,s.t)(" to add calculated columns")]})})},"saved"),(0,Ee.Y)(tt.Ay.TabPane,{tab:(0,s.t)("Simple"),disabled:p.has("simple"),children:i&&0===Y.length?(0,Ee.Y)(bn.u7,{image:"empty.svg",title:(0,s.t)("No temporal columns found"),description:f===pe.cT.Table?(0,s.t)('Mark a column as temporal in "Edit datasource" modal'):(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:j,children:(0,s.t)("Create a dataset")})," ",(0,s.t)(" to mark a column as a time column")]})}):(0,Ee.Y)(yn.eI,{label:V,children:(0,Ee.Y)(it.l6,{ariaLabel:V,value:null==S?void 0:S.column_name,onChange:I,allowClear:!0,autoFocus:!S,placeholder:(0,s.t)("%s column(s)",Y.length),options:Y.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,customLabel:(0,Ee.Y)(Sn.V,{column:e,showType:!0}),key:e.column_name})))})})},"simple"),(0,Ee.Y)(tt.Ay.TabPane,{tab:(0,s.t)("Custom SQL"),disabled:p.has("sqlExpression"),children:(0,Ee.Y)(xn.YU,{value:(null==y?void 0:y.sqlExpression)||(null==S?void 0:S.column_name)||(null==w?void 0:w.expression),onFocus:H,showLoadingForImport:!0,onChange:R,width:"100%",height:D-80+"px",showGutter:!1,editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0,ref:T,keywords:G})},"sqlExpression")]}),(0,Ee.FD)("div",{children:[(0,Ee.Y)(Ye.A,{buttonSize:"small",onClick:$,cta:!0,children:(0,s.t)("Close")}),(0,Ee.Y)(Ye.A,{disabled:!z||!W,buttonStyle:"primary",buttonSize:"small",onClick:L,cta:!0,children:(0,s.t)("Save")}),_]})]})},Pi=(0,I.I4)(yt.pd)`
  border-radius: ${({theme:e})=>e.borderRadius};
  height: 26px;
  padding-left: ${({theme:e})=>2.5*e.gridUnit}px;
`,Ni=({title:e,onChange:t,isEditDisabled:a,hasCustomLabel:o})=>{const[r,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>{i(!0)}),[]),u=(0,n.useCallback)((()=>{i(!1)}),[]),h=(0,n.useCallback)((()=>{c(!0)}),[]),p=(0,n.useCallback)((()=>{c(!1)}),[]),f=(0,n.useCallback)((e=>{""===e.target.value&&t(e),p()}),[p,t]),g=(0,s.t)("My column");return a?(0,Ee.Y)("span",{children:e||g}):l?(0,Ee.Y)(Pi,{type:"text",placeholder:e,value:o?e:"",autoFocus:!0,onChange:t,onBlur:f}):(0,Ee.Y)(z.m,{placement:"top",title:(0,s.t)("Click to edit label"),children:(0,Ee.FD)("span",{className:"AdhocMetricEditPopoverTitle inline-editable",onMouseOver:d,onMouseOut:u,onClick:h,onBlur:p,role:"button",tabIndex:0,children:[e||g," ",(0,Ee.Y)("i",{className:"fa fa-pencil",style:{color:r?"black":"grey"}})]})})},Li=(0,s.t)("My column"),$i=({columns:e,editedColumn:t,onColumnEdit:a,isControlledComponent:r,children:i,isTemporal:l,disabledTabs:c,...d})=>{const u=(0,o.d4)((e=>e.explore.datasource)),[h,p]=(0,n.useState)(Li),[f,g]=(0,n.useState)(!1),[m,v]=(0,n.useState)(!0),[b,y]=(0,n.useState)(!1),[x,w]=(0,n.useState)(!1);let C=Li;t&&(0,Tr.wS)(t)?C=t.verbose_name||t.column_name:t&&(0,yi.q0)(t)&&(C=t.label||Li),(0,n.useEffect)((()=>{p(C)}),[C,f]);const S=(0,n.useCallback)((e=>{g(e)}),[]),A=(0,n.useCallback)((()=>{g(!1)}),[]),{visible:k,handleTogglePopover:E,handleClosePopover:_}=r?{visible:d.visible,handleTogglePopover:d.togglePopover,handleClosePopover:d.closePopover}:{visible:f,handleTogglePopover:S,handleClosePopover:A},M=(0,n.useCallback)((e=>{v("sqlExpression"!==e)}),[]),D=(0,n.useMemo)((()=>(0,Ee.Y)(vn.y,{children:(0,Ee.Y)(Ii,{editedColumn:t,columns:e,setDatasetModal:w,onClose:_,onChange:a,hasCustomLabel:b,label:h,setLabel:p,getCurrentTab:M,isTemporal:l,disabledTabs:c})})),[e,t,M,b,_,l,a,h,c]),T=(0,n.useCallback)((e=>{p(e.target.value),y(!0)}),[p,y]),O=(0,n.useMemo)((()=>(0,Ee.Y)(Ni,{title:h,onChange:T,isEditDisabled:m,hasCustomLabel:b})),[b,m,T,h]);return(0,Ee.FD)(Ee.FK,{children:[x&&(0,Ee.Y)(be.D,{visible:x,onHide:()=>w(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:u}),(0,Ee.Y)(ut.A,{trigger:"click",content:D,defaultVisible:k,visible:k,onVisibleChange:E,title:O,destroyTooltipOnHide:!0,children:i})]})};var Bi=a(23133),Hi=a(90422),ji=a(59638);function zi({adhocFilter:e,options:t,datasource:a,onFilterEdit:n,onShiftOptions:o,onClickClose:r,partitionColumn:i,index:l}){const{actualTimeRange:c,title:d}=(0,ji.K)(e);return(0,Ee.Y)(Bi.A,{adhocFilter:e,options:t,datasource:a,onFilterEdit:n,partitionColumn:i,children:(0,Ee.Y)(Si,{index:l,label:null!=c?c:e.getDefaultLabel(),tooltipTitle:null!=d?d:e.getTooltipTitle(),clickClose:r,onShiftOptions:o,type:un.S.FilterOption,withCaret:!0,isExtra:e.isExtra,datasourceWarningMessage:e.datasourceWarning?(0,s.t)("This filter might be incompatible with current dataset"):void 0},l)},l)}var Wi=a(39942),Ui=a(2511);const{warning:qi}=at.A,Vi=[un.S.Column,un.S.Metric,un.S.MetricOption,un.S.AdhocMetricOption],Gi=e=>!(e instanceof Hi.A)&&(null==e?void 0:e.expressionType);var Ki=a(91778),Xi=a(87903);const Qi={},Ji=[un.S.Column,un.S.Metric],Zi=(e,t,a)=>e?(0,fe.A)(e).filter((e=>(0,Ki.S_)(e)?t.some((t=>t.metric_name===e)):!(0,Ki.IN)(e)||a.some((t=>t.column_name===e.column.column_name)))).map((e=>{if(!(e=>e&&!(e instanceof hn.A)&&"string"!=typeof e&&e.expressionType)(e))return e;if((0,Ki.IN)(e)){const t=a.find((t=>t.column_name===e.column.column_name));if(t)return new hn.A({...e,column:t})}return new hn.A(e)})):[],el=(e,t,a)=>{var n;return null!=(n=null==e?void 0:e.filter((e=>{var n;return Array.isArray(t)?!t.includes(null!=(n=e.metric_name)?n:"")||e.metric_name===a:e})))?n:[]};var tl=a(3173),al=a(31940),nl=a(83957),ol=a(94071);const rl={allowNewOptions:!0,controlType:"Select",label:(0,s.t)("D3 format"),description:ol.YH,options:ol.Bb.map((e=>({value:e[0],label:e[1]}))),defaultValue:ol.Bb[0][0],creatable:!0,minWidth:"14em",debounceDelay:500},il={controlType:"Select",label:(0,s.t)("D3 format"),description:ol.gb,options:ol.lR.map((e=>({value:e[0],label:e[1]}))),defaultValue:ol.lR[0][0],creatable:!0,minWidth:"10em",debounceDelay:500},ll={controlType:"Slider",label:(0,s.t)("Fraction digits"),description:(0,s.t)("Number of decimal digits to round numbers to"),min:0,step:1,max:100,defaultValue:100},sl={controlType:"InputNumber",label:(0,s.t)("Min Width"),description:(0,s.t)("Default minimal column width in pixels, actual width may still be larger than this if other columns don't need much space"),width:120,placeholder:(0,s.t)("auto"),debounceDelay:400,validators:[nl.A]},cl={controlType:"RadioButtonControl",label:(0,s.t)("Text align"),description:(0,s.t)("Horizontal alignment"),width:130,debounceDelay:50,defaultValue:"left",options:[["left",(0,Ee.Y)(W.A.AlignLeftOutlined,{iconSize:"m"})],["center",(0,Ee.Y)(W.A.AlignCenterOutlined,{iconSize:"m"})],["right",(0,Ee.Y)(W.A.AlignRightOutlined,{iconSize:"m"})]]},dl={controlType:"Checkbox",label:(0,s.t)("Show cell bars"),description:(0,s.t)("Whether to display a bar chart background in table columns"),defaultValue:!0,debounceDelay:200},ul={controlType:"Checkbox",label:(0,s.t)("Align +/-"),description:(0,s.t)("Whether to align positive and negative values in cell bar chart at 0"),defaultValue:!1,debounceDelay:200},hl={controlType:"Checkbox",label:(0,s.t)("Color +/-"),description:(0,s.t)("Whether to colorize numeric values by if they are positive or negative"),defaultValue:!1,debounceDelay:200},pl={controlType:"Checkbox",label:(0,s.t)("Truncate Cells"),description:(0,s.t)('Truncate long cells to the "min width" set above'),defaultValue:!1,debounceDelay:400},fl={controlType:"CurrencyControl",label:(0,s.t)("Currency format"),description:(0,s.t)("Customize chart metrics or columns with currency symbols as prefixes or suffixes. Choose a symbol from dropdown or type your own."),debounceDelay:200},gl={d3NumberFormat:rl,d3SmallNumberFormat:{...rl,label:(0,s.t)("Small number format"),description:(0,s.t)("D3 number format for numbers between -1.0 and 1.0, useful when you want to have different significant digits for small and large numbers")},d3TimeFormat:il,fractionDigits:ll,columnWidth:sl,truncateLongCells:pl,horizontalAlign:cl,showCellBars:dl,alignPositiveNegative:ul,colorPositiveNegative:hl,currencyFormat:fl},ml={[Xi.s.String]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["truncateLongCells"]],[Xi.s.Numeric]:[{tab:(0,s.t)("Display"),children:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"right"}}],["showCellBars"],["alignPositiveNegative"],["colorPositiveNegative"]]},{tab:(0,s.t)("Number formatting"),children:[["d3NumberFormat"],["d3SmallNumberFormat"],["currencyFormat"]]}],[Xi.s.Temporal]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["d3TimeFormat"]],[Xi.s.Boolean]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}]]};function vl(e){return!(null==e||!e.tab)}var bl=a(87843);const yl={Slider:Vo,InputNumber:yt.YI,Input:yt.pd,Select:it.l6,Checkbox:Et.A,RadioButtonControl:rt.A.RadioButtonControl,CurrencyControl:tl.A};function xl({name:e,label:t,description:a,width:o,validators:r,onChange:i,value:l,defaultValue:s,controlType:c,...d}){const{gridUnit:u}=(0,I.DP)(),[h,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(void 0===l?s:l),[m,v]=(0,n.useState)(),b=e=>{const t=e&&"object"==typeof e&&"target"in e?"checkbox"===e.target.type||"radio"===e.target.type?e.target.checked:e.target.value:e,a=(null==r?void 0:r.map((e=>!function(e){return null==e||""===e}(t)&&e(t))).filter((e=>!!e)))||[];v(a),g(t),0===a.length&&i&&i(t)},y=yl[c];return(0,Ee.Y)("div",{css:(0,P.AH)({margin:2*u,width:o,maxWidth:"100%",flex:1},"",""),onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:"Checkbox"===c?(0,Ee.Y)(yl.Checkbox,{value:f,onChange:b,name:e,label:t,description:a,validationErrors:m,...d}):(0,Ee.FD)(Ee.FK,{children:[t&&(0,Ee.Y)(xt.A,{name:e,label:t,description:a,validationErrors:m,hovered:h}),(0,Ee.Y)(y,{...d,value:f,onChange:b})]})})}function wl({children:e}){const{gridUnit:t}=(0,I.DP)();return(0,Ee.Y)("div",{css:(0,P.AH)({display:"flex",flexWrap:"nowrap",marginBottom:t,maxWidth:"100%"},"",""),children:e})}function Cl({onChange:e,value:t,children:a}){const o=(0,I.DP)(),r=(0,n.useMemo)((()=>({0:e,[bl.j]:O()(e,bl.j)})),[e]),i=n.Children.map(a,(a=>{if("children"in a.props){const o=Array.isArray(a.props.children)?100/a.props.children.length+"%":void 0;return(0,n.cloneElement)(a,{children:n.Children.map(a.props.children,(a=>{const{name:i,width:l,debounceDelay:s=bl.j,onChange:c}=a.props;return(0,n.cloneElement)(a,{width:l||o,value:null==t?void 0:t[i],debounceDelay:void 0,onChange(a){c&&c(a),s in r||(r[s]=O()(e,s)),r[s]({...t,[i]:a})}})}))})}return a}));return(0,Ee.Y)("div",{css:(0,P.AH)({label:{color:o.colors.text.label,fontSize:o.typography.sizes.s}},"",""),children:i})}function Sl({column:e,configFormLayout:t,onChange:a}){const n=(e,t)=>(0,Ee.Y)(wl,{children:e.map((e=>{const t="string"==typeof e?e:e.name,a="string"==typeof e?{}:"override"in e?e.override:e.config,n={...t in gl?gl[t]:void 0,...a};return(0,Ee.Y)(xl,{name:t,...n},t)}))},t),o=t[void 0===e.type?Xi.s.String:e.type];return vl(o[0])?(0,Ee.Y)(tt.Ay,{centered:!0,children:o.map(((t,o)=>vl(t)?(0,Ee.Y)(tt.Ay.TabPane,{tab:t.tab,children:(0,Ee.Y)(Cl,{onChange:a,value:e.config,children:t.children.map(((e,t)=>n(e,t)))})},o):null))}):(0,Ee.Y)(Cl,{onChange:a,value:e.config,children:o.map(((e,t)=>n(e,t)))})}const Al=(0,n.memo)((function({column:e,onChange:t,configFormLayout:a,width:n,height:o}){const{colors:r,gridUnit:i}=(0,I.DP)(),l=6*i;return(0,Ee.Y)(Ea.A,{title:e.name,content:()=>(0,Ee.Y)(Sl,{column:e,onChange:t,configFormLayout:a}),trigger:"click",placement:"right",overlayInnerStyle:{width:n,height:o},overlayClassName:"column-config-popover",children:(0,Ee.FD)("div",{css:(0,P.AH)({display:"flex",alignItems:"center",cursor:"pointer",padding:`${i}px ${2*i}px`,borderBottom:`1px solid ${r.grayscale.light2}`,position:"relative",paddingRight:l,"&:last-child":{borderBottom:"none"},"&:hover":{background:r.grayscale.light4},"> .fa":{color:r.grayscale.light2},"&:hover > .fa":{color:r.grayscale.light1}},"",""),children:[(0,Ee.Y)(al.P,{type:e.type}),e.name,(0,Ee.Y)("i",{className:"fa fa-caret-right",css:(0,P.AH)({position:"absolute",right:3*i,top:3*i},"","")})]})})})),kl=(e,t)=>D()(e,t),El=(e,t)=>D()(e,t),_l={r:"inherit",y:"1 year ago",m:"1 month ago",w:"1 week ago",c:"custom"},Ml={AnnotationLayerControl:mt,BoundsControl:kt,CheckboxControl:Et.A,CollectionControl:Sa,ColorPickerControl:Oa,ColorSchemeControl:Ya.A,ColumnConfigControl:function({columnsPropsObject:e,appliedColumnNames:t=[],value:a,onChange:o,configFormLayout:r=ml,width:i,height:l,...c}){const{colnames:d,coltypes:u}=e||{};let h=[],p=[];if(0===t.length)h=d||[],p=u||[];else{const e=new Set(t);null==d||d.forEach(((t,a)=>{e.has(t)&&(h.push(t),p.push(null==u?void 0:u[a]))}))}const f=(0,I.DP)(),g=(0,n.useMemo)((()=>{var e;const t={};return null==(e=h)||e.forEach(((e,n)=>{var o;t[e]={name:ur.Uz[e]||e,type:null==(o=p)?void 0:o[n],config:(null==a?void 0:a[e])||{}}})),t}),[a,h,p]),[m,v]=(0,n.useState)(!1),b=e=>g[e]||{};if(!h||0===h.length)return null;const y=h.length>12,x=y&&!m?h.slice(0,10):h;return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(xt.A,{...c}),(0,Ee.FD)("div",{css:(0,P.AH)({border:`1px solid ${f.colors.grayscale.light2}`,borderRadius:f.gridUnit},"",""),children:[x.map((e=>(0,Ee.Y)(Al,{column:b(e),onChange:t=>((e,t)=>{if(o){const n=h&&a?Object.fromEntries(Object.entries(a).filter((([e])=>h.includes(e)))):{...a};o({...n,[e]:t})}})(e,t),configFormLayout:r,width:i,height:l},e))),y&&(0,Ee.Y)("div",{role:"button",tabIndex:-1,css:(0,P.AH)({padding:2*f.gridUnit,textAlign:"center",cursor:"pointer",fontSize:f.typography.sizes.xs,color:f.colors.text.label,":hover":{backgroundColor:f.colors.grayscale.light4}},"",""),onClick:()=>v(!m),children:m?(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("i",{className:"fa fa-angle-up"}),"   ",(0,s.t)("Show less columns")]}):(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("i",{className:"fa fa-angle-down"}),"  ",(0,s.t)("Show all columns")]})})]})]})},CurrencyControl:tl.A,DatasourceControl:ln,DateFilterControl:sn.Ay,DndColumnSelectControl:si,DndColumnSelect:function(e){const{value:t,options:a,multi:o=!0,onChange:r,canDelete:i=!0,ghostButtonText:l,name:c,label:d,isTemporal:u,disabledTabs:h}=e,[p,f]=(0,n.useState)(!1),g=(0,n.useMemo)((()=>{const e=Object.fromEntries(a.map((e=>[e.column_name,e])));return new Oi(e,o,t)}),[o,a,t]),m=(0,n.useCallback)((e=>{const t=e.value;g.multi||ir()(g.values)?g.add(t.column_name):g.replace(0,t.column_name),r(g.getValues())}),[r,g]),v=(0,n.useCallback)((e=>{const t=e.value.column_name;return t in g.options&&!g.has(t)}),[g]),b=(0,n.useCallback)((e=>{g.del(e),r(g.getValues())}),[r,g]),y=(0,n.useCallback)(((e,t)=>{g.swap(e,t),r(g.getValues())}),[r,g]),x=(0,n.useCallback)((()=>g.values.map(((e,t)=>{const n=(0,yi.q0)(e)&&e.datasourceWarning?(0,s.t)("This column might be incompatible with current dataset"):void 0;return(0,Ee.Y)($i,{columns:a,onColumnEdit:e=>{(0,Tr.wS)(e)?g.replace(t,e.column_name):g.replace(t,e),r(g.getValues())},editedColumn:e,isTemporal:u,disabledTabs:h,children:(0,Ee.Y)(Si,{index:t,clickClose:b,onShiftOptions:y,type:`${un.S.ColumnOption}_${c}_${d}`,canDelete:i,column:e,datasourceWarningMessage:n,withCaret:!0},t)},t)}))),[i,u,d,c,r,b,y,g,a]),w=(0,n.useCallback)((e=>{(0,Tr.wS)(e)?g.add(e.column_name):g.add(e),r(g.getValues())}),[r,g]),C=(0,n.useCallback)((e=>{f(e)}),[]),S=(0,n.useCallback)((()=>{C(!1)}),[C]),A=(0,n.useCallback)((()=>{C(!0)}),[C]),k=(0,n.useMemo)((()=>null!=l?l:(0,s.tn)("Drop a column here or click","Drop columns here or click",o?2:1)),[l,o]);return(0,Ee.FD)("div",{children:[(0,Ee.Y)(si,{onDrop:m,canDrop:v,valuesRenderer:x,accept:un.S.Column,displayGhostButton:o||0===g.values.length,ghostButtonText:k,onClickGhostButton:A,...e}),(0,Ee.Y)($i,{columns:a,onColumnEdit:w,isControlledComponent:!0,togglePopover:C,closePopover:S,visible:p,isTemporal:u,disabledTabs:h,children:(0,Ee.Y)("div",{})})]})},DndFilterSelect:e=>{var t;const{datasource:a,onChange:o=(()=>{}),name:r,canDelete:i}=e,l=(0,n.useMemo)((()=>{let e={};if(null!=a&&a.extra)try{e=JSON.parse(a.extra)}catch{}return e}),[null==a?void 0:a.extra]),c=Array.from(null!=(t=e.value)?t:[]),[d,u]=(0,n.useState)(c.map((e=>Gi(e)?new Hi.A(e):e))),[h,f]=(0,n.useState)(void 0),[g,m]=(0,n.useState)(!1),[v,b]=(0,n.useState)({}),y=(e,t)=>[...e,...[...(null==t?void 0:t.metrics)||[],null==t?void 0:t.metric].map((e=>e&&("string"==typeof e?{saved_metric_name:e}:new hn.A(e))))].filter((e=>e)).reduce(((e,t)=>("saved_metric_name"in t&&t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):"column_name"in t&&t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof hn.A&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e)),[]).sort(((e,t)=>{var a,n;return null!=(a=null==(n=e.saved_metric_name||e.column_name||e.label)?void 0:n.localeCompare(t.saved_metric_name||t.column_name||t.label||""))?a:0})),[x,w]=(0,n.useState)(y(e.columns,e.formData)),C=(0,n.useMemo)((()=>new Set(x.map((({column_name:e,filterOptionName:t})=>null!=e?e:t)))),[x]);(0,n.useEffect)((()=>{if(a&&"table"===a.type){var e;const t=null==(e=a.database)?void 0:e.id,{datasource_name:n,catalog:o,schema:r,is_sqllab_view:i}=a;!i&&t&&n&&r&&ge.A.get({endpoint:`/api/v1/database/${t}/table_metadata/extra/${(0,p.zJ)({name:n,catalog:o,schema:r})}`}).then((({json:e})=>{if(null!=e&&e.partitions){const{partitions:t}=e;null!=t&&t.cols&&1===Object.keys(t.cols).length&&f(t.cols[0])}})).catch((e=>{N.A.error("fetch extra_table_metadata:",e.statusText)}))}}),[a]),(0,n.useEffect)((()=>{w(y(e.columns,e.formData))}),[e.columns,e.formData]),(0,n.useEffect)((()=>{u((e.value||[]).map((e=>Gi(e)?new Hi.A(e):e)))}),[e.value]);const S=(0,n.useCallback)((e=>{const t=[...d];t.splice(e,1),u(t),o(t)}),[o,d]),A=(0,n.useCallback)((e=>{const t=null==i?void 0:i(d[e],d);"string"!=typeof t?!0===t&&S(e):qi({title:(0,s.t)("Warning"),content:t})}),[i,S,d]),k=(0,n.useCallback)(((e,t)=>{const a=[...d];[a[t],a[e]]=[a[e],a[t]],u(a)}),[d]),E=(0,n.useCallback)((t=>{var a;return null==(a=e.savedMetrics.find((e=>e.metric_name===t)))?void 0:a.expression}),[e.savedMetrics]),_=(0,n.useCallback)((e=>{if(e instanceof Hi.A)return e;const t=e;return t.saved_metric_name?new Hi.A({expressionType:Ui.A.Sql,subject:E(t.saved_metric_name),operator:q.nS[q.ux.GreaterThan].operation,operatorId:q.ux.GreaterThan,comparator:0,clause:Ui.v.Having}):t.label?new Hi.A({expressionType:Ui.A.Sql,subject:new hn.A(e).translateToSql(),operator:q.nS[q.ux.GreaterThan].operation,operatorId:q.ux.GreaterThan,comparator:0,clause:Ui.v.Having}):t.column_name?new Hi.A({expressionType:Ui.A.Simple,subject:t.column_name,operator:q.nS[q.ux.Equals].operation,operatorId:q.ux.Equals,comparator:"",clause:Ui.v.Where,isNew:!0}):null}),[a.type,E]),M=(0,n.useCallback)((e=>{o(d.map((t=>t.filterOptionName===e.filterOptionName?e:t)))}),[o,d]),D=(0,n.useCallback)((e=>{const t=_(e);if(t){const e=[...d,t];u(e),o(e)}}),[_,o,d]),T=(0,n.useCallback)((e=>{m(e)}),[]),O=(0,n.useCallback)((()=>{T(!1)}),[T]),Y=(0,n.useCallback)((()=>d.map(((e,t)=>(0,Ee.Y)(zi,{index:t,adhocFilter:e,options:x,datasource:a,onFilterEdit:M,partitionColumn:h,onClickClose:A,onShiftOptions:k})))),[A,M,k,x,h,a,d]),R=(0,n.useCallback)((()=>{b({}),T(!0)}),[T]),F=(0,Wi.IM)(),I=(0,n.useMemo)((()=>{if(null==(t=v)?void 0:t.metric_name)return new Hi.A({expressionType:Ui.A.Sql,clause:Ui.v.Having,sqlExpression:null==v?void 0:v.expression});var t;if(v instanceof hn.A)return new Hi.A({expressionType:Ui.A.Sql,clause:Ui.v.Having,sqlExpression:null==v?void 0:v.translateToSql()});const a={subject:null==v?void 0:v.column_name};return a.subject&&(a.operator=q.nS[q.ux.In].operation,a.operatorId=q.ux.In),(0,Tr.wS)(v)&&(0,Je.D)(null==v?void 0:v.column_name,e.datasource)&&(a.operator=q.ux.TemporalRange,a.operatorId=q.ux.TemporalRange,a.comparator=F),new Hi.A(a)}),[v]),P=(0,n.useCallback)((e=>{if(l.disallow_adhoc_metrics&&(e.type!==un.S.Column||!C.has(e.value.column_name)))return!1;if(e.type===un.S.Column){const t=e.value.column_name;return C.has(t)}return!0}),[C,l]),L=(0,n.useCallback)((e=>{b(e.value),T(!0)}),[r,T]);return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(si,{onDrop:L,canDrop:P,valuesRenderer:Y,accept:Vi,ghostButtonText:(0,s.t)("Drop columns/metrics here or click"),onClickGhostButton:R,...e}),(0,Ee.Y)(Bi.A,{adhocFilter:I,options:x,datasource:a,onFilterEdit:D,partitionColumn:h,isControlledComponent:!0,visible:g,togglePopover:T,closePopover:O,requireSave:!!v})]})},DndMetricSelect:e=>{const{onChange:t,multi:a,datasource:o,savedMetrics:r}=e,i=(0,n.useMemo)((()=>{let e={};if(null!=o&&o.extra)try{e=JSON.parse(o.extra)}catch{}return e}),[null==o?void 0:o.extra]),l=(0,n.useMemo)((()=>new Set(r.map((({metric_name:e})=>e)))),[r]),c=(0,n.useCallback)((e=>{if(null===e)return void t(null);const n=(0,fe.A)(e).map((e=>e.metric_name?e.metric_name:e)).filter((e=>e));t(a?n:n[0])}),[a,t]),[d,u]=(0,n.useState)(Zi(e.value,e.savedMetrics,e.columns)),[h,p]=(0,n.useState)({}),[f,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{u(Zi(e.value,e.savedMetrics,e.columns))}),[JSON.stringify(e.value),JSON.stringify(e.savedMetrics),JSON.stringify(e.columns)]);const m=(0,n.useCallback)((e=>!(i.disallow_adhoc_metrics&&(e.type!==un.S.Metric||!l.has(e.value.metric_name)))&&!("metric"===e.type&&d.includes(e.value.metric_name))),[d,i,l]),v=(0,n.useCallback)((t=>{const a=e.multi?[...d,t]:[t];u(a),c(a)}),[c,e.multi,d]),b=(0,n.useCallback)(((e,t)=>{if(t instanceof hn.A&&t.equals(e))return;const a=d.map((a=>("metric_name"in t&&a===t.metric_name||void 0!==a.optionName)&&a.optionName===t.optionName?e:a));u(a),c(a)}),[c,d]),y=(0,n.useCallback)((e=>{if(!Array.isArray(d))return;const t=[...d];t.splice(e,1),u(t),c(t)}),[c,d]),x=(0,n.useCallback)(((e,t)=>{const a=[...d];[a[t],a[e]]=[a[e],a[t]],u(a)}),[d]),w=(0,n.useMemo)((()=>el(e.savedMetrics,e.value)),[e.savedMetrics,e.value]),C=(0,n.useCallback)((t=>{var a;return el(e.savedMetrics,e.value,null==(a=e.value)?void 0:a[t])}),[e.savedMetrics,e.value]),S=(0,n.useCallback)((()=>t(a?d:d[0])),[a,t,d]),A=(0,n.useCallback)(((t,n)=>(0,Ee.Y)(Pn,{index:n,option:t,onMetricEdit:b,onRemoveMetric:y,columns:e.columns,savedMetrics:e.savedMetrics,savedMetricsOptions:C(n),datasource:e.datasource,onMoveLabel:x,onDropLabel:S,type:`${un.S.AdhocMetricOption}_${e.name}_${e.label}`,multi:a,datasourceWarningMessage:t instanceof hn.A&&t.datasourceWarning?(0,s.t)("This metric might be incompatible with current dataset"):void 0},n)),[C,S,x,a,b,y,e.columns,e.datasource,e.label,e.name,e.savedMetrics]),k=(0,n.useCallback)((()=>d.map(((e,t)=>A(e,t)))),[d,A]),E=(0,n.useCallback)((e=>{g(e)}),[]),_=(0,n.useCallback)((()=>{E(!1)}),[E]),M=(0,n.useCallback)((e=>{e.type===un.S.Metric&&v(e.value),e.type===un.S.Column&&(p(e),E(!0))}),[v,E]),D=(0,n.useCallback)((()=>{p({}),E(!0)}),[E]),T=(0,n.useMemo)((()=>{if((null==(e=h)?void 0:e.value)&&(null==e?void 0:e.type)&&h.type===un.S.Column){const e=h.value,t={column:e};return e.type_generic===Xi.s.Numeric?t.aggregate=q.dq.SUM:e.type_generic!==Xi.s.String&&e.type_generic!==Xi.s.Boolean&&e.type_generic!==Xi.s.Temporal||(t.aggregate=q.dq.COUNT_DISTINCT),new hn.A(t)}var e;return new hn.A({})}),[h]),O=(0,s.tn)("Drop a column/metric here or click","Drop columns/metrics here or click",a?2:1);return(0,Ee.FD)("div",{className:"metrics-select",children:[(0,Ee.Y)(si,{onDrop:M,canDrop:m,valuesRenderer:k,accept:Ji,ghostButtonText:O,displayGhostButton:a||0===d.length,onClickGhostButton:D,...e}),(0,Ee.Y)(On,{adhocMetric:T,onMetricEdit:v,columns:e.columns,savedMetricsOptions:w,savedMetric:Qi,datasource:e.datasource,isControlledComponent:!0,visible:f,togglePopover:E,closePopover:_,isNew:!0,children:(0,Ee.Y)("div",{})})]})},FixedOrMetricControl:Xn,HiddenControl:function(e){return(0,Ee.Y)(yt.pd,{type:"hidden",value:e.value})},SelectAsyncControl:Jn,SelectControl:Zn.A,SliderControl:function({default:e,name:t,label:a,description:n,renderTrigger:o,rightNode:r,leftNode:i,validationErrors:l,hovered:s,warning:c,danger:d,onClick:u,tooltipOnClick:h,onChange:p=(()=>{}),...f}){const g={name:t,label:a,description:n,renderTrigger:o,rightNode:r,leftNode:i,validationErrors:l,onClick:u,hovered:s,tooltipOnClick:h,warning:c,danger:d};return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(xt.A,{...g}),(0,Ee.Y)(Vo,{...f,onChange:p,defaultValue:e})]})},SpatialControl:Go.A,TextAreaControl:Ko.A,TextControl:cn.A,TimeSeriesColumnControl:or,ViewportControl:br,VizTypeControl:({value:e,onChange:t=Cn.fZ,isModalOpenInit:a})=>{const[o,r]=(0,n.useState)(!!a),[i,l]=(0,n.useState)(0),[c,d]=(0,n.useState)(e),u=(0,n.useCallback)((()=>{r(!0)}),[]),h=(0,n.useCallback)((()=>{t(c),r(!1)}),[c,t]),p=(0,n.useCallback)((()=>{r(!1),l((e=>e+1)),d(e)}),[e]);return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.FD)("div",{css:e=>P.AH`
          min-width: ${72*e.gridUnit}px;
          max-width: fit-content;
        `,children:[(0,Ee.Y)(Ar,{onChange:t,currentSelection:e}),e&&(0,Ee.Y)(_r,{vizType:e})]}),(0,Ee.Y)("div",{css:e=>P.AH`
          display: flex;
          justify-content: flex-end;
          margin-top: ${3*e.gridUnit}px;
          color: ${e.colors.grayscale.base};
          text-decoration: underline;
        `,children:(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:u,children:(0,s.t)("View all charts")})}),(0,Ee.Y)(Mr,{show:o,onHide:p,title:(0,s.t)("Select a visualization type"),primaryButtonName:(0,s.t)("Select"),disablePrimaryButton:!c,onHandledPrimaryAction:h,maxWidth:`${xr.rE}px`,responsive:!0,children:(0,Ee.Y)(xr.Ay,{selectedViz:c,onChange:d,onDoubleClick:h,denyList:kr},i)})]})},MetricsControl:Wn,AdhocFilterControl:Dr.A,ConditionalFormattingControl:ei,XAxisSortControl:function(e){const[t,a]=(0,n.useState)(e.value);return(0,n.useEffect)((()=>{e.shouldReset&&(e.onChange(void 0),a(null))}),[e.shouldReset,e.value]),(0,Ee.Y)(Zn.A,{...e,value:t})},ContourControl:({onChange:e,...t})=>{const[a,o]=(0,n.useState)(!1),[r,i]=(0,n.useState)(null!=t&&t.value?null==t?void 0:t.value:Mi);(0,n.useEffect)((()=>{const t=r.map(((e,t)=>({...e,zIndex:10*(t+1)})));null==e||e(t)}),[e,r]);const l=e=>{o(e)},c=e=>{const t=[...r];t.splice(e,1),i(t)},d=(e,t)=>{const a=[...r];[a[e],a[t]]=[a[t],a[e]],i(a)},u=(0,s.t)("Click to add a contour");return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(si,{onDrop:()=>{},canDrop:()=>!0,valuesRenderer:()=>r.map(((e,t)=>(0,Ee.Y)(_i,{saveContour:e=>((e,t)=>{const a=[...r];a[t]=e,i(a)})(e,t),contour:e,index:t,onClose:c,onShift:d},t))),accept:[],ghostButtonText:u,onClickGhostButton:()=>{l(!0)},...t}),(0,Ee.Y)(vi,{saveContour:e=>{i([...r,e]),l(!1)},isControlled:!0,visible:a,toggleVisibility:o,children:(0,Ee.Y)(Di,{})})]})},ComparisonRangeLabel:({multi:e=!0})=>{const[t,a]=(0,n.useState)([]),r=(0,o.d4)((e=>e.explore.form_data.adhoc_filters.filter((e=>"TEMPORAL_RANGE"===e.operator))),kl),i=(0,o.d4)((e=>{var t;return null==(t=e.explore.form_data.adhoc_custom)?void 0:t.filter((e=>"TEMPORAL_RANGE"===e.operator))}),kl),l=(0,o.d4)((e=>{const t=e.explore.form_data||{};if(null==t||!t.time_compare){const e=t.time_comparison||"";if(_l.hasOwnProperty(e))return[_l[e]]}return null==t?void 0:t.time_compare}),El),c=(0,o.d4)((e=>e.explore.form_data.start_date_offset));return(0,n.useEffect)((()=>{const e=(0,fe.A)(l);if(ir()(r)||ir()(e)&&!c)a([]);else if(!ir()(l)||c){let n=c;var t;c||ir()(i)||(n=null==(t=i[0])?void 0:t.comparator.split(" : ")[0],n=ke()((0,sr.cy)(n)).format("YYYY-MM-DD"));const o=r.map((t=>{const a=e.filter((e=>"custom"!==e&&"inherit"!==e))||[],o=e.filter((e=>"custom"===e||"inherit"===e))||[];return ir()(o)?(0,cr.x9)(t.comparator,t.subject,(0,fe.A)(a)):(0,fe.A)(o).includes("custom")&&c||(0,fe.A)(o).includes("inherit")?(0,cr.x9)(t.comparator,t.subject).then((e=>{var r;const i=null==e||null==(r=e.value)?void 0:r.match(ur.Io),[l,s]=null!=i?i:[];if(l){const e=ke()((0,sr.cy)(l));if(ke()((0,sr.cy)(c)).isSameOrBefore(e)||!c){const e=(0,sr.TX)({timeRangeFilter:{...t,comparator:`${l} : ${s}`},shifts:o,startDate:n,includeFutureOffsets:!1});return(0,cr.x9)(t.comparator,t.subject,(0,fe.A)(e.concat(a)))}}return Promise.resolve({value:""})})):Promise.resolve({value:""})}));Promise.all(o).then((e=>{a(e.map((e=>{var t;return null!=(t=e.value)?t:""})))}))}}),[r,l,c]),t.length?(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(xt.A,{label:(0,s.t)("Actual range for comparison")}),t.flat().map((e=>(0,Ee.Y)(Ee.FK,{children:(0,Ee.Y)("div",{css:e=>P.AH`
              font-size: ${e.typography.sizes.m}px;
              color: ${e.colors.grayscale.dark1};
            `,children:e},e)})))]}):null},TimeOffsetControl:function({onChange:e,...t}){const[a,r]=(0,n.useState)(""),[i,l]=(0,n.useState)(void 0),[s,c]=(0,n.useState)(void 0),[d,u]=(0,n.useState)(void 0),[h,p]=(0,n.useState)(null),f=(0,o.d4)((e=>e.explore.form_data.adhoc_filters.filter((e=>"TEMPORAL_RANGE"===e.operator))),pr),g=(0,o.d4)((e=>e.explore.form_data.start_date_offset),fr);(0,n.useEffect)((()=>{h!==g&&(p(g),e(ke()(g).format(hr)))}),[g]);const m=(0,o.d4)((e=>{var t;return null==(t=e.explore.form_data.adhoc_custom)?void 0:t.filter((e=>"TEMPORAL_RANGE"===e.operator))}),pr),v=(0,n.useCallback)((e=>{const t=(0,lr.t)(e);if(t.matchedFlag){var a;const{sinceDatetime:e,sinceMode:n,sinceGrain:o,sinceGrainValue:r}={...t.customRange};let i=null;i="relative"!==n?"specific"===n?new Date(e):(0,sr.cy)(e,!1,!0):(0,sr.M9)(e,o,r),null==(a=i)||a.setHours(0,0,0,0),c(ke()(i))}else c(void 0)}),[c]);return(0,n.useEffect)((()=>{var e,t;ir()(f)?(c(void 0),u(ke()((0,sr.cy)("")))):(0,cr.x9)(null==(e=f[0])?void 0:e.comparator,null==(t=f[0])?void 0:t.subject).then((e=>{var t,a;const n=null==e||null==(t=e.value)?void 0:t.match(ur.Io),[o,r]=null!=n?n:[];v(null!=(a=`${o} : ${r}`)?a:""),u(ke()((0,sr.cy)(o)))}))}),[f,v]),(0,n.useEffect)((()=>{if(h||!m&&!s)h&&(r(h),l(ke()((0,sr.cy)(h))));else{var e;let n="";var t;if(ir()(m))n=null==(t=f[0])?void 0:t.comparator.split(" : ")[0];else if("No filter"!==(null==(e=m[0])?void 0:e.comparator.split(" : ")[0])){var a;n=null==(a=m[0])?void 0:a.comparator.split(" : ")[0]}s?(r(s.toString()),l(ke()(s))):n&&(r(n),l(ke()((0,sr.cy)(n))))}}),[m,h,s]),(0,n.useEffect)((()=>{if(s&&i&&i>s){const t=ke().utc(s).subtract(1,"day");r(t.toString()),l(t),e(ke().utc(t).format(hr))}if(i&&d&&i>d){const t=ke().utc(d).subtract(1,"day");r(t.toString()),l(t),e(ke().utc(t).format(hr))}}),[d,i,s]),a||i?(0,Ee.FD)("div",{children:[(0,Ee.Y)(xt.A,{...t}),(0,Ee.Y)(dr.A,{css:P.AH`
          width: 100%;
        `,onChange:t=>e(t?t.format(hr):""),defaultPickerValue:a?ke()(i).subtract(1,"day"):void 0,disabledDate:e=>s?e&&e>ke()(s):!!d&&e&&e>d,defaultValue:ke()(i),value:ke()(i)})]}):null},...rt.A},Dl=Ml,Tl=I.I4.div`
  padding-bottom: ${({theme:e})=>4*e.gridUnit}px;
`;function Ol(e){const{actions:{setControlValue:t},name:a,type:o,hidden:r,isVisible:i,resetOnHide:l=!0}=e,[s,c]=(0,n.useState)(!1),d=(0,L.Z)(i),u=(0,n.useCallback)(((e,n)=>t(a,e,n)),[a,t]);if((0,n.useEffect)((()=>{!0===d&&!1===i&&void 0!==e.default&&!D()(e.value,e.default)&&l&&(null==t||t(a,e.default))}),[a,d,i,t,e.value,e.default]),!o||!1===i)return null;const h="string"==typeof o?Dl[o]:o;return h?(0,Ee.Y)(Tl,{className:"Control",style:r?{display:"none"}:void 0,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,Ee.Y)(ot.A,{children:(0,Ee.Y)(h,{onChange:u,hovered:s,...e})})}):(console.warn(`Unknown controlType: ${o}`),null)}const Yl=({loading:e,onQuery:t,onStop:a,errorMessage:n,isNewChart:o,canStopQuery:r,chartIsStale:i})=>e?(0,Ee.FD)(Ye.A,{onClick:a,buttonStyle:"warning",disabled:!r,children:[(0,Ee.Y)("i",{className:"fa fa-stop"})," ",(0,s.t)("Stop")]}):(0,Ee.Y)(Ye.A,{onClick:t,buttonStyle:i?"primary":"secondary",disabled:!!n,children:o?(0,s.t)("Create chart"):(0,s.t)("Update chart")});var Rl=a(86963);const Fl=({shouldStash:e,fieldNames:t,children:a})=>{const r=(0,o.wA)(),i=(0,Rl.A)((e=>r((0,ie.setStashFormData)(e,t))));return(0,n.useEffect)((()=>{i(e)}),[e,i]),(0,Ee.Y)(Ee.FK,{children:a})},{confirm:Il}=at.A,Pl=P.AH`
  &.anticon {
    font-size: unset;
    .anticon {
      line-height: unset;
      vertical-align: unset;
    }
  }
`,Nl=e=>P.AH`
  display: flex;
  position: sticky;
  bottom: 0;
  flex-direction: column;
  align-items: center;
  padding: ${4*e.gridUnit}px;
  z-index: 999;
  background: linear-gradient(
    ${(0,Ze.rgba)(e.colors.grayscale.light5,0)},
    ${e.colors.grayscale.light5} ${e.opacity.mediumLight}
  );

  & > button {
    min-width: 156px;
  }
`,Ll=I.I4.div`
  position: relative;
  height: 100%;
  width: 100%;

  // Resizable add overflow-y: auto as a style to this div
  // To override it, we need to use !important
  overflow: visible !important;
  #controlSections {
    height: 100%;
    overflow: visible;
  }
  .nav-tabs {
    flex: 0 0 1;
  }
  .tab-content {
    overflow: auto;
    flex: 1 1 100%;
  }
  .Select__menu {
    max-width: 100%;
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,$l=(0,I.I4)(tt.Ay)`
  ${({theme:e,fullWidth:t})=>P.AH`
    height: 100%;
    overflow: visible;
    .ant-tabs-nav {
      margin-bottom: 0;
    }
    .ant-tabs-nav-list {
      width: ${t?"100%":"50%"};
    }
    .ant-tabs-tabpane {
      height: 100%;
    }
    .ant-tabs-content-holder {
      padding-top: ${4*e.gridUnit}px;
    }

    .ant-collapse-ghost > .ant-collapse-item {
      &:not(:last-child) {
        border-bottom: 1px solid ${e.colors.grayscale.light3};
      }

      & > .ant-collapse-header {
        font-size: ${e.typography.sizes.s}px;
      }

      & > .ant-collapse-content > .ant-collapse-content-box {
        padding-bottom: 0;
        font-size: ${e.typography.sizes.s}px;
      }
    }
  `}
`,Bl=(e,t)=>e.reduce(((e,a)=>!a.expanded&&a.label||(e=>!!e.label&&Qe.sections.legacyTimeseriesTime.label===e.label)(a)&&!(e=>{var t;return null==e||null==(t=e.columns)?void 0:t.some((e=>e.is_dttm))})(t)?e:[...e,String(a.label)]),[]);function Hl(e,t){const a=(0,n.useRef)(e()),o=(0,n.useRef)(t);return o.current!==t&&(a.current=e(),o.current=t),a}const jl=e=>{var t,a;const{colors:r}=(0,I.DP)(),l=(0,n.useContext)(j.bf),c=(0,L.Z)(e.exploreState),d=(0,L.Z)(e.exploreState.datasource),h=(0,L.Z)(e.chart.chartStatus),[p,f]=(0,n.useState)(!1),g=(0,n.useRef)(null),m=(0,o.d4)((e=>e.explore.controlsTransferred)),v=(0,o.d4)((e=>{var t,a;return(null==(t=e.common)||null==(a=t.conf)?void 0:a.DEFAULT_TIME_FILTER)||Ke.WC})),{form_data:b,actions:y}=e,{setControlValue:x}=y,{x_axis:w,adhoc_filters:C}=b,S=(0,L.Z)(w);(0,n.useEffect)((()=>{w&&w!==S&&(0,Je.D)(w,e.exploreState.datasource)&&(null==C||!C.find((e=>"SIMPLE"===e.expressionType&&e.operator===q.ux.TemporalRange&&e.subject===w)))&&Il({title:(0,s.t)("The X-axis is not on the filters list"),content:(0,s.t)("The X-axis is not on the filters list which will prevent it from being used in\n            time range filters in dashboards. Would you like to add it to the filters list?"),onOk:()=>{x("adhoc_filters",[...C||[],{clause:Ui.v.Where,subject:w,operator:q.ux.TemporalRange,comparator:v,expressionType:"SIMPLE"}])}})}),[w,C,x,v,S,e.exploreState.datasource]),(0,n.useEffect)((()=>{let t=!1;const a=e=>"object"==typeof e&&(0,i.A)(e)&&"datasourceWarning"in e&&!0===e.datasourceWarning?(t=!0,{...e,datasourceWarning:!1}):e;"success"===e.chart.chartStatus&&"success"!==h&&(null==m||m.forEach((n=>{var o;if(t=!1,!(0,i.A)(e.controls[n]))return;const r=Array.isArray(e.controls[n].value)?null==(o=(0,fe.A)(e.controls[n].value))?void 0:o.map(a):a(e.controls[n].value);t&&e.actions.setControlValue(n,r)})))}),[m,h,e.actions,e.chart.chartStatus,e.controls]),(0,n.useEffect)((()=>{var t,a,n;!d||d.type===pe.cT.Query||(null==(t=e.exploreState.datasource)?void 0:t.id)===d.id&&(null==(a=e.exploreState.datasource)?void 0:a.type)===d.type||(f(!0),null==(n=g.current)||n.scrollTo(0,0))}),[null==(t=e.exploreState.datasource)?void 0:t.id,null==(a=e.exploreState.datasource)?void 0:a.type,d]);const{expandedQuerySections:A,expandedCustomizeSections:k,querySections:E,customizeSections:_}=(0,n.useMemo)((()=>function(e,t,a){const n=[],o=[];return(0,re.QQ)(e,a).forEach((e=>{"data"===e.tabOverride||e.controlSetRows.some((e=>e.some((e=>e&&"object"==typeof e&&"config"in e&&e.config&&(!e.config.renderTrigger||"data"===e.config.tabOverride)))))?n.push(e):e.controlSetRows.length>0&&o.push(e)})),{expandedQuerySections:Bl(n,t),expandedCustomizeSections:Bl(o,t),querySections:n,customizeSections:o}}(b.viz_type,e.exploreState.datasource,e.datasource_type)),[e.exploreState.datasource,b.viz_type,e.datasource_type]),M=(0,n.useCallback)((()=>{(0,fe.A)(e.exploreState.controlsTransferred).forEach((t=>e.actions.setControlValue(t,e.controls[t].default)))}),[e.actions,e.exploreState.controlsTransferred,e.controls]),T=(0,n.useCallback)((()=>{M(),f(!1)}),[M]),O=(0,n.useCallback)((()=>{f(!1)}),[]),Y=({name:t,config:a})=>{const{controls:n,chart:o,exploreState:r}=e;return Boolean(null==a.shouldMapStateToProps?void 0:a.shouldMapStateToProps(c||r,r,n[t],o))},R=Hl((()=>({})),b.viz_type),F=t=>{const{controls:a}=e,{label:o,description:i,visibility:l}=t,c=String(o),d=!1!==(null==l?void 0:l.call(void 0,e,a)),u=t.controlSetRows.some((e=>e.some((e=>{const t="string"==typeof e?e:e&&"name"in e?e.name:null;return t&&t in a&&a[t].validationErrors&&a[t].validationErrors.length>0}))));u||(R.current[c]=!0);const h=R.current[c]?r.error.base:r.alert.base;return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(Fl,{shouldStash:!d,fieldNames:t.controlSetRows.flat().map((e=>e&&"object"==typeof e?"name"in e?e.name:"":String(e||""))).filter(Boolean)},`sectionId-${c}`),d&&(0,Ee.Y)(et.A.Panel,{css:e=>P.AH`
              margin-bottom: 0;
              box-shadow: none;

              &:last-child {
                padding-bottom: ${16*e.gridUnit}px;
                border-bottom: 0;
              }

              .panel-body {
                margin-left: ${4*e.gridUnit}px;
                padding-bottom: 0;
              }

              span.label {
                display: inline-block;
              }
              ${!t.label&&"\n          .ant-collapse-header {\n            display: none;\n          }\n        "}
            `,header:(0,Ee.Y)((()=>(0,Ee.FD)("span",{children:[(0,Ee.Y)("span",{css:e=>P.AH`
            font-size: ${e.typography.sizes.m}px;
            line-height: 1.3;
          `,children:o})," ",i&&(0,Ee.Y)(z.m,{id:c,title:i,children:(0,Ee.Y)(W.A.InfoCircleOutlined,{css:Pl})}),u&&(0,Ee.Y)(z.m,{id:`${Ge()("validation-errors")}-tooltip`,title:(0,s.t)("This section contains validation errors"),children:(0,Ee.Y)(W.A.InfoCircleOutlined,{css:P.AH`
                ${Pl};
                color: ${h};
              `})})]})),{}),children:t.controlSetRows.map(((t,a)=>{const o=t.map((t=>t?(0,n.isValidElement)(t)?t:t.name&&t.config&&"datasource"!==t.name?(({name:t,config:a})=>{const{controls:n,chart:o,exploreState:r}=e,{visibility:i,hidden:l,...c}=a,d={...c,...n[t],...Y({name:t,config:a})?null==a||null==a.mapStateToProps?void 0:a.mapStateToProps(r,n[t],o):void 0,name:t},{validationErrors:u,label:h,description:p,...f}=d,g=i?i.call(a,e,d):void 0,m="function"==typeof l?l.call(a,e,d):l,b="function"==typeof h?h(r,n[t],o):h,y="function"==typeof p?p(r,n[t],o):p;return t.includes("adhoc_filters")&&(f.canDelete=(a,o)=>{var r;const i=e=>e.operator===q.ux.TemporalRange;return!((null==n||null==(r=n.time_range)||!r.value)&&i(a)&&1===o.filter(i).length)||(a.comparator===v?(0,s.t)("You cannot delete the last temporal filter as it's used for time range filters in dashboards."):(e.actions.setControlValue(t,o.map((e=>D()(e,a)?{...e,comparator:v}:e))),!1))}),(0,Ee.Y)(Fl,{shouldStash:!1===g,fieldNames:[t],children:(0,Ee.Y)(Ol,{name:t,label:b,description:y,validationErrors:u,actions:e.actions,isVisible:g,hidden:m,...f},`control-${t}`)},`control-container-${t}`)})(t):null:null)).filter((e=>null!==e));return 0===o.length?null:(0,Ee.Y)(nt,{controls:o},`controlsetrow-${a}`)}))},c)]})},N=(0,fe.A)(e.exploreState.controlsTransferred).length>0,$=(0,n.useCallback)((()=>N?(0,Ee.Y)(Ne,{title:(0,s.t)("Keep control settings?"),bodyText:(0,s.t)("You've changed datasets. Any controls with data (columns, metrics) that match this new dataset have been retained."),primaryButtonAction:O,secondaryButtonAction:T,primaryButtonText:(0,s.t)("Continue"),secondaryButtonText:(0,s.t)("Clear form"),type:"info"}):(0,Ee.Y)(Ne,{title:(0,s.t)("No form settings were maintained"),bodyText:(0,s.t)("We were unable to carry over any controls when switching to this new dataset."),primaryButtonAction:O,primaryButtonText:(0,s.t)("Continue"),type:"warning"})),[T,O,N]),B=Hl((()=>!1),b.viz_type),H=(0,n.useMemo)((()=>{e.errorMessage||(B.current=!0);const t=B.current?r.error.base:r.alert.base;return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("span",{children:(0,s.t)("Data")}),e.errorMessage&&(0,Ee.FD)("span",{css:e=>P.AH`
              margin-left: ${2*e.gridUnit}px;
            `,children:[" ",(0,Ee.Y)(z.m,{id:"query-error-tooltip",placement:"right",title:e.errorMessage,children:(0,Ee.Y)(W.A.ExclamationCircleOutlined,{css:P.AH`
                  ${Pl};
                  color: ${t};
                `})})]})]})}),[r.error.base,r.alert.base,B,e.errorMessage]);if(!(0,Xe.A)().has(b.viz_type)&&l.loading)return(0,Ee.Y)(u.A,{});const U=_.length>0;return(0,Ee.FD)(Ll,{ref:g,children:[(0,Ee.FD)($l,{id:"controlSections",fullWidth:U,allowOverflow:!1,children:[(0,Ee.Y)(tt.Ay.TabPane,{tab:H,children:(0,Ee.FD)(et.A,{defaultActiveKey:A,expandIconPosition:"right",ghost:!0,children:[p&&(0,Ee.Y)($,{}),E.map(F)]})},"query"),U&&(0,Ee.Y)(tt.Ay.TabPane,{tab:(0,s.t)("Customize"),children:(0,Ee.Y)(et.A,{defaultActiveKey:k,expandIconPosition:"right",ghost:!0,children:_.map(F)})},"display")]}),(0,Ee.Y)("div",{css:Nl,children:(0,Ee.Y)(Yl,{onQuery:e.onQuery,onStop:e.onStop,errorMessage:e.errorMessage,loading:"loading"===e.chart.chartStatus,isNewChart:!e.chart.queriesResponse,canStopQuery:e.canStopQuery,chartIsStale:e.chartIsStale})})]})};var zl=a(58561),Wl=a.n(zl),Ul=a(78697);const ql="save_chart_recent_dashboard",Vl=(0,I.I4)(at.A)`
  .ant-modal-body {
    overflow: visible;
  }
  i {
    position: absolute;
    top: -${({theme:e})=>5.25*e.gridUnit}px;
    left: ${({theme:e})=>26.75*e.gridUnit}px;
  }
`;class Gl extends n.Component{constructor(e){var t;super(e),this.handleDatasetNameChange=e=>{this.setState({datasetName:e.target.value})},this.handleRedirect=(e,t)=>{const a=new URLSearchParams(e);return a.set("save_action",this.state.action),"overwrite"!==this.state.action&&a.delete("form_data_key"),a.set("slice_id",t.id.toString()),a},this.loadDashboard=async e=>(await ge.A.get({endpoint:`/api/v1/dashboard/${e}`})).json.result,this.loadDashboards=async(e,t,a)=>{const n=Wl().encode({columns:["id","dashboard_title"],filters:[{col:"dashboard_title",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:this.props.user.userId}],page:t,page_size:a,order_column:"dashboard_title"}),{json:o}=await ge.A.get({endpoint:`/api/v1/dashboard/?q=${n}`}),{result:r,count:i}=o;return{data:r.map((e=>({value:e.id,label:e.dashboard_title}))),totalCount:i}},this.renderSaveChartModal=()=>{var e;const t=this.info();return(0,Ee.FD)(yn.lV,{layout:"vertical",children:[(0,Ee.FD)(yn.eI,{children:[(0,Ee.Y)(Ul.s,{id:"overwrite-radio",disabled:!this.canOverwriteSlice(),checked:"overwrite"===this.state.action,onChange:()=>this.changeAction("overwrite"),children:(0,s.t)("Save (Overwrite)")}),(0,Ee.Y)(Ul.s,{id:"saveas-radio",checked:"saveas"===this.state.action,onChange:()=>this.changeAction("saveas"),children:(0,s.t)("Save as...")})]}),(0,Ee.Y)("hr",{}),(0,Ee.Y)(yn.eI,{label:(0,s.t)("Chart name"),required:!0,children:(0,Ee.Y)(yt.pd,{name:"new_slice_name",type:"text",placeholder:"Name",value:this.state.newSliceName,onChange:this.onSliceNameChange})}),"query"===(null==(e=this.props.datasource)?void 0:e.type)&&(0,Ee.FD)(yn.eI,{label:(0,s.t)("Dataset Name"),required:!0,children:[(0,Ee.Y)(st.W,{tooltip:(0,s.t)("A reusable dataset will be saved with your chart."),placement:"right"}),(0,Ee.Y)(yt.pd,{name:"dataset_name",type:"text",placeholder:"Dataset Name",value:this.state.datasetName,onChange:this.handleDatasetNameChange})]}),(0,Ee.Y)(yn.eI,{label:(0,s.t)("Add to dashboard"),children:(0,Ee.Y)(it.DW,{allowClear:!0,allowNewOptions:!0,ariaLabel:(0,s.t)("Select a dashboard"),options:this.loadDashboards,onChange:this.onDashboardChange,value:this.state.dashboard,placeholder:(0,Ee.FD)("div",{children:[(0,Ee.Y)("b",{children:(0,s.t)("Select")}),(0,s.t)(" a dashboard OR "),(0,Ee.Y)("b",{children:(0,s.t)("create")}),(0,s.t)(" a new one")]})})}),t&&(0,Ee.Y)(ve.A,{type:"info",message:t,closable:!1}),this.props.alert&&(0,Ee.Y)(ve.A,{css:(0,P.AH)({marginTop:t?16:void 0},"",""),type:"warning",message:this.props.alert,closable:!1})]})},this.info=()=>{const e=this.isNewDashboard();let t=!1;return!this.props.slice||"overwrite"===this.state.action&&this.canOverwriteSlice()||(t=!0),t&&e?(0,s.t)("A new chart and dashboard will be created."):t?(0,s.t)("A new chart will be created."):e?(0,s.t)("A new dashboard will be created."):null},this.renderFooter=()=>{var e,t;return(0,Ee.FD)("div",{children:[(0,Ee.Y)(Ye.A,{id:"btn_cancel",buttonSize:"small",onClick:this.onHide,children:(0,s.t)("Cancel")}),(0,Ee.Y)(Ye.A,{id:"btn_modal_save_goto_dash",buttonSize:"small",disabled:!this.state.newSliceName||!this.state.dashboard||(null==(e=this.props.datasource)?void 0:e.type)!==pe.cT.Table&&!this.state.datasetName,onClick:()=>this.saveOrOverwrite(!0),children:(0,s.t)("Save & go to dashboard")}),(0,Ee.Y)(Ye.A,{id:"btn_modal_save",buttonSize:"small",buttonStyle:"primary",onClick:()=>this.saveOrOverwrite(!1),disabled:this.state.isLoading||!this.state.newSliceName||(null==(t=this.props.datasource)?void 0:t.type)!==pe.cT.Table&&!this.state.datasetName,children:(0,s.t)("Save")})]})},this.state={newSliceName:e.sliceName,datasetName:null==(t=e.datasource)?void 0:t.name,action:this.canOverwriteSlice()?"overwrite":"saveas",isLoading:!1,dashboard:void 0},this.onDashboardChange=this.onDashboardChange.bind(this),this.onSliceNameChange=this.onSliceNameChange.bind(this),this.changeAction=this.changeAction.bind(this),this.saveOrOverwrite=this.saveOrOverwrite.bind(this),this.isNewDashboard=this.isNewDashboard.bind(this),this.onHide=this.onHide.bind(this)}isNewDashboard(){const{dashboard:e}=this.state;return"string"==typeof(null==e?void 0:e.value)}canOverwriteSlice(){var e,t,a;return(null==(e=this.props.slice)||null==(t=e.owners)?void 0:t.includes(this.props.user.userId))&&!(null!=(a=this.props.slice)&&a.is_managed_externally)}async componentDidMount(){let{dashboardId:e}=this.props;if(!e){let t=null;try{t=sessionStorage.getItem(ql)}catch(e){}e=t&&parseInt(t,10)}if(e)try{const t=await this.loadDashboard(e);(0,$a.m9)(t,this.props.user)&&this.setState({dashboard:{label:t.dashboard_title,value:t.id}})}catch(e){this.props.actions.addDangerToast((0,s.t)("An error occurred while loading dashboard information."))}}onSliceNameChange(e){this.setState({newSliceName:e.target.value})}onDashboardChange(e){this.setState({dashboard:e})}changeAction(e){this.setState({action:e})}onHide(){this.props.dispatch((0,le.setSaveChartModalVisibility)(!1))}async saveOrOverwrite(e){this.setState({isLoading:!0});try{var t;if((null==(t=this.props.datasource)?void 0:t.type)===pe.cT.Query){const{schema:e,sql:t,database:a}=this.props.datasource,{templateParams:n}=this.props.datasource;await this.props.actions.saveDataset({schema:e,sql:t,database:a,templateParams:n,datasourceName:this.state.datasetName})}let n=[];this.props.slice&&"overwrite"===this.state.action&&(n=await this.props.actions.getSliceDashboards(this.props.slice));const o=this.props.form_data||{};delete o.url_params;let r,l=null;if(this.state.dashboard){var a;let e=this.state.dashboard.value;this.isNewDashboard()&&(e=(await this.props.actions.createDashboard(this.state.dashboard.label)).id);try{l=await this.loadDashboard(e)}catch(e){return void this.props.actions.saveSliceFailed()}(0,i.A)(l)&&(0,i.A)(null==(a=l)?void 0:a.id)&&(n=n.includes(l.id)?n:[...n,l.id],o.dashboards=n)}this.props.actions.setFormData({...o}),r="overwrite"===this.state.action?await this.props.actions.updateSlice(this.props.slice,this.state.newSliceName,n,l?{title:l.dashboard_title,new:this.isNewDashboard()}:null):await this.props.actions.createSlice(this.state.newSliceName,n,l?{title:l.dashboard_title,new:this.isNewDashboard()}:null);try{l?sessionStorage.setItem(ql,`${l.id}`):sessionStorage.removeItem(ql)}catch(e){}if(e&&l)return void this.props.history.push(l.url);const s=this.handleRedirect(window.location.search,r);this.props.history.replace(`/explore/?${s.toString()}`),this.setState({isLoading:!1}),this.onHide()}finally{this.setState({isLoading:!1})}}render(){return(0,Ee.Y)(Vl,{show:this.props.isVisible,onHide:this.onHide,title:(0,s.t)("Save chart"),footer:this.renderFooter(),children:this.state.isLoading?(0,Ee.Y)("div",{css:P.AH`
              display: flex;
              justify-content: center;
            `,children:(0,Ee.Y)(u.A,{position:"normal"})}):this.renderSaveChartModal()})}}const Kl=(0,r.y)((0,o.Ng)((function({explore:e,saveModal:t,user:a}){return{datasource:e.datasource,slice:e.slice,user:a,dashboards:t.dashboards,alert:t.saveModalAlert,isVisible:t.isVisible}}))(Gl));var Xl=a(56449),Ql=a.n(Xl),Jl=a(70713),Zl=a(5373),es=a(51545),ts=a(84248);const as=I.I4.div`
  ${({theme:e})=>P.AH`
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: ${6*e.gridUnit}px;
    padding: 0 ${e.gridUnit}px;

    // hack to make the drag preview image corners rounded
    transform: translate(0, 0);
    background-color: inherit;
    border-radius: 4px;

    > div {
      min-width: 0;
      margin-right: ${2*e.gridUnit}px;
    }
  `}
`;function ns(e){const{labelRef:t,showTooltip:a,type:n,value:o}=e,[{isDragging:r},i]=(0,bi.i)({item:{value:e.value,type:e.type},collect:e=>({isDragging:e.isDragging()})}),l={labelRef:t,showTooltip:!r&&a,showType:!0};return(0,Ee.FD)(as,{ref:i,children:[n===un.S.Column?(0,Ee.Y)(Sn.V,{column:o,...l}):(0,Ee.Y)(Sn.b,{metric:o,...l}),(0,Ee.Y)(W.A.Drag,{})]})}const os=50,rs=50,is=30,ls=I.I4.button`
  background: none;
  border: none;
  text-decoration: underline;
  color: ${({theme:e})=>e.colors.primary.dark1};
`,ss=I.I4.div`
  text-align: center;
  padding-top: 2px;
`,cs=I.I4.div`
  ${({theme:e})=>P.AH`
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: ${e.typography.sizes.s}px;
    background-color: ${e.colors.grayscale.light4};
    margin: ${2*e.gridUnit}px 0;
    border-radius: 4px;
    padding: 0 ${e.gridUnit}px;

    &:first-of-type {
      margin-top: 0;
    }
    &:last-of-type {
      margin-bottom: 0;
    }

    padding: 0;
    cursor: pointer;
    &:hover {
      background-color: ${e.colors.grayscale.light3};
    }

    & > span {
      white-space: nowrap;
    }

    .option-label {
      display: inline;
    }

    .metric-option {
      & > svg {
        min-width: ${4*e.gridUnit}px;
      }
      & > .option-label {
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  `}
`,ds=I.I4.button`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: none;
  background: transparent;
  width: 100%;
  padding-inline: 0px;
`,us=I.I4.span`
  ${({theme:e})=>`\n    font-size: ${e.typography.sizes.m}px;\n    line-height: 1.3;\n  `}
`,hs=I.I4.div`
  ${({theme:e})=>`\n    border: 1px ${e.colors.grayscale.light4} solid;\n    border-radius: ${e.gridUnit}px;\n    font-size: ${e.typography.sizes.s}px;\n    padding: ${e.gridUnit}px;\n    color: ${e.colors.grayscale.light1};\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  `}
`,ps=({index:e,style:t,data:a})=>{const{metricSlice:n,columnSlice:o,totalMetrics:r,totalColumns:i,width:l,showAllMetrics:c,onShowAllMetricsChange:d,showAllColumns:u,onShowAllColumnsChange:h,collapseMetrics:p,onCollapseMetricsChange:f,collapseColumns:g,onCollapseColumnsChange:m,hiddenMetricCount:v,hiddenColumnCount:b}=a,y=p?[]:n,x=p?1:2,w=p?e>=1:e>y.length+x,C=w?y.length+x+1:0,S=C+1,A=(w?o.length:y.length)+(p?C:S)+1,k=w?g:p,E=w?m:f,_=w?u:c,M=w?h:d,D=(0,I.DP)(),T=w?b:v;return(0,Ee.FD)("div",{style:t,css:P.AH`
        padding: 0 ${4*D.gridUnit}px;
      `,children:[e===C&&(0,Ee.FD)(ds,{onClick:()=>E(!k),children:[(0,Ee.Y)(us,{children:w?(0,s.t)("Columns"):(0,s.t)("Metrics")}),k?(0,Ee.Y)(W.A.DownOutlined,{iconSize:"s"}):(0,Ee.Y)(W.A.UpOutlined,{iconSize:"s"})]}),e===S&&!k&&(0,Ee.FD)("div",{css:P.AH`
            display: flex;
            gap: ${2*D.gridUnit}px;
            justify-content: space-between;
            align-items: baseline;
          `,children:[(0,Ee.Y)("div",{className:"field-length",css:P.AH`
              flex-shrink: 0;
            `,children:w?(0,s.t)("Showing %s of %s",null==o?void 0:o.length,i):(0,s.t)("Showing %s of %s",null==y?void 0:y.length,r)}),T>0&&(0,Ee.Y)(hs,{children:(0,s.t)("%s ineligible item(s) are hidden",T)})]}),e>S&&e<A&&(0,Ee.Y)(cs,{className:"column",children:(0,Ee.Y)(ns,{value:w?o[e-S-1]:y[e-S-1],type:w?un.S.Column:un.S.Metric})},(w?o[e-S-1].column_name:y[e-S-1].metric_name)+String(l)),e===A&&!k&&(w?i>os:r>rs)&&(0,Ee.Y)(ss,{children:(0,Ee.Y)(ls,{onClick:()=>M(!_),children:_?(0,s.t)("Show less..."):(0,s.t)("Show all...")})})]})},fs=I.I4.div`
  ${({theme:e})=>P.AH`
    background-color: ${e.colors.grayscale.light5};
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
    max-height: 100%;
    .ant-collapse {
      height: auto;
    }
    .field-selections {
      padding: 0 0 ${e.gridUnit}px;
      overflow: auto;
      height: 100%;
    }
    .field-length {
      margin-bottom: ${2*e.gridUnit}px;
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.light1};
    }
    .form-control.input-md {
      width: calc(100% - ${8*e.gridUnit}px);
      height: ${8*e.gridUnit}px;
      margin: ${2*e.gridUnit}px auto;
    }
    .type-label {
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.base};
    }
    .Control {
      padding-bottom: 0;
    }
  `};
`,gs=I.I4.div`
  ${({theme:e})=>P.AH`
    margin: 0 ${2.5*e.gridUnit}px;

    span {
      text-decoration: underline;
    }
  `}
`,ms=2,vs=e=>e.sort(((e,t)=>{var a,n;return(null!=(a=null==t?void 0:t.is_certified)?a:0)-(null!=(n=null==e?void 0:e.is_certified)?n:0)}));function bs({datasource:e,formData:t,controls:{datasource:a},actions:o,width:r}){const[i]=(0,n.useContext)(oi),{columns:l,metrics:c}=e,d=(0,n.useMemo)((()=>{const e=Object.values(i);return Ql()(l)?l.filter((t=>e.some((e=>e({value:t,type:un.S.Column}))))):[]}),[i,l]),u=(0,n.useMemo)((()=>[...d].sort(((e,t)=>null==e||!e.is_dttm||null!=t&&t.is_dttm?null==t||!t.is_dttm||null!=e&&e.is_dttm?0:1:-1))),[d]),h=(0,n.useMemo)((()=>{const e=Object.values(i);return c.filter((t=>e.some((e=>e({value:t,type:un.S.Metric})))))}),[i,c]),p=l.length-d.length,g=c.length-h.length,[m,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[x,w]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),[A,k]=(0,n.useState)(!1),[E,_]=(0,n.useState)(!1),M=(0,ts.Q)(b,f.jW),D=(0,n.useMemo)((()=>M?(0,es.Ht)(u,M,{keys:[{key:"verbose_name",threshold:es.cG.CONTAINS},{key:"column_name",threshold:es.cG.CONTAINS},{key:e=>{var t,a;return[null!=(t=null==e?void 0:e.description)?t:"",null!=(a=null==e?void 0:e.expression)?a:""].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||""))},threshold:es.cG.CONTAINS,maxRanking:es.cG.CONTAINS}],keepDiacritics:!0}):null!=u?u:[]),[u,M]),T=(0,n.useMemo)((()=>M?(0,es.Ht)(h,M,{keys:[{key:"verbose_name",threshold:es.cG.CONTAINS},{key:"metric_name",threshold:es.cG.CONTAINS},{key:e=>{var t,a;return[null!=(t=null==e?void 0:e.description)?t:"",null!=(a=null==e?void 0:e.expression)?a:""].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||""))},threshold:es.cG.CONTAINS,maxRanking:es.cG.CONTAINS}],keepDiacritics:!0,baseSort:(e,t)=>{var a,n,o,r,i,l;return Number(null!=(a=null==t||null==(n=t.item)?void 0:n.is_certified)?a:0)-Number(null!=(o=null==e||null==(r=e.item)?void 0:r.is_certified)?o:0)||String(null!=(i=null==e?void 0:e.rankedValue)?i:"").localeCompare(null!=(l=null==t?void 0:t.rankedValue)?l:"")}}):null!=h?h:[]),[h,M]),O=(0,n.useMemo)((()=>x?T:null==T||null==T.slice?void 0:T.slice(0,rs)),[T,x]),Y=(0,n.useMemo)((()=>vs(C?D:null==D||null==D.slice?void 0:D.slice(0,os))),[D,C]),R=()=>{try{if("false"===sessionStorage.getItem("showInfobox"))return!1}catch(e){}return!0},F={query:pe.cT.Query,saved_query:pe.cT.SavedQuery},I=e.type&&F[e.type],P=(0,n.useMemo)((()=>(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(yt.pd,{allowClear:!0,onChange:e=>{y(e.target.value)},value:b,className:"form-control input-md",placeholder:(0,s.t)("Search Metrics & Columns")}),(0,Ee.FD)("div",{className:"field-selections",children:[I&&R()&&(0,Ee.Y)(gs,{children:(0,Ee.Y)(ve.A,{closable:!0,onClose:()=>{try{sessionStorage.setItem("showInfobox","false")}catch(e){}},type:"info",message:"",description:(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)("span",{role:"button",tabIndex:0,onClick:()=>v(!0),className:"add-dataset-alert-description",children:(0,s.t)("Create a dataset")}),(0,s.t)(" to edit or add columns and metrics.")]})})}),(0,Ee.Y)(Jl.Ay,{children:({height:e})=>(0,Ee.Y)(Zl.Y1,{width:r-ms,height:e,itemSize:is,itemCount:(A?0:null==O?void 0:O.length)+(E?0:Y.length)+2+(A?0:2)+(E?0:2),itemData:{metricSlice:O,columnSlice:Y,width:r,totalMetrics:T.length,totalColumns:D.length,showAllMetrics:x,onShowAllMetricsChange:w,showAllColumns:C,onShowAllColumnsChange:S,collapseMetrics:A,onCollapseMetricsChange:k,collapseColumns:E,onCollapseColumnsChange:_,hiddenMetricCount:g,hiddenColumnCount:p},overscanCount:5,children:ps})})]})]})),[Y,b,D.length,T.length,O,C,x,A,E,I,r]);return(0,Ee.FD)(fs,{children:[I&&m&&(0,Ee.Y)(be.D,{visible:m,onHide:()=>v(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),datasource:(0,ye.l)(e),openWindow:!1,formData:t}),(0,Ee.Y)(Ol,{...a,name:"datasource",actions:o}),null!=e.id&&P]})}var ys=a(41811),xs=a(58962);const ws=(0,ys.A)(((e,t)=>{const a={};return((null==t?void 0:t.controlPanelSections)||[]).filter(Tr.lW).forEach((e=>{e.controlSetRows.forEach((e=>{e.forEach((e=>{e&&("string"==typeof e?a[e]=xs.ne[e]:e.name&&e.config&&(a[e.name]=e.config))}))}))})),a}));var Cs=a(50217);const Ss=I.I4.span`
  ${({theme:e})=>`\n    font-size: ${e.typography.sizes.s}px;\n    color: ${e.colors.grayscale.dark1};\n    background-color: ${e.colors.alert.base};\n\n    &:hover {\n      background-color: ${e.colors.alert.dark1};\n    }\n  `}
`,As=e=>null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length?null:e,ks=(e,t,a)=>{var n,o,r,i;if(void 0===e)return"N/A";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("AdhocFilterControl"===(null==(n=a[t])?void 0:n.type)&&Array.isArray(e))return e.length?e.map((e=>{const t=e.comparator&&e.comparator.constructor===Array?`[${e.comparator.join(", ")}]`:e.comparator;return`${e.subject} ${e.operator} ${t}`})).join(", "):"[]";if("BoundsControl"===(null==(o=a[t])?void 0:o.type))return`Min: ${e[0]}, Max: ${e[1]}`;if("CollectionControl"===(null==(r=a[t])?void 0:r.type)&&Array.isArray(e))return e.map((e=>(0,Ga.J)(e))).join(", ");if("MetricsControl"===(null==(i=a[t])?void 0:i.type)&&e.constructor===Array){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}if(Array.isArray(e)){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}return"string"==typeof e||"number"==typeof e?e:(0,Ga.J)(e)},Es=e=>{var t;const[a,o]=(0,n.useState)([]),[r,i]=(0,n.useState)(!1),l=(0,n.useCallback)((()=>{const t=(0,ae.kV)(e.origFormData),a=(0,ae.kV)(e.currentFormData),n=Object.keys(a),o={};return n.forEach((e=>{var n,r;(t[e]||a[e])&&(["filters","having","where"].includes(e)||(n=t[e],r=a[e],D()(As(n),As(r))||(o[e]={before:t[e],after:a[e]})))})),o}),[e.currentFormData,e.origFormData]);(0,n.useEffect)((()=>{var t;const a=l(),n=(e=>{const t=(0,Xe.A)().get(e);return ws(e,t)})(null==(t=e.origFormData)?void 0:t.viz_type);o(((e,t)=>Object.entries(e).map((([e,a])=>{var n;return{control:(null==(n=t[e])?void 0:n.label)||e,before:ks(a.before,e,t),after:ks(a.after,e,t)}})))(a,n)),i(!ir()(a))}),[l,null==(t=e.origFormData)?void 0:t.viz_type]);const c=(0,n.useMemo)((()=>{const e=[{accessor:"control",Header:(0,s.t)("Control")},{accessor:"before",Header:(0,s.t)("Before")},{accessor:"after",Header:(0,s.t)("After")}];return(0,Ee.Y)(Cs.A,{columns:e,data:a,pageSize:50,className:"table-condensed",columnsForWrapText:["Control","Before","After"]})}),[a]),d=(0,n.useMemo)((()=>(0,Ee.Y)(z.m,{id:"difference-tooltip",title:(0,s.t)("Click to see difference"),children:(0,Ee.Y)(Ss,{className:"label",children:(0,s.t)("Altered")})})),[]);return r?(0,Ee.Y)(Ba.A,{triggerNode:d,modalTitle:(0,s.t)("Chart changes"),modalBody:c,responsive:!0}):null};var _s=a(36446),Ms=a(51848),Ds=a(13917),Ts=a(55556),Os=a(15700);const Ys={actions:R().object.isRequired,canOverwrite:R().bool.isRequired,canDownload:R().bool.isRequired,dashboardId:R().number,isStarred:R().bool.isRequired,slice:R().object,sliceName:R().string,table_name:R().string,formData:R().object,ownState:R().object,timeout:R().number,chart:ee.tb,saveDisabled:R().bool},Rs=e=>P.AH`
  color: ${e.colors.primary.dark2};
  & > span[role='img'] {
    margin-right: 0;
  }
`,Fs=e=>P.AH`
  display: flex;
  align-items: center;
  margin-left: ${e.gridUnit}px;
  & > span {
    margin-right: ${3*e.gridUnit}px;
  }
`,Is=({dashboardId:e,slice:t,actions:a,formData:i,ownState:l,chart:c,user:d,canOverwrite:u,canDownload:h,isStarred:p,sliceName:f,saveDisabled:g,metadata:m})=>{const v=(0,o.wA)(),{latestQueryFormData:b,sliceFormData:y}=c,[x,w]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{const{dashboards:t}=m||{},a=e&&t&&t.find((t=>t.id===e));if(a){if(a)try{var n;const e=await ge.A.get({endpoint:`/api/v1/dashboard/${a.id}`}),t=null==e||null==(n=e.json)?void 0:n.result,o=JSON.parse(t.json_metadata);(0,Ts.D2)(o)}catch(e){N.A.info((0,s.t)("Unable to retrieve dashboard colors"))}}else(0,Ts.Ky)(null==m?void 0:m.color_namespace)})()}),[]);const C=(0,n.useCallback)((()=>{v((0,le.setSaveChartModalVisibility)(!0))}),[v]),S=(0,n.useCallback)((e=>{v((0,ie.sliceUpdated)(e))}),[v]),A=(0,r.W6)(),{redirectSQLLab:k}=a,E=(0,n.useCallback)(((e,t=!1)=>{k(e,!t&&A)}),[k,A]),[_,M,D]=(0,Os.oU)(b,h,t,E,(()=>{w(!0)}),l,null==m?void 0:m.dashboards),T=(0,n.useMemo)((()=>{if(!m)return null;const e=[];return e.push({type:Ds.QD.Dashboards,title:m.dashboards.length>0?(0,s.tn)("Added to 1 dashboard","Added to %s dashboards",m.dashboards.length,m.dashboards.length):(0,s.t)("Not added to any dashboard"),description:m.dashboards.length>0?(0,s.t)("You can preview the list of dashboards in the chart settings dropdown."):void 0}),e.push({type:Ds.QD.LastModified,value:m.changed_on_humanized,modifiedBy:m.changed_by||(0,s.t)("Not available")}),e.push({type:Ds.QD.Owner,createdBy:m.created_by||(0,s.t)("Not available"),owners:m.owners.length>0?m.owners:(0,s.t)("None"),createdOn:m.created_on_humanized}),null!=t&&t.description&&e.push({type:Ds.QD.Description,value:null==t?void 0:t.description}),(0,Ee.Y)(Ds.Ay,{items:e,tooltipPlacement:"bottom"})}),[m,null==t?void 0:t.description]),O=null==t?void 0:t.slice_name;return(0,Ee.FD)(Ee.FK,{children:[(0,Ee.Y)(Ms.U,{editableTitleProps:{title:f,canEdit:!t||u||((null==t?void 0:t.owners)||[]).includes(null==d?void 0:d.userId),onSave:a.updateChartTitle,placeholder:(0,s.t)("Add the name of the chart"),label:(0,s.t)("Chart title")},showTitlePanelItems:!!t,certificatiedBadgeProps:{certifiedBy:null==t?void 0:t.certified_by,details:null==t?void 0:t.certification_details},showFaveStar:!(null==d||!d.userId),faveStarProps:{itemId:null==t?void 0:t.slice_id,fetchFaveStar:a.fetchFaveStar,saveFaveStar:a.saveFaveStar,isStarred:p,showTooltip:!0},titlePanelAdditionalItems:(0,Ee.FD)("div",{css:Fs,children:[y?(0,Ee.Y)(Es,{className:"altered",origFormData:{...y,chartTitle:O},currentFormData:{...i,chartTitle:f}}):null,T]}),rightPanelAdditionalItems:(0,Ee.Y)(z.m,{title:g?(0,s.t)("Add required control values to save chart"):null,children:(0,Ee.Y)("div",{children:(0,Ee.FD)(Ye.A,{buttonStyle:"secondary",onClick:C,disabled:g,css:Rs,children:[(0,Ee.Y)(W.A.SaveOutlined,{iconSize:"l"}),(0,s.t)("Save")]})})}),additionalActionsMenu:_,menuDropdownProps:{visible:M,onVisibleChange:D}}),x&&(0,Ee.Y)(_s.A,{show:x,onHide:()=>{w(!1)},onSave:S,slice:t})]})};Is.propTypes=Ys;const Ps=Is,Ns={...qe.propTypes,actions:R().object.isRequired,datasource_type:R().string.isRequired,dashboardId:R().number,isDatasourceMetaLoading:R().bool.isRequired,chart:ee.tb.isRequired,slice:R().object,sliceName:R().string,controls:R().object.isRequired,forcedHeight:R().string,form_data:R().object.isRequired,standalone:R().bool.isRequired,force:R().bool,timeout:R().number,impressionId:R().string,vizType:R().string,saveAction:R().string,isSaveModalVisible:R().bool},Ls=I.I4.div`
  ${({theme:e})=>P.AH`
    background: ${e.colors.grayscale.light5};
    text-align: left;
    position: relative;
    width: 100%;
    max-height: 100%;
    min-height: 0;
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    border-top: 1px solid ${e.colors.grayscale.light2};
    .explore-column {
      display: flex;
      flex-direction: column;
      padding: ${2*e.gridUnit}px 0;
      max-height: 100%;
    }
    .data-source-selection {
      background-color: ${e.colors.grayscale.light5};
      padding: ${2*e.gridUnit}px 0;
      border-right: 1px solid ${e.colors.grayscale.light2};
    }
    .main-explore-content {
      flex: 1;
      min-width: ${128*e.gridUnit}px;
      border-left: 1px solid ${e.colors.grayscale.light2};
      padding: 0 ${4*e.gridUnit}px;
      .panel {
        margin-bottom: 0;
      }
    }
    .controls-column {
      align-self: flex-start;
      padding: 0;
    }
    .title-container {
      position: relative;
      display: flex;
      flex-direction: row;
      padding: 0 ${2*e.gridUnit}px 0 ${4*e.gridUnit}px;
      justify-content: space-between;
      .horizontal-text {
        font-size: ${e.typography.sizes.m}px;
      }
    }
    .no-show {
      display: none;
    }
    .vertical-text {
      writing-mode: vertical-rl;
      text-orientation: mixed;
    }
    .sidebar {
      height: 100%;
      background-color: ${e.colors.grayscale.light4};
      padding: ${2*e.gridUnit}px;
      width: ${8*e.gridUnit}px;
    }
    .collapse-icon > svg {
      color: ${e.colors.primary.base};
    }
  `};
`,$s=O()((async(e,t,a,n,o,r,i,l)=>{const s={...e},c=e.slice_id,d=new URLSearchParams(window.location.search),u=Object.fromEntries(d);c?u[f.vX.sliceId.name]=c:(u[f.vX.datasourceId.name]=t,u[f.vX.datasourceType.name]=a);const h=(null==s?void 0:s.url_params)||{};Object.entries(h).forEach((([e,t])=>{f.v2.includes(e)||(u[e]=t)}));try{let d,h;if(n?(d=await(0,ae.T3)(t,a,e,c,l),h="replaceState"):(d=(0,p.P3)(f.vX.formDataKey),await(0,ae.cL)(t,a,d,e,c,l),h="pushState"),window.location.pathname.startsWith("/explore")){const e=(0,oe.eX)(o?f.vX.standalone.name:null,{[f.vX.formDataKey.name]:d,...u},r);window.history[h](s,i,e)}}catch(e){N.A.warn("Failed at altering browser history",e)}}),1e3),Bs={controls_width:320,datasource_width:300};function Hs(e){return(0,U.Gq)(e,Bs[e])}function js(e,t){const a=Number(Hs(e))+t.width;(0,U.SO)(e,a)}function zs(e){const t=(0,j.Q)().dynamicPlugins[e.vizType],a=t&&t.mounting,o=(0,L.Z)(a),r=(0,L.Z)(e.controls),[i,l]=(0,n.useState)(e.controls),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(Hs(U.Hh.DatasourceWidth)),p=(0,se.w)(),f=(0,I.DP)(),g=(0,n.useCallback)((async({isReplace:t=!1,title:a}={})=>{const n=e.dashboardId?{...e.form_data,dashboardId:e.dashboardId}:e.form_data,{id:o,type:r}=e.datasource;$s(n,o,r,t,e.standalone,e.force,a,p)}),[e.dashboardId,e.form_data,e.datasource.id,e.datasource.type,e.standalone,e.force,p]),m=(0,n.useCallback)((()=>{const t=window.history.state;t&&Object.keys(t).length&&(e.actions.setExploreControls(t),e.actions.postChartFormData(t,e.force,e.timeout,e.chart.id))}),[e.actions,e.chart.id,e.timeout]),v=(0,n.useCallback)((()=>{e.actions.setForceQuery(!1),e.actions.triggerQuery(!0,e.chart.id),g(),l(e.controls)}),[e.controls,g,e.actions,e.chart.id]),b=(0,n.useCallback)((t=>{if(t.ctrlKey||t.metaKey){const a="Enter"===t.key||13===t.keyCode,n="s"===t.key||83===t.keyCode;a?v():n&&e.slice&&e.actions.saveSlice(e.form_data,{action:"overwrite",slice_id:e.slice.slice_id,slice_name:e.slice.slice_name,add_to_dash:"noSave",goto_dash:!1}).then((({data:e})=>{window.location=e.slice.slice_url}))}}),[v,e.actions,e.form_data,e.slice]);function y(){d(!c)}(0,$.B)((()=>{e.actions.logEvent(K.HK)})),(0,B.h)(p,((e,t)=>{t&&g({isReplace:!0})}));const x=(0,L.Z)(m);(0,n.useEffect)((()=>(x&&window.removeEventListener("popstate",x),window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)})),[m,x]);const w=(0,L.Z)(b);(0,n.useEffect)((()=>(w&&window.removeEventListener("keydown",w),document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)})),[b,w]),(0,n.useEffect)((()=>{o&&!a&&e.actions.dynamicPluginControlsReady()}),[a]),(0,n.useEffect)((()=>{Object.values(e.controls).some((e=>e.validationErrors&&e.validationErrors.length>0))||e.actions.triggerQuery(!0,e.chart.id)}),[]);const C=(0,n.useCallback)((t=>{const a=t?{...e.chart.latestQueryFormData,...(0,re.LK)(S()(e.controls,t))}:(0,re.LK)(e.controls);e.actions.updateQueryFormData(a,e.chart.id),e.actions.renderTriggered((new Date).getTime(),e.chart.id),g()}),[g,e.actions,e.chart.id,e.chart.latestQueryFormData,e.controls]);(0,n.useEffect)((()=>{if(r&&e.chart.latestQueryFormData.viz_type===e.controls.viz_type.value){!e.controls.datasource||null!=r.datasource&&e.controls.datasource.value===r.datasource.value||(0,Z.VZ)(e.form_data.datasource,!0);const t=Object.keys(e.controls).filter((t=>void 0!==r[t]&&!(0,V.r$)(e.controls[t].value,r[t].value))).filter((t=>e.controls[t].renderTrigger));t.length>0&&C(t)}}),[e.controls,e.ownState]);const A=(0,n.useMemo)((()=>{if(i){const{controls:t}=e;return Object.keys(t).filter((e=>{const a=i[e];if(void 0===a)return!1;const{value:n}=t[e],{value:o}=a;return _()(n)&&_()(o)?!(0,V.r$)(n,o,{ignoreFields:["datasourceWarning"]}):!D()(n,o)})).some((t=>!e.controls[t].renderTrigger&&!e.controls[t].dontRefreshOnChange))}return!1}),[i,e.controls]);(0,B.h)(e.saveAction,(()=>{["saveas","overwrite"].includes(e.saveAction)&&(v(),g({isReplace:!0}),e.actions.setSaveAction(null))})),(0,n.useEffect)((()=>{void 0!==e.ownState&&(v(),C())}),[e.ownState]),A&&e.actions.logEvent(K.FO);const k=(0,n.useMemo)((()=>{const t=Object.values(e.controls).filter((e=>e.validationErrors&&e.validationErrors.length>0));if(0===t.length)return null;const a=t.map((e=>e.validationErrors)),n=[...new Set(a.flat())].map((e=>[t.filter((t=>{var a;return null==(a=t.validationErrors)?void 0:a.includes(e)})).map((e=>e.label)),e])).map((([e,t])=>(0,Ee.FD)("div",{children:[e.length>1?(0,s.t)("Controls labeled "):(0,s.t)("Control labeled "),(0,Ee.Y)("strong",{children:` ${e.join(", ")}`}),(0,Ee.FD)("span",{children:[": ",t]})]},t)));let o;return n.length>0&&(o=(0,Ee.Y)("div",{style:{textAlign:"left"},children:n})),o}),[e.controls]);function E(){return(0,Ee.Y)(qe,{...e,errorMessage:k,chartIsStale:A,onQuery:v})}return e.standalone?E():(0,Ee.FD)(li,{children:[(0,Ee.Y)(Ps,{actions:e.actions,canOverwrite:e.can_overwrite,canDownload:e.can_download,dashboardId:e.dashboardId,isStarred:e.isStarred,slice:e.slice,sliceName:e.sliceName,table_name:e.table_name,formData:e.form_data,chart:e.chart,ownState:e.ownState,user:e.user,reports:e.reports,saveDisabled:k||"loading"===e.chart.chartStatus,metadata:e.metadata}),(0,Ee.FD)(Ls,{id:"explore-container",children:[(0,Ee.Y)(P.mL,{styles:P.AH`
            .navbar {
              margin-bottom: 0;
            }
            body {
              height: 100vh;
              max-height: 100vh;
              overflow: hidden;
            }
            #app-menu,
            #app {
              flex: 1 1 auto;
            }
            #app {
              flex-basis: 100%;
              overflow: hidden;
              height: 100%;
            }
            #app-menu {
              flex-shrink: 0;
            }
          `}),(0,Ee.FD)(H.c,{onResizeStop:(e,t,a,n)=>{h(a.getBoundingClientRect().width),js(U.Hh.DatasourceWidth,n)},defaultSize:{width:Hs(U.Hh.DatasourceWidth),height:"100%"},minWidth:Bs[U.Hh.DatasourceWidth],maxWidth:"33%",enable:{right:!0},className:c?"no-show":"explore-column data-source-selection",children:[(0,Ee.FD)("div",{className:"title-container",children:[(0,Ee.Y)("span",{className:"horizontal-text",children:(0,s.t)("Chart Source")}),(0,Ee.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:y,children:(0,Ee.Y)(W.A.Expand,{className:"collapse-icon",iconColor:f.colors.primary.base,iconSize:"l"})})]}),(0,Ee.Y)(bs,{formData:e.form_data,datasource:e.datasource,controls:e.controls,actions:e.actions,width:u,user:e.user})]}),c?(0,Ee.Y)("div",{className:"sidebar",onClick:y,role:"button",tabIndex:0,children:(0,Ee.Y)("span",{role:"button",tabIndex:0,className:"action-button",children:(0,Ee.Y)(z.m,{title:(0,s.t)("Open Datasource tab"),children:(0,Ee.Y)(W.A.Collapse,{className:"collapse-icon",iconColor:f.colors.primary.base,iconSize:"l"})})})}):null,(0,Ee.Y)(H.c,{onResizeStop:(e,t,a,n)=>js(U.Hh.ControlsWidth,n),defaultSize:{width:Hs(U.Hh.ControlsWidth),height:"100%"},minWidth:Bs[U.Hh.ControlsWidth],maxWidth:"33%",enable:{right:!0},className:"col-sm-3 explore-column controls-column",children:(0,Ee.Y)(jl,{exploreState:e.exploreState,actions:e.actions,form_data:e.form_data,controls:e.controls,chart:e.chart,datasource_type:e.datasource_type,isDatasourceMetaLoading:e.isDatasourceMetaLoading,onQuery:v,onStop:function(){e.chart&&e.chart.queryController&&e.chart.queryController.abort()},canStopQuery:e.can_add||e.can_overwrite,errorMessage:k,chartIsStale:A})}),(0,Ee.Y)("div",{className:Q()("main-explore-content",c?"col-sm-9":"col-sm-7"),children:E()})]}),e.isSaveModalVisible&&(0,Ee.Y)(Kl,{addDangerToast:e.addDangerToast,actions:e.actions,form_data:e.form_data,sliceName:e.sliceName,dashboardId:e.dashboardId})]})}zs.propTypes=Ns;const Ws=(0,o.Ng)((function(e){var t,a,n,o,r,i,l,s,c;const{explore:d,charts:u,common:h,impressionId:p,dataMask:f,reports:g,user:m,saveModal:v}=e,{controls:b,slice:y,datasource:x,metadata:w,hiddenFormData:C}=d,S=null!=(t=b.query_mode)&&t.value?(e=>Object.keys(null!=e?e:{}).filter((e=>!q.y3.has(e))))(C):Object.keys(null!=C?C:{}),A=k()((0,re.LK)(b),S),E=null!=(a=null!=(n=A.slice_id)?n:null==y?void 0:y.slice_id)?a:0;A.extra_form_data=(0,te.pY)({...A.extra_form_data},{...null==(o=f[E])?void 0:o.ownState});const _=u[E];let M=Number(null==(r=d.form_data)?void 0:r.dashboardId);return Number.isNaN(M)&&(M=void 0),{isDatasourceMetaLoading:d.isDatasourceMetaLoading,datasource:x,datasource_type:x.type,datasourceId:x.datasource_id,dashboardId:M,controls:d.controls,can_add:!!d.can_add,can_download:!!d.can_download,can_overwrite:!!d.can_overwrite,column_formats:null!=(i=null==x?void 0:x.column_formats)?i:null,containerId:y?`slice-container-${y.slice_id}`:"slice-container",isStarred:d.isStarred,slice:y,sliceName:null!=(l=null!=(s=d.sliceName)?s:null==y?void 0:y.slice_name)?l:null,triggerRender:d.triggerRender,form_data:A,table_name:x.table_name,vizType:A.viz_type,standalone:!!d.standalone,force:!!d.force,chart:_,timeout:h.conf.SUPERSET_WEBSERVER_TIMEOUT,ownState:null==(c=f[E])?void 0:c.ownState,impressionId:p,user:m,exploreState:d,reports:g,metadata:w,saveAction:d.saveAction,isSaveModalVisible:v.isVisible}}),(function(e){const t={...ie,...ne.O0,...le,...J,...G};return{actions:(0,F.zH)(t,e)}}))((0,ce.Ay)((0,n.memo)(zs)));a(75827);(0,s.t)("Chart Options"),(0,s.t)("Use Area Proportions"),(0,s.t)("Check if the Rose Chart should use segment area instead of segment radius for proportioning"),(0,s.t)("Stacked Style"),(0,s.t)("stack"),(0,s.t)("stream"),(0,s.t)("expand"),(0,s.t)("Chart Options"),(0,s.t)("Chart Options"),(0,s.t)("Columns"),(0,s.t)("Columns to display"),pe.cT.Table;const Us={form_data:{datasource:"0__table",viz_type:"table"},dataset:{id:0,type:pe.cT.Table,columns:[],metrics:[],column_formats:{},currency_formats:{},verbose_map:{},main_dttm_col:"",owners:[],datasource_name:"missing_datasource",name:"missing_datasource",description:null},slice:null};var qs=a(808),Vs=a(59838);const Gs=e=>e.reduce(((e,t)=>{var a;return a=t,e.some((e=>(0,qs.wF)(e)&&(0,qs.wF)(a)&&e.clause===a.clause&&e.sqlExpression===a.sqlExpression||(0,qs.md)(e)&&(0,qs.md)(a)&&e.operator===a.operator&&e.subject===a.subject&&(!("comparator"in e)&&!("comparator"in a)||"comparator"in e&&"comparator"in a&&D()(e.comparator,a.comparator))))||e.push(t),e}),[]),Ks=(e,t)=>{const a=e.extra_form_data||{};return"time_range"in a?t.map((e=>"TEMPORAL_RANGE"===e.operator?{...e,comparator:a.time_range,isExtra:!0}:e)):t},Xs=(e,t)=>{const a=((e,t)=>{const a={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity"},n={},o={};return(0,fe.A)(t.extra_filters).forEach((e=>{if(a[e.col])e.val!==Ke.WC&&(o[a[e.col]]=e.val,n[e.col]=e.val);else{const t=(0,Vs.r)({...e,isExtra:!0});o.adhoc_filters=[...(0,fe.A)(o.adhoc_filters),t]}})),o.applied_time_extras=n,o})(0,t),n=((e,t)=>{const a={},n=t.extra_form_data||{};Object.entries(Ke.DV).forEach((([e,t])=>{const o=n[e];(0,i.A)(o)&&(a[t]=o)})),"time_grain_sqla"in n&&(a.time_grain_sqla=n.time_grain_sqla),"granularity_sqla"in n&&(a.granularity_sqla=n.granularity_sqla);const o=t.extras||{};Ke.KE.forEach((e=>{const t=n[e];(0,i.A)(t)&&(o[e]=t)})),Object.keys(o).length&&(a.extras=o),a.adhoc_filters=(0,fe.A)(n.adhoc_filters).map((e=>({...e,isExtra:!0})));const r=(0,fe.A)(n.filters).map((e=>(0,Vs.r)({...e,isExtra:!0})));return Object.keys(e).forEach((e=>{e.match(/adhoc_filter.*/)&&(a[e]=[...(0,fe.A)(a[e]),...r])})),a})(e,t),o=[...Object.keys(e),...Object.keys(a),...Object.keys(n)].filter((e=>e.match(/adhoc_filter.*/))).reduce(((o,r)=>{return{...o,[r]:(i=Ks(t,Gs([...(0,fe.A)(e[r]),...(0,fe.A)(a[r]),...(0,fe.A)(n[r])])),l=0===e.slice_id,i.map((e=>e.isExtra?{...e,isExtra:!l}:e)))};var i,l}),{});return{...e,...t,...a,...n,...o}},Qs=async e=>{try{var t;const a=await(0,l.A)({method:"GET",endpoint:"api/v1/explore/"})(e);if((e=>{var t,a,n;return(null==e||null==(t=e.result)?void 0:t.form_data)&&(0,i.A)(null==e||null==(a=e.result)||null==(n=a.dataset)?void 0:n.id)})(a))return a;let n=(0,s.t)("Failed to load chart data");const o=null==a||null==(t=a.result)?void 0:t.message;throw o&&(n=`${n}:\n${o}`),new Error(n)}catch(e){const t=await(0,c.h4)(e);throw new Error(t.message||t.error||(0,s.t)("Failed to load chart data."))}},Js=()=>{const e=(t=(0,p.P3)(f.vX.dashboardPageId))&&(0,U.Gq)(U.Hh.DashboardExploreContext,{})[t]||null;var t;if(e){const t=(0,p.P3)(f.vX.sliceId)||0,{labelsColor:a,labelsColorMap:n,colorScheme:o,chartConfiguration:r,nativeFilters:i,filterBoxFilters:l,dataMask:s,dashboardId:c}=e,d=(0,g.A)({chart:{id:t},filters:(0,m.MB)(t,l),nativeFilters:i,chartConfiguration:r,colorScheme:o,dataMask:s,labelsColor:a,labelsColorMap:n,sliceId:t,allSliceIds:[t],extraControls:{}});return Object.assign(d,{dashboardId:c}),d}return null};function Zs(){const[e,t]=(0,n.useState)(!1),a=(0,n.useRef)(!1),i=(0,o.wA)(),l=(0,r.zy)();return(0,n.useEffect)((()=>{const e=x(l),n=(0,p.P3)(f.vX.saveAction),o=Js();a.current&&!n||Qs(e).then((({result:e})=>{const t=!a.current&&o?Xs(e.form_data,o):e.form_data;i((0,w.B)({...e,form_data:t,saveAction:n}))})).catch((e=>{i((0,w.B)(Us)),i((0,h.iB)(e.message))})).finally((()=>{t(!0),a.current=!0})),(0,d.Ay)().source=d.iw.Explore}),[i,l]),e?(0,Ee.Y)(Ws,{}):(0,Ee.Y)(u.A,{})}}}]);
//# sourceMappingURL=0bef5732cbf5469c0f4b.chunk.js.map