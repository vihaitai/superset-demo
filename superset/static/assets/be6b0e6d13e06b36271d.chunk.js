(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2824],{7240:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(96540),a=r(2445);function o(e,t){class r extends n.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=t&&t.componentWillUnmount&&t.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&e(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,a.Y)("div",{ref:this.setContainerRef,id:e,className:t})}}const o=r;return e.displayName&&(o.displayName=e.displayName),e.propTypes&&(o.propTypes={...o.propTypes,...e.propTypes}),e.defaultProps&&(o.defaultProps=e.defaultProps),r}},13090:(e,t,r)=>{"use strict";r.d(t,{a1:()=>M,nf:()=>d.A,hq:()=>C.A,hs:()=>n,oZ:()=>a.A,XB:()=>T.A,Oj:()=>h.A,Ho:()=>m.A,mu:()=>p.A,Am:()=>g.A,aT:()=>v.A,qw:()=>f.A,lM:()=>y.A,VJ:()=>_.A,qO:()=>o.A,w_:()=>A.A,CP:()=>D.A,zM:()=>s.A,wI:()=>R.w,Ck:()=>u.A,fH:()=>S.fH,iw:()=>S.iw,LC:()=>E.A,F5:()=>F.A,RE:()=>c.A,o3:()=>w.o3,yG:()=>w.yG,nn:()=>i.A,OB:()=>w.OB,HG:()=>S.Ay,cH:()=>l.A,E2:()=>w.E2,Ob:()=>w.Ob});var n=r(94963),a=r(10526),o=r(20750),i=r(76968),s=r(54249),l=r(69161),c=r(30885),u=r(22054),d=r(94584),h=r(9755),m=r(35638),p=r(65621),g=r(32215),f=r(33269),A=r(44767),y=r(32637),v=r(67051),T=r(66361),C=r(58540),_=r(49482),D=r(20455),E=r(58966),F=r(17838),w=r(39472),R=r(63756),S=r(7148);const M="#00A699"},73865:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(35725);function a(e,t,r){let n=e,a=t(n);for(;!r(a);){if(n-=1,n<0){n=e;break}a=t(n)}return n}function o(e){const{idealFontSize:t,maxWidth:r,maxHeight:o,style:i,...s}=e;let l;if(null!=t)l=t;else{if(null==o)throw new Error("You must specify at least one of maxHeight or idealFontSize");l=Math.floor(o)}function c(e){return(0,n.A)({...s,style:{...i,fontSize:`${e}px`}})}return null!=r&&(l=a(l,c,(e=>e.width>0&&e.width<=r))),null!=o&&(l=a(l,c,(e=>e.height>0&&e.height<=o))),l}},66840:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(79305),a=r(55856),o=r(76977);function i(e,t){const{texts:r,className:i,style:s,container:l}=e,c=new Map;let u,d;c.set("",{height:0,width:0});const h=r.map((e=>{if(c.has(e))return c.get(e);u||(d=a.z.createInContainer(l),u=a.k.createInContainer(d)),(0,o.A)(u,{className:i,style:s,text:e});const r=(0,n.A)(u,t);return c.set(e,r),r}));return d&&u&&setTimeout((()=>{a.k.removeFromContainer(d),a.z.removeFromContainer(l)}),500),h}},35725:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(76977),a=r(79305),o=r(55856);function i(e,t){const{text:r,className:i,style:s,container:l}=e;if(0===r.length)return{height:0,width:0};const c=o.z.createInContainer(l),u=o.k.createInContainer(c);(0,n.A)(u,{className:i,style:s,text:r});const d=(0,a.A)(u,t);return setTimeout((()=>{o.k.removeFromContainer(c),o.z.removeFromContainer(l)}),500),d}},55856:(e,t,r)=>{"use strict";r.d(t,{z:()=>o,k:()=>i});class n{constructor(e){this.activeNodes=new Map,this.factoryFn=void 0,this.factoryFn=e}createInContainer(e=document.body){if(this.activeNodes.has(e)){const t=this.activeNodes.get(e);return t.counter+=1,t.node}const t=this.factoryFn();return e.append(t),this.activeNodes.set(e,{counter:1,node:t}),t}removeFromContainer(e=document.body){if(this.activeNodes.has(e)){const t=this.activeNodes.get(e);t.counter-=1,0===t.counter&&(e.removeChild(t.node),this.activeNodes.delete(e))}}}const a="http://www.w3.org/2000/svg",o=new n((function(){const e=document.createElementNS(a,"svg");return e.style.position="absolute",e.style.top="-100%",e.style.left="-100%",e.style.width="0",e.style.height="0",e.style.opacity="0",e.style.pointerEvents="none",e})),i=new n((function(){return document.createElementNS(a,"text")}))},79305:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});const n={height:20,width:100};function a(e,t=n){const{width:r,height:a}=e.getBBox?e.getBBox():t;return{height:Math.ceil(a),width:Math.ceil(r)}}},76977:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});const n=["font","fontWeight","fontStyle","fontSize","fontFamily","letterSpacing"];function a(e,{className:t,style:r={},text:a}={}){const o=e;return o.textContent!==a&&(o.textContent=void 0===a?null:a),o.getAttribute("class")!==t&&o.setAttribute("class",null!=t?t:""),o.style.removeProperty("font"),o.style.removeProperty("font-weight"),o.style.removeProperty("font-style"),o.style.removeProperty("font-size"),o.style.removeProperty("font-family"),o.style.removeProperty("letter-spacing"),n.filter((e=>void 0!==r[e]&&null!==r[e])).forEach((e=>{o.style[e]=`${r[e]}`})),o}},46785:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});var n=r(96540);const a=(e,t)=>{const r=(0,n.useRef)(!1);(0,n.useEffect)((()=>{r.current?e():r.current=!0}),[...t||[e]])}},45991:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(96540);function a(e){const t=(0,n.useRef)(null),[r,a]=(0,n.useState)(!1),o=e=>{const[t]=e;a(t.intersectionRatio<1)};return(0,n.useEffect)((()=>{const r=new IntersectionObserver(o,e),n=t.current;return n&&r.observe(n),()=>{n&&r.unobserve(n)}}),[t,e]),[t,r]}},47163:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(96540);const a=()=>{const[e,t]=(0,n.useState)(0),[r,a]=(0,n.useState)(!1),o=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{var e;const r=()=>{const e=o.current;if(!e)return;const r=i.current,{scrollWidth:n,clientWidth:s,childNodes:l}=e;if(n>s){const e=6,n=(null==r?void 0:r.offsetWidth)||0,o=s-e,i=l.length;let c=0,u=0;for(let e=0;e<i;e+=1)o-c-n<=0&&(u+=1),c+=l[e].offsetWidth;i>1&&u?(a(!0),t(u)):(a(!1),t(1))}else a(!1),t(0)},n=new ResizeObserver(r),s=null==(e=o.current)?void 0:e.parentElement;return s&&n.observe(s),r(),()=>{n.disconnect()}}),[i.current]),[o,i,e,r]}},77183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnnotationOpacity:()=>Pe.h4,AnnotationSourceType:()=>Pe.FG,AnnotationStyle:()=>Pe.vd,AnnotationType:()=>Pe.UJ,ApiLegacy:()=>n,ApiV1:()=>a,AppSection:()=>Lt.$s,AxisType:()=>Lt.Gw,BRAND_COLOR:()=>ct.a1,Behavior:()=>Lt.nS,CACHE_AVAILABLE:()=>le.l2,CACHE_KEY:()=>le.RU,COMMON_ERR_MESSAGES:()=>le.HL,CategoricalAirbnb:()=>ct.nf,CategoricalBlueToGreen:()=>ct.hq,CategoricalColorNamespace:()=>ct.hs,CategoricalColorScale:()=>ct.oZ,CategoricalColorsOfRainbow:()=>ct.XB,CategoricalD3:()=>ct.Oj,CategoricalEcharts:()=>ct.Ho,CategoricalGoogle:()=>ct.mu,CategoricalLyft:()=>ct.Am,CategoricalModernSunset:()=>ct.aT,CategoricalPreset:()=>ct.qw,CategoricalPresetSuperset:()=>ct.lM,CategoricalRedToYellow:()=>ct.VJ,CategoricalScheme:()=>ct.qO,CategoricalSuperset:()=>ct.w_,CategoricalWavesOfBlue:()=>ct.CP,ChartClient:()=>_t,ChartDataProvider:()=>Nt,ChartFrame:()=>Ht,ChartLabel:()=>Lt.jW,ChartMetadata:()=>Dt.A,ChartPlugin:()=>Et.A,ChartProps:()=>vt.A,ColorScheme:()=>ct.zM,ColorSchemeGroup:()=>ct.wI,ColorSchemeRegistry:()=>ct.Ck,ComparisonTimeRangeType:()=>lt,ComparisonType:()=>U.g1,ContributionType:()=>O.PA,CtasEnum:()=>O.Hk,CurrencyFormatter:()=>sr.A,DEFAULT_BASE_URL:()=>le.Ql,DEFAULT_D3_FORMAT:()=>Le.w,DEFAULT_D3_TIME_FORMAT:()=>je._,DEFAULT_FETCH_RETRY_OPTIONS:()=>le.F_,DEFAULT_METRICS:()=>P.Cq,DTTM_ALIAS:()=>Ae.Tf,DataMaskType:()=>ee.p_,DatasourceKey:()=>Ee.A,DatasourceType:()=>P.cT,EXTRA_FORM_DATA_APPEND_KEYS:()=>Ae.t1,EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS:()=>Ae.KE,EXTRA_FORM_DATA_OVERRIDE_KEYS:()=>Ae.zk,EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS:()=>Ae.E_,EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS:()=>Ae.DV,EmotionCacheProvider:()=>ut.jf,ErrorTypeEnum:()=>O.eK,ExtensibleFunction:()=>o.A,FAST_DEBOUNCE:()=>Kt.j,FeatureFlag:()=>F.TO,GenericDataType:()=>k.s,HTTP_STATUS_NOT_MODIFIED:()=>le.Un,HTTP_STATUS_OK:()=>le.rw,LOCAL_PREFIX:()=>$e.n,LabelsColorMap:()=>ct.fH,LabelsColorMapSource:()=>ct.iw,NO_TIME_RANGE:()=>Ae.WC,NativeFilterType:()=>ee.EH,NumberFormats:()=>xe.A,NumberFormatter:()=>Ne.A,NumberFormatterRegistry:()=>Ie.A,OverwritePolicy:()=>l.m,PREVIEW_TIME:()=>Ve.p,PREVIEW_VALUE:()=>Ne.t,PandasAxis:()=>D,Plugin:()=>i.A,Preset:()=>s.A,QueryMode:()=>I.g,QueryState:()=>O.kZ,Registry:()=>l.A,RegistryWithDefaultKey:()=>c.A,RollingType:()=>U.AA,SEPARATOR:()=>mr.wv,SLOW_DEBOUNCE:()=>Kt.Q,SMART_DATE_DETAILED_ID:()=>Qe.e,SMART_DATE_ID:()=>We.f,SMART_DATE_VERBOSE_ID:()=>Ke.M,SafeMarkdown:()=>Xt.A,SequentialCommon:()=>ct.LC,SequentialD3:()=>ct.F5,SequentialScheme:()=>ct.RE,SuperChart:()=>Rt.A,SupersetApiError:()=>be._,SupersetApiErrorType:()=>be.w,SupersetClient:()=>ie.A,SupersetClientClass:()=>se.A,ThemeProvider:()=>ut.NP,TimeFormats:()=>$e.A,TimeFormatter:()=>Ve.A,TimeGranularity:()=>et.i,TooltipFrame:()=>Bt,TooltipTable:()=>Qt,TypedRegistry:()=>u.A,WithLegend:()=>jt,__hack_reexport_AdvancedAnalytics:()=>U.Ay,__hack_reexport_Column:()=>b.Ay,__hack_reexport_Dashboard:()=>ee.Ay,__hack_reexport_Datasource:()=>P.Ay,__hack_reexport_Metric:()=>N.Ay,__hack_reexport_Query:()=>O.Ay,__hack_reexport_QueryFormData:()=>I.A,__hack_reexport_QueryResponse:()=>k.A,__hack_reexport_Time:()=>te,__hack_reexport_chart_Base:()=>Lt.Ay,__hack_reexport_chart_QueryResponse:()=>It,__hack_reexport_chart_TransformFunction:()=>Ot,__hack_reexport_connection:()=>ce,__hack_reexport_dimension:()=>st,__hack_reexport_jed:()=>ne,__hack_reexport_translation:()=>ae,addAlpha:()=>ct.o3,addLocaleData:()=>re.Mo,addTranslation:()=>re.XY,addTranslations:()=>re.um,buildCustomFormatters:()=>lr.Xc,buildQueryContext:()=>ye.A,buildQueryObject:()=>ve.A,callApi:()=>oe.A,chartLabelExplanations:()=>Lt.HE,chartLabelWeight:()=>Lt.l7,checkForHtml:()=>Me.bY,computeCustomDateTime:()=>hr.M9,computeMaxFontSize:()=>nt.A,concludedQueryStateList:()=>O.tG,configure:()=>re.jK,convertFilter:()=>Te.A,convertKeysToCamelCase:()=>d.A,createD3NumberFormatter:()=>ke.A,createD3TimeFormatter:()=>ze.A,createDurationFormatter:()=>Ue.A,createEmotionCache:()=>ut.An,createLoadableRenderer:()=>Ft.A,createMultiFormatter:()=>Be.A,createSiAtMostNDigitFormatter:()=>Ye,createSmartDateDetailedFormatter:()=>Qe.K,createSmartDateFormatter:()=>We.m,createSmartDateVerboseFormatter:()=>Ke.k,createSmartNumberFormatter:()=>Ge.A,css:()=>ut.AH,customTimeRangeDecode:()=>pr.t,defineSharedModule:()=>ue.zW,defineSharedModules:()=>ue.mg,denormalizeTimestamp:()=>Ze,emotionCache:()=>ut.gF,ensureIsArray:()=>h.A,ensureIsInt:()=>m.A,evalExpression:()=>Jt.p,extractQueryFields:()=>Re.A,extractTimegrain:()=>Ce.A,fetchTimeRange:()=>mr.x9,finestTemporalGrainFormatter:()=>Xe.A,formatNumber:()=>Oe.ZV,formatTime:()=>qe.fU,formatTimeRange:()=>qe.sH,getAnalogousColors:()=>ct.yG,getCategoricalSchemeRegistry:()=>ct.nn,getChartBuildQueryRegistry:()=>Tt.A,getChartComponentRegistry:()=>St.A,getChartControlPanelRegistry:()=>Mt.A,getChartMetadataRegistry:()=>Ct.A,getChartTransformPropsRegistry:()=>Pt.A,getClientErrorMessage:()=>Me.hi,getClientErrorObject:()=>Me.h4,getColumnLabel:()=>_e.A,getComparisonFilters:()=>ur,getComparisonInfo:()=>dr,getContrastingColor:()=>ct.OB,getCurrencySymbol:()=>sr.Q,getCustomFormatter:()=>lr.Em,getErrorFromStatusCode:()=>Me.q2,getErrorText:()=>Me.ER,getExtensionsRegistry:()=>Zt.a,getLabelsColorMap:()=>ct.HG,getMetricLabel:()=>De.A,getMultipleTextDimensions:()=>rt.A,getNumberFormatter:()=>Oe.gV,getNumberFormatterRegistry:()=>Oe.Ay,getParagraphContents:()=>S.Vi,getSelectedText:()=>E.j,getSequentialSchemeRegistry:()=>ct.cH,getTextDimension:()=>tt.A,getTimeFormatter:()=>qe.mo,getTimeFormatterForGranularity:()=>qe.PT,getTimeFormatterRegistry:()=>qe.Ay,getTimeOffset:()=>hr.TX,getTimeRangeFormatter:()=>qe.$K,getValueFormatter:()=>lr.gC,getXAxisColumn:()=>Se.Od,getXAxisLabel:()=>Se.yj,hasHtmlTagPattern:()=>S.Id,hexToRgb:()=>ct.E2,initFeatureFlags:()=>F.Aq,isAdhocColumn:()=>b.q0,isAdhocMetricSQL:()=>N.WL,isAdhocMetricSimple:()=>N.IN,isBinaryAdhocFilter:()=>x.bo,isBinaryOperator:()=>L.UH,isDefined:()=>p.A,isEqualArray:()=>f.A,isEventAnnotationLayer:()=>Pe.Tw,isFeatureEnabled:()=>F.G7,isFilterDivider:()=>ee.O2,isFormulaAnnotationLayer:()=>Pe.Bg,isFreeFormAdhocFilter:()=>x.wF,isIntervalAnnotationLayer:()=>Pe.Cv,isJsonString:()=>S.Eo,isNativeFilter:()=>ee.qQ,isNativeFilterWithDataMask:()=>ee.ee,isPhysicalColumn:()=>b.eh,isPostProcessingAggregation:()=>H,isPostProcessingBoxplot:()=>Y,isPostProcessingCompare:()=>B,isPostProcessingContribution:()=>G,isPostProcessingCum:()=>z,isPostProcessingDiff:()=>j,isPostProcessingFlatten:()=>X,isPostProcessingHistogram:()=>Z,isPostProcessingPivot:()=>$,isPostProcessingProphet:()=>V,isPostProcessingRank:()=>J,isPostProcessingRename:()=>K,isPostProcessingResample:()=>Q,isPostProcessingRolling:()=>q,isPostProcessingSort:()=>W,isProbablyHTML:()=>S.fE,isQueryFormColumn:()=>b.x$,isQueryFormMetric:()=>N.Pr,isRecordAnnotationResult:()=>Pe.mI,isRequired:()=>g.A,isSavedMetric:()=>N.S_,isSetAdhocFilter:()=>x.M6,isSetOperator:()=>L.jy,isSimpleAdhocFilter:()=>x.md,isTableAnnotationLayer:()=>Pe.n2,isTimeseriesAnnotationLayer:()=>Pe.No,isTimeseriesAnnotationResult:()=>Pe.f3,isUnaryAdhocFilter:()=>x.TI,isUnaryOperator:()=>L.Gq,isValidExpression:()=>Jt.$,isXAxisSet:()=>Se.aj,jsx:()=>ut.Y,keyframes:()=>ut.i7,legacyValidateInteger:()=>dt.A,legacyValidateNumber:()=>ht.A,logging:()=>v.A,lruCache:()=>_,makeApi:()=>pe.A,makeSingleton:()=>A.A,mergeMargin:()=>ot,normalizeOrderBy:()=>Fe.A,normalizeTimeColumn:()=>we.j,normalizeTimestamp:()=>Je.A,parseDttmToDate:()=>hr.cy,parseErrorJson:()=>Me.io,parseLength:()=>it.A,parseStringResponse:()=>Me.A8,promiseTimeout:()=>y,reactify:()=>wt.A,removeDuplicates:()=>T.A,removeHTMLTags:()=>S.zF,reset:()=>ue.cL,resetTranslation:()=>re.Fh,retrieveErrorMessage:()=>Me.ei,rgbToHex:()=>ct.Ob,runningQueryStateList:()=>O.P7,safeHtmlSpan:()=>S.nn,sanitizeHtml:()=>S.pn,sanitizeHtmlIfNeeded:()=>S.pU,seed:()=>w.c,seedRandom:()=>w.d,setD3Format:()=>Oe.rl,styled:()=>ut.I4,supersetTheme:()=>ut.TT,t:()=>re.t,testQuery:()=>O.hd,testQueryResponse:()=>O.aW,testQueryResults:()=>O.X,tn:()=>re.tn,tooltipHtml:()=>M.L,truncationCSS:()=>ir.P,typedMemo:()=>R.v,useCSSTextTruncation:()=>ir.A,useChangeEffect:()=>er.h,useComponentDidMount:()=>tr.B,useComponentDidUpdate:()=>rr.n,useElementOnScreen:()=>nr.N,usePrevious:()=>ar.Z,useTheme:()=>ut.DP,useTruncation:()=>or.A,validateInteger:()=>mt.A,validateMapboxStylesUrl:()=>At.A,validateMaxValue:()=>ft.A,validateNonEmpty:()=>gt.A,validateNumber:()=>pt.A,validateTimeComparisonRangeValues:()=>yt,withTheme:()=>ut.SL});var n={};r.r(n),r.d(n,{__hack_reexport_query_api_legacy:()=>me,getDatasourceMetadata:()=>he,getFormData:()=>de});var a={};r.r(a),r.d(a,{default:()=>fe,getChartData:()=>ge});var o=r(4923),i=r(9569),s=r(11869),l=r(25373),c=r(79953),u=r(44711),d=r(75451),h=r(62952),m=r(12),p=r(13270),g=r(85678),f=r(65482),A=r(70360);function y(e,t){return new Promise((r=>{setTimeout((()=>{r(e())}),t)}))}var v=r(5362),T=r(64389);class C{constructor(e){if(this.cache=void 0,this.capacity=void 0,e<1)throw new Error("The capacity in LRU must be greater than 0.");this.capacity=e,this.cache=new Map}has(e){return this.cache.has(e)}get(e){if("string"!=typeof e)throw new TypeError("The LRUCache key must be string.");if(this.cache.has(e)){const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}}set(e,t){if("string"!=typeof e)throw new TypeError("The LRUCache key must be string.");this.cache.size>=this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}clear(){this.cache.clear()}get size(){return this.cache.size}}function _(e=100){return new C(e)}var D,E=r(51609),F=r(27366),w=r(37820),R=r(10873),S=r(58642),M=r(96088),P=r(5795),b=r(70700),x=r(808),N=r(91778),L=r(57246),O=r(69108),I=r(79758),k=r(87903),U=r(48822);function H(e){return"aggregation"===(null==e?void 0:e.operation)}function Y(e){return"boxplot"===(null==e?void 0:e.operation)}function G(e){return"contribution"===(null==e?void 0:e.operation)}function $(e){return"pivot"===(null==e?void 0:e.operation)}function V(e){return"prophet"===(null==e?void 0:e.operation)}function j(e){return"diff"===(null==e?void 0:e.operation)}function q(e){return"rolling"===(null==e?void 0:e.operation)}function z(e){return"cum"===(null==e?void 0:e.operation)}function B(e){return"compare"===(null==e?void 0:e.operation)}function W(e){return"sort"===(null==e?void 0:e.operation)}function Q(e){return"resample"===(null==e?void 0:e.operation)}function K(e){return"rename"===(null==e?void 0:e.operation)}function X(e){return"flatten"===(null==e?void 0:e.operation)}function J(e){return"rank"===(null==e?void 0:e.operation)}function Z(e){return"histogram"===(null==e?void 0:e.operation)}!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(D||(D={}));var ee=r(73992);const te={};var re=r(95579);const ne={},ae={};var oe=r(60771),ie=r(35742),se=r(90752),le=r(1639);const ce={};var ue=r(72557);function de({client:e=ie.A,sliceId:t,overrideFormData:r,requestConfig:n}){const a=e.get({endpoint:`/api/v1/form_data/?slice_id=${t}`,...n}).then((({json:e})=>e));return r?a.then((e=>({...e,...r}))):a}function he({client:e=ie.A,datasourceKey:t,requestConfig:r}){return e.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${t}`,...r}).then((e=>e.json))}const me={};var pe=r(93505);const ge=(0,pe.A)({method:"POST",endpoint:"/api/v1/chart/data"}),fe={getChartData:ge};var Ae=r(96627),ye=r(1889),ve=r(26632),Te=r(39131),Ce=r(1055),_e=r(86444),De=r(36770),Ee=r(83942),Fe=r(21408),we=r(96590),Re=r(46302),Se=r(38677),Me=r(51436),Pe=r(2090),be=r(71130),xe=r(53682),Ne=r(17652),Le=r(38409),Oe=r(32142),Ie=r(22191),ke=r(67438),Ue=r(86518),He=r(34410);function Ye(e={}){const{description:t,n:r=3,id:n,label:a}=e,o=(0,He.GP)(`.${r}s`);return new Ne.A({description:t,formatFunc:e=>{const t=o(e);return t.slice(-1)<"A"?parseFloat(t).toString():t},id:null!=n?n:`si_at_most_${r}_digit`,label:null!=a?a:`SI with at most ${r} significant digits`})}var Ge=r(80552),$e=r(85170),Ve=r(73091),je=r(62457),qe=r(7349),ze=r(2482),Be=r(49327),We=r(47952),Qe=r(5632),Ke=r(58928),Xe=r(94465),Je=r(81550);function Ze(e){const t=e.match(Je.W);return t?`${t[1]}T${t[2]}`:e}var et=r(81468),tt=r(35725),rt=r(66840),nt=r(73865);function at(e,t=0,r=0){return Number.isNaN(t)||null===t?r:Number.isNaN(r)||null===r?t:e(t,r)}function ot(e={},t={},r="expand"){const{top:n,left:a,bottom:o,right:i}=e,s="expand"===r?Math.max:Math.min;return{bottom:at(s,o,t.bottom),left:at(s,a,t.left),right:at(s,i,t.right),top:at(s,n,t.top)}}var it=r(91249);const st={};var lt,ct=r(13090),ut=r(96453),dt=r(49953),ht=r(53674),mt=r(95776),pt=r(83957),gt=r(82920),ft=r(99947),At=r(7036);!function(e){e.Custom="c",e.InheritedRange="r",e.Month="m",e.Week="w",e.Year="y"}(lt||(lt={}));const yt=(e,t)=>{const r=e===lt.Custom,n=null==t?void 0:t.every((e=>0===(0,h.A)(e).length));return r&&n?[(0,re.t)("Filters for comparison must have a value")]:[]};var vt=r(54111),Tt=r(81998),Ct=r(80145);class _t{constructor(e={}){this.client=void 0;const{client:t=ie.A}=e;this.client=t}loadFormData(e,t){return"sliceId"in e?this.client.get({endpoint:`/api/v1/form_data/?slice_id=${e.sliceId}`,...t}).then((e=>e.json)).then((t=>({...t,...e.formData}))):e.formData?Promise.resolve(e.formData):Promise.reject(new Error("At least one of sliceId or formData must be specified"))}async loadQueryData(e,t){const{viz_type:r}=e,n=(0,Ct.A)(),a=(0,Tt.A)();if(n.has(r)){var o;const{useLegacyApi:i}=n.get(r),s=null!=(o=await a.get(r))?o:()=>e,l=i?{endpoint:"/superset/explore_json/",postPayload:{form_data:s(e)},...t}:{endpoint:"/api/v1/chart/data",jsonPayload:{query_context:s(e)},...t};return this.client.post(l).then((e=>Array.isArray(e.json)?e.json:[e.json]))}return Promise.reject(new Error(`Unknown chart type: ${r}`))}loadDatasource(e,t){return this.client.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${e}`,...t}).then((e=>e.json))}loadAnnotation(e){return(0,p.A)(e.sourceType)?Promise.reject(new Error("This feature is not implemented yet.")):Promise.resolve({})}loadAnnotations(e){return Array.isArray(e)&&e.length>0?Promise.all(e.map((e=>this.loadAnnotation(e)))).then((t=>e.reduce(((e,r,n)=>{const a=e;return a[r.name]=t[n],a}),{}))):Promise.resolve({})}loadChartData(e){return this.loadFormData(e).then((e=>Promise.all([this.loadAnnotations(e.annotation_layers),this.loadDatasource(e.datasource),this.loadQueryData(e)]).then((([t,r,n])=>({annotationData:t,datasource:r,formData:e,queriesData:n})))))}}var Dt=r(13708),Et=r(78410),Ft=r(11460),wt=r(7240),Rt=r(28846),St=r(27577),Mt=r(18253),Pt=r(40012),bt=r(96540);class xt extends bt.PureComponent{constructor(e){super(e),this.chartClient=void 0,this.handleFetchData=()=>{const{loadDatasource:e,formDataRequestOptions:t,datasourceRequestOptions:r,queryRequestOptions:n}=this.props;this.setState({status:"loading"},(()=>{try{this.chartClient.loadFormData(this.extractSliceIdAndFormData(),t).then((t=>Promise.all([e?this.chartClient.loadDatasource(t.datasource,r):Promise.resolve(void 0),this.chartClient.loadQueryData(t,n)]).then((([e,r])=>({datasource:e,formData:t,queriesData:r}))))).then(this.handleReceiveData).catch(this.handleError)}catch(e){this.handleError(e)}}))},this.handleReceiveData=e=>{const{onLoaded:t}=this.props;t&&t(e),this.setState({payload:e,status:"loaded"})},this.handleError=e=>{const{onError:t}=this.props;t&&t(e),this.setState({error:e,status:"error"})},this.state={status:"uninitialized"},this.chartClient=new _t({client:e.client})}componentDidMount(){this.handleFetchData()}componentDidUpdate(e){const{formData:t,sliceId:r}=this.props;t===e.formData&&r===e.sliceId||this.handleFetchData()}extractSliceIdAndFormData(){const{formData:e,sliceId:t}=this.props;return e?{formData:e}:{sliceId:t}}render(){const{children:e}=this.props,{status:t,payload:r,error:n}=this.state;switch(t){case"loading":return e({loading:!0});case"loaded":return e({payload:r});case"error":return e({error:n});default:return null}}}const Nt=xt;var Lt=r(58863);const Ot={},It={};var kt=r(2445);function Ut(e){return(0,p.A)(e)&&"number"==typeof e}class Ht extends bt.PureComponent{render(){const{contentWidth:e,contentHeight:t,width:r,height:n,renderContent:a}=this.props,o=Ut(e)&&e>r,i=Ut(t)&&t>n;return o||i?(0,kt.Y)("div",{style:{height:n,overflowX:o?"auto":"hidden",overflowY:i?"auto":"hidden",width:r},children:a({height:Math.max(null!=t?t:0,n),width:Math.max(null!=e?e:0,r)})}):a({height:n,width:r})}}Ht.defaultProps={renderContent(){}};var Yt=r(56324);const Gt={display:"flex",flexGrow:0,flexShrink:0,order:-1},$t={flexBasis:"auto",flexGrow:1,flexShrink:1,position:"relative"};class Vt extends bt.PureComponent{getContainerDirection(){const{position:e}=this.props;return"left"===e?"row":"right"===e?"row-reverse":"bottom"===e?"column-reverse":"column"}getLegendJustifyContent(){const{legendJustifyContent:e,position:t}=this.props;return e||("left"===t||"right"===t?"flex-start":"flex-end")}render(){const{className:e,debounceTime:t,width:r,height:n,position:a,renderChart:o,renderLegend:i}=this.props,s="left"===a||"right"===a,l={display:"flex",flexDirection:this.getContainerDirection(),height:n,width:r},c={...$t};s?c.width=0:c.height=0;const u=s?"column":"row",d={...Gt,flexDirection:u,justifyContent:this.getLegendJustifyContent()};return(0,kt.FD)("div",{className:`with-legend ${e}`,style:l,children:[i&&(0,kt.Y)("div",{className:"legend-container",style:d,children:i({direction:u})}),(0,kt.Y)("div",{className:"main-container",style:c,children:(0,kt.Y)(Yt.A,{debounceTime:t,children:e=>e.width>0&&e.height>0?o(e):null})})]})}}Vt.defaultProps={className:"",height:"auto",position:"top",width:"auto"};const jt=Vt,qt={padding:8};class zt extends bt.PureComponent{render(){const{className:e,children:t}=this.props;return(0,kt.Y)("div",{className:e,style:qt,children:t})}}zt.defaultProps={className:""};const Bt=zt,Wt={paddingLeft:8,textAlign:"right"};class Qt extends bt.PureComponent{render(){const{className:e,data:t}=this.props;return(0,kt.Y)("table",{className:e,children:(0,kt.Y)("tbody",{children:t.map((({key:e,keyColumn:t,keyStyle:r,valueColumn:n,valueStyle:a})=>(0,kt.FD)("tr",{children:[(0,kt.Y)("td",{style:r,children:null!=t?t:e}),(0,kt.Y)("td",{style:a?{...Wt,...a}:Wt,children:n})]},e)))})})}}Qt.defaultProps={className:"",data:[]};var Kt=r(87843),Xt=r(16784),Jt=r(36673),Zt=r(72391),er=r(45905),tr=r(93211),rr=r(46785),nr=r(45991),ar=r(83505),or=r(47163),ir=r(37827),sr=r(57940),lr=r(95034);const cr=(e,t)=>{var r,n,a;const o=null!=(r=null==(n=e.adhoc_filters)?void 0:n.findIndex((e=>"operator"in e&&"TEMPORAL_RANGE"===e.operator)))?r:-1,i=-1!==o&&e.adhoc_filters?e.adhoc_filters[o]:null;i&&"comparator"in i&&"string"==typeof i.comparator&&null!=t&&t.time_range&&(i.comparator=t.time_range);const s=i?[i]:[],l=null==(a=e.adhoc_filters)?void 0:a.filter(((e,t)=>o!==t));return l?[...s,...l]:s},ur=cr,dr=(e,t,r)=>{let n;return n=t!==lt.Custom?{...e,adhoc_filters:cr(e,r),extra_form_data:{...r,time_range:void 0}}:{...e,adhoc_filters:e.adhoc_custom,extra_form_data:{...r,time_range:void 0}},n};var hr=r(49277),mr=r(77189),pr=r(13686)},13686:(e,t,r)=>{"use strict";r.d(t,{t:()=>p});var n=r(77189);const a=String.raw`\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.\d+)?(?:(?:[+-]\d\d:\d\d)|Z)?`,o=String.raw`(?:TODAY|NOW)`,i=String.raw`[+-]?[1-9][0-9]*`,s=String.raw`YEAR|QUARTER|MONTH|WEEK|DAY|HOUR|MINUTE|SECOND`,l=RegExp(String.raw`^DATEADD\(DATETIME\("(${a}|${o})"\),\s(${i}),\s(${s})\)$`,"i"),c=RegExp(String.raw`^${a}$|^${o}$`,"i"),u=["now","today"],d=new Date;d.setHours(0,0,0,0);const h=new Date;h.setHours(0,0,0,0);const m={sinceDatetime:d.setDate(d.getDate()-7).toString(),sinceMode:"relative",sinceGrain:"day",sinceGrainValue:-7,untilDatetime:h.toString(),untilMode:"specific",untilGrain:"day",untilGrainValue:7,anchorMode:"now",anchorValue:"now"},p=e=>{const t=e.split(n.wv);if(2===t.length){const[e,r]=t;if(c.test(e)&&c.test(r)){const t=u.includes(e)?e:"specific",n=u.includes(r)?r:"specific";return{customRange:{...m,sinceDatetime:e,untilDatetime:r,sinceMode:t,untilMode:n},matchedFlag:!0}}const n=e.match(l);if(n&&c.test(r)&&e.includes(r)){const[e,t,a]=n.slice(1),o=u.includes(r)?r:"specific";return{customRange:{...m,sinceGrain:a,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilDatetime:e,sinceMode:"relative",untilMode:o},matchedFlag:!0}}const a=r.match(l);if(c.test(e)&&a&&r.includes(e)){const[t,r,n]=[...a.slice(1)],o=u.includes(e)?e:"specific";return{customRange:{...m,untilGrain:n,untilGrainValue:parseInt(r,10),sinceDatetime:t,untilDatetime:t,untilMode:"relative",sinceMode:o},matchedFlag:!0}}if(n&&a){const[e,t,r]=[...n.slice(1)],[o,i,s]=[...a.slice(1)];if(e===o)return{customRange:{...m,sinceGrain:r,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilGrain:s,untilGrainValue:parseInt(i,10),untilDatetime:o,anchorValue:e,sinceMode:"relative",untilMode:"relative",anchorMode:"now"===e?"now":"specific"},matchedFlag:!0}}}return{customRange:m,matchedFlag:!1}}},77189:(e,t,r)=>{"use strict";r.d(t,{wv:()=>u,x9:()=>p});var n=r(62193),a=r.n(n),o=r(58561),i=r.n(o),s=r(62952),l=r(35742),c=r(51436);const u=" : ",d=(e,t)=>`${e}${u}${t}`,h=(e,t)=>e.replace("T00:00:00","")||(t?"-∞":"∞"),m=(e,t="col")=>{const r=e.split(u);return 1===r.length?e:`${h(r[0],!0)} ≤ ${t} < ${h(r[1])}`},p=async(e,t="col",r)=>{let n,o;if(a()(r))n=i().encode_uri(e),o=`/api/v1/time_range/?q=${n}`;else{const t=(0,s.A)(r).map((t=>({timeRange:e,shift:t})));n=i().encode_uri([{timeRange:e},...t]),o=`/api/v1/time_range/?q=${n}`}try{var p;const e=await l.A.get({endpoint:o});if(a()(r)){var g,f,A,y;const r=d((null==e||null==(g=e.json)||null==(f=g.result[0])?void 0:f.since)||"",(null==e||null==(A=e.json)||null==(y=A.result[0])?void 0:y.until)||"");return{value:m(r,t)}}const n=null==e||null==(p=e.json)?void 0:p.result.map((e=>d(e.since,e.until)));return{value:n.slice(1).map((e=>((e,t,r="col")=>{const n=e.split(u),a=t.split(u);return`${r}: ${h(n[0],!0)} to ${h(n[1])} vs\n  ${h(a[0],!0)} to ${h(a[1])}`})(n[0],e,t)))}}catch(e){const t=await(0,c.h4)(e);return{error:t.message||t.error||e.statusText}}}},49277:(e,t,r)=>{"use strict";r.d(t,{M9:()=>c,TX:()=>u,cy:()=>l});var n=r(62193),a=r.n(n),o=r(62952),i=r(13686);const s=864e5,l=(e,t=!1,r=!1)=>{const n=new Date;if("now"===e||"No filter"===e||""===e)return n;if("today"===e)return n.setHours(0,0,0,0),n;if(r?n.setHours(-n.getTimezoneOffset()/60,0,0,0):n.setHours(0,0,0,0),t&&null!=e&&e.includes("Last"))return n;switch(e){case"Last day":return n.setUTCDate(n.getUTCDate()-1),n;case"Last week":return n.setUTCDate(n.getUTCDate()-7),n;case"Last month":return n.setUTCMonth(n.getUTCMonth()-1),n;case"Last quarter":return n.setUTCMonth(n.getUTCMonth()-3),n;case"Last year":return n.setUTCFullYear(n.getUTCFullYear()-1),n;case"previous calendar week":return t?n.setDate(n.getDate()-n.getDay()+1):n.setDate(n.getDate()-n.getDay()-6),n;case"previous calendar month":return t?n.setDate(1):(n.setDate(1),n.setMonth(n.getMonth()-1)),n;case"previous calendar year":return t?n.setFullYear(n.getFullYear(),0,1):n.setFullYear(n.getFullYear()-1,0,1),n}if(null!=e&&e.includes("ago")){const t=e.split(" "),r=parseInt(t[0],10);switch(t[1]){case"day":case"days":n.setUTCDate(n.getUTCDate()-r);break;case"week":case"weeks":n.setUTCDate(n.getUTCDate()-7*r);break;case"month":case"months":n.setUTCMonth(n.getUTCMonth()-r);break;case"year":case"years":n.setUTCFullYear(n.getUTCFullYear()-r)}return n}const o=null==e?void 0:e.split("-");let i=null;return i=o&&!a()(o)?1===o.length?new Date(Date.UTC(parseInt(o[0],10),0)):2===o.length?new Date(Date.UTC(parseInt(o[0],10),parseInt(o[1],10)-1)):3===o.length?new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10)):new Date(e):new Date(e),i&&!Number.isNaN(i.getTime())?(r?i.setHours(-i.getTimezoneOffset()/60,0,0,0):i.setHours(0,0,0,0),i):null},c=(e,t,r)=>{let n;if(n="now"===e||"today"===e?new Date:new Date(e),!Number.isNaN(n.getTime())){switch(t){case"second":n.setSeconds(n.getSeconds()+r);break;case"minute":n.setMinutes(n.getMinutes()+r);break;case"hour":n.setHours(n.getHours()+r);break;case"day":n.setDate(n.getDate()+r);break;case"week":n.setDate(n.getDate()+7*r);break;case"month":n.setMonth(n.getMonth()+r);break;case"quarter":n.setMonth(n.getMonth()+3*r);break;case"year":n.setFullYear(n.getFullYear()+r)}return n}return null},u=({timeRangeFilter:e,shifts:t,startDate:r,includeFutureOffsets:n=!0})=>{var a,u,d,h,m,p;const{customRange:g,matchedFlag:f}=(0,i.t)(null!=(a=null==e?void 0:e.comparator)?a:"");let A=null,y=null;if(f){var v,T;const{sinceDatetime:e,sinceMode:t,sinceGrain:r,sinceGrainValue:n,untilDatetime:a,untilMode:o,untilGrain:i,untilGrainValue:s}={...g};A="relative"!==t?"specific"===t?new Date(e):l(e,!1,!0):c(e,r,n),null==(v=A)||v.setHours(0,0,0,0),y="relative"!==o?"specific"===o?new Date(a):l(a,!1,!0):c(a,i,s),null==(T=y)||T.setHours(0,0,0,0)}const C=null==t?void 0:t.includes("custom"),_=null==t?void 0:t.includes("inherit");let D;var E;C&&(D=f?new Date(new Date(r).setUTCHours(new Date(r).getTimezoneOffset()/60,0,0,0)).getTime():null==(E=l(r))?void 0:E.getTime());const[F,w]=(null!=(u=null==e?void 0:e.comparator)?u:"").split(" : ").map((e=>e.trim())),R=(null==(d=null!=(h=A)?h:l(F,!1,!1))?void 0:d.getTime())||0,S=(null==(m=null!=(p=y)?p:l(w||F,!0,!1))?void 0:m.getTime())||0,M=D&&R&&Math.round((R-D)/s),P=_&&S&&R&&Math.round((S-R)/s),b=(0,o.A)(t).map((e=>{if("custom"===e&&void 0!==M&&!Number.isNaN(M)){if(n&&M<0)return-1*M+" days after";if(M>=0&&R)return`${M} days ago`}if("inherit"===e&&P&&!Number.isNaN(P)){if(n&&P<0)return-1*P+" days after";if(P>0)return`${P} days ago`}return e})).filter((e=>"custom"!==e&&"inherit"!==e));return(0,o.A)(b)}},94465:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(53705),a=r(94387),o=r(73091);function i(e,t=!1){const r=t?n.DC:n.aL,i=r("%Y-%m-%d %H:%M:%S.%L"),s=r("%Y-%m-%d %H:%M:%S"),l=r("%Y-%m-%d %H:%M"),c=r("%Y-%m-%d %H:%M"),u=r("%Y-%m-%d"),d=r("%Y-%m-%d"),h=r("%Y"),{hasMillisecond:m,hasSecond:p,hasMinute:g,hasHour:f,isNotFirstDayOfMonth:A,isNotFirstMonth:y}=t?a.m:a.w;let v=h;return e.forEach((e=>{v===h&&y(e)&&(v=d),v===d&&A(e)&&(v=u),v===u&&f(e)&&(v=c),v===c&&g(e)&&(v=l),v===l&&p(e)&&(v=s),v===s&&m(e)&&(v=i)})),new o.A({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc:v,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime:t})}},51609:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});const n=()=>{var e;return null==(e=window.getSelection())?void 0:e.toString()}},37820:(e,t,r)=>{"use strict";r.d(t,{c:()=>o,d:()=>i});var n=r(7391),a=r.n(n);function o(e){return a()(e)}function i(){return a()("superset-ui")()}},10873:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});const n=r(96540).memo},41234:()=>{}}]);
//# sourceMappingURL=be6b0e6d13e06b36271d.chunk.js.map