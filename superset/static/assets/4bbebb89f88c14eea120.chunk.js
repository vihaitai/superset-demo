"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7616],{18575:(e,a,t)=>{a.w$=a.uv=void 0;var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r=s(t(96540)),i=s(t(5556)),o=t(11447);function s(e){return e&&e.__esModule?e:{default:e}}a.uv=function(e){var a=e.itemTypeToComponent,t=e.WrapperComponent,s=void 0===t?"div":t,l=function(e){var t=e.currentPage,i=e.totalPages,l=e.boundaryPagesRange,d=e.siblingPagesRange,u=e.hideEllipsis,c=e.hidePreviousAndNextPageLinks,g=e.hideFirstAndLastPageLinks,h=e.onChange,p=e.disabled,P=function(e,a){var t={};for(var n in e)a.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),b=(0,o.getPaginationModel)({currentPage:t,totalPages:i,boundaryPagesRange:l,siblingPagesRange:d,hideEllipsis:u,hidePreviousAndNextPageLinks:c,hideFirstAndLastPageLinks:g}),m=function(e,a,t){return function(i){var o,s,l,d=e[i.type],u=(s=(o=i).value,l=o.isDisabled,function(){!l&&t&&a!==s&&t(s)});return r.default.createElement(d,n({onClick:u},i))}}(a,t,h);return r.default.createElement(s,P,b.map((function(e){return m(n({},e,{isDisabled:!!p}))})))};return l.propTypes={currentPage:i.default.number.isRequired,totalPages:i.default.number.isRequired,boundaryPagesRange:i.default.number,siblingPagesRange:i.default.number,hideEllipsis:i.default.bool,hidePreviousAndNextPageLinks:i.default.bool,hideFirstAndLastPageLinks:i.default.bool,onChange:i.default.func,disabled:i.default.bool},l},a.w$=o.ITEM_TYPES},12397:(e,a,t)=>{t.d(a,{U:()=>s});var n=t(19129),r=t(25106),i=t(95579),o=t(2445);const s=({user:e,date:a})=>{const t=(0,o.Y)("span",{className:"no-wrap",children:a});if(e){const a=(0,r.A)(e),s=(0,i.t)("Modified by: %s",a);return(0,o.Y)(n.m,{title:s,placement:"bottom",children:t})}return t}},20473:(e,a,t)=>{t.d(a,{A:()=>_});var n=t(96540),r=t(58561),i=t.n(r),o=t(85861),s=t(49756),l=t(40563),d=t(96453),u=t(35742),c=t(95579),g=t(36255),h=t(15595),p=t(46920),P=t(97567),b=t(2445);const m=d.I4.div`
  .ant-select-dropdown {
    max-height: ${({theme:e})=>40*e.gridUnit}px;
  }
  .tag-input {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`;var E;!function(e){e.Chart="chart",e.Dashboard="dashboard",e.SavedQuery="query"}(E||(E={}));const _=({show:e,onHide:a,editTag:t,refreshData:r,addSuccessToast:d,addDangerToast:_,clearOnHide:v=!1})=>{const[S,f]=(0,n.useState)([]),[y,T]=(0,n.useState)([]),[A,I]=(0,n.useState)([]),[L,N]=(0,n.useState)(""),[Y,w]=(0,n.useState)(""),k=!!t,C=k?"Edit Tag":"Create Tag",M=()=>{N(""),w(""),f([]),T([]),I([])};(0,n.useEffect)((()=>{const e={[E.Dashboard]:[],[E.Chart]:[],[E.SavedQuery]:[]},a=({id:a,name:t,type:n})=>{const r=e[n];r&&r.push({value:a,label:t,key:a})};f([]),T([]),I([]),k&&((0,P.Ik)({tagIds:[t.id],types:null},(t=>{t.forEach(a),f(e[E.Dashboard]),T(e[E.Chart]),I(e[E.SavedQuery])}),(e=>{_("Error Fetching Tagged Objects")})),N(t.name),w(t.description))}),[t]);const R=async(e,a,t,n,r,o,s)=>{const l=i().encode({columns:n,filters:[{col:r,opr:"ct",value:e}],page:a,order_column:o}),{json:d}=await u.A.get({endpoint:`/api/v1/${s}/?q=${l}`}),{result:c,count:g}=d;return{data:c.map((e=>({value:e.id,label:e[r]}))),totalCount:g}},F=(e,a)=>{e===E.Dashboard?f(a):e===E.Chart?T(a):e===E.SavedQuery&&I(a)};return(0,b.Y)(o.A,{title:C,onHide:()=>{v&&M(),a()},show:e,footer:(0,b.FD)("div",{children:[(0,b.Y)(p.A,{buttonStyle:"secondary",onClick:a,children:(0,c.t)("Cancel")}),(0,b.Y)(p.A,{buttonStyle:"primary",onClick:()=>{const e=S.map((e=>["dashboard",e.value])),n=y.map((e=>["chart",e.value])),i=A.map((e=>["query",e.value]));k?u.A.put({endpoint:`/api/v1/tag/${t.id}`,jsonPayload:{description:Y,name:L,objects_to_tag:[...e,...n,...i]}}).then((({json:e={}})=>{r(),M(),d((0,c.t)("Tag updated")),a()})).catch((e=>{_(e.message||"Error Updating Tag")})):u.A.post({endpoint:"/api/v1/tag/",jsonPayload:{description:Y,name:L,objects_to_tag:[...e,...n,...i]}}).then((({json:e={}})=>{r(),M(),d((0,c.t)("Tag created")),a()})).catch((e=>_(e.message||"Error Creating Tag")))},children:(0,c.t)("Save")})]}),children:(0,b.FD)(m,{children:[(0,b.Y)(l.lR,{children:(0,c.t)("Tag name")}),(0,b.Y)(g.A,{className:"tag-input",onChange:e=>N(e.target.value),placeholder:(0,c.t)("Name of your tag"),value:L}),(0,b.Y)(l.lR,{children:(0,c.t)("Description")}),(0,b.Y)(g.A,{className:"tag-input",onChange:e=>w(e.target.value),placeholder:(0,c.t)("Add description of your tag"),value:Y}),(0,b.Y)(h.cG,{}),(0,b.Y)(s.A,{className:"tag-input",ariaLabel:(0,c.t)("Select dashboards"),mode:"multiple",name:"dashboards",value:S,options:async(e,a,t)=>R(e,a,0,["id","dashboard_title"],"dashboard_title","dashboard_title","dashboard"),onChange:e=>F(E.Dashboard,e),header:(0,b.Y)(l.lR,{children:(0,c.t)("Dashboards")}),allowClear:!0}),(0,b.Y)(s.A,{className:"tag-input",ariaLabel:(0,c.t)("Select charts"),mode:"multiple",name:"charts",value:y,options:async(e,a,t)=>R(e,a,0,["id","slice_name"],"slice_name","slice_name","chart"),onChange:e=>F(E.Chart,e),header:(0,b.Y)(l.lR,{children:(0,c.t)("Charts")}),allowClear:!0}),(0,b.Y)(s.A,{className:"tag-input",ariaLabel:(0,c.t)("Select saved queries"),mode:"multiple",name:"savedQueries",value:A,options:async(e,a,t)=>R(e,a,0,["id","label"],"label","label","saved_query"),onChange:e=>F(E.SavedQuery,e),header:(0,b.Y)(l.lR,{children:(0,c.t)("Saved queries")}),allowClear:!0})]})})}},28009:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var n=t(96540),r=t(95579),i=t(27366),o=t(30703),s=t(50500),l=t(63358),d=t(51713),u=t(39854),c=t(62221),g=t(5261),h=t(12249),p=t(19129),P=t(71519),b=t(97567),m=t(66270),E=t(23193),_=t(20473),v=t(94704),S=t(12397),f=t(2445);const y=(0,g.Ay)((function(e){const{addDangerToast:a,addSuccessToast:t,user:g}=e,{userId:y}=g,T=(0,n.useMemo)((()=>[{id:"type",operator:"custom_tag",value:!0}]),[]),{state:{loading:A,resourceCount:I,resourceCollection:L,bulkSelectEnabled:N},hasPerm:Y,fetchData:w,toggleBulkSelect:k,refreshData:C}=(0,s.RU)("tag",(0,r.t)("tag"),a,void 0,void 0,T),[M,R]=(0,n.useState)(!1),[F,K]=(0,n.useState)(null),D=(0,n.useMemo)((()=>L.map((e=>e.id))),[L]),[G,O]=(0,s.oG)("tag",D,a),x=(0,c.SX)(null==y?void 0:y.toString(),null),H=Y("can_write"),j=Y("can_write"),U=[{id:"changed_on_delta_humanized",desc:!0}];function $(e){(0,b.dH)(e,(e=>{t(e),C()}),(e=>{a(e),C()}))}const B={title:(0,r.t)("No Tags created"),image:"dashboard.svg",description:"Create a new tag and assign it to existing entities like charts or dashboards",buttonAction:()=>R(!0),buttonText:(0,f.FD)(f.FK,{children:[(0,f.Y)("i",{className:"fa fa-plus"})," ","Create a new Tag"," "]})},q=(0,n.useMemo)((()=>[{Cell:({row:{original:{id:e}}})=>y&&(0,f.Y)(v.A,{itemId:e,saveFaveStar:G,isStarred:O[e]}),Header:"",id:"id",disableSortBy:!0,size:"xs",hidden:!y},{Cell:({row:{original:{id:e,name:a}}})=>(0,f.Y)(m.A,{children:(0,f.Y)(P.N_,{to:`/superset/all_entities/?id=${e}`,children:a})}),Header:(0,r.t)("Name"),accessor:"name"},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:a}}})=>(0,f.Y)(S.U,{date:e,user:a}),Header:(0,r.t)("Last modified"),accessor:"changed_on_delta_humanized",size:"xl"},{Cell:({row:{original:e}})=>(0,f.FD)(o.En,{className:"actions",children:[H&&(0,f.Y)(l.A,{title:(0,r.t)("Please confirm"),description:(0,f.FD)(f.FK,{children:[(0,r.t)("Are you sure you want to delete")," ",(0,f.Y)("b",{children:e.dashboard_title}),"?"]}),onConfirm:()=>$([e]),children:e=>(0,f.Y)(p.m,{id:"delete-action-tooltip",title:(0,r.t)("Delete"),placement:"bottom",children:(0,f.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:e,children:(0,f.Y)(h.A.Trash,{})})})}),j&&(0,f.Y)(p.m,{id:"edit-action-tooltip",title:(0,r.t)("Edit"),placement:"bottom",children:(0,f.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>{return a=e,R(!0),void K(a);var a},children:(0,f.Y)(h.A.EditAlt,{})})})]}),Header:(0,r.t)("Actions"),id:"actions",hidden:!H,disableSortBy:!0},{accessor:E.H.ChangedBy,hidden:!0}]),[y,H,C,t,a]),z=(0,n.useMemo)((()=>[{Header:(0,r.t)("Name"),id:"name",input:"search",operator:u.t.Contains},{Header:(0,r.t)("Modified by"),key:"changed_by",id:"changed_by",input:"select",operator:u.t.RelationOneMany,unfilteredLabel:(0,r.t)("All"),fetchSelects:(0,o.u1)("tag","changed_by",(0,o.JF)((e=>(0,r.t)("An error occurred while fetching dataset datasource values: %s",e))),g),paginate:!0}]),[a,e.user]),V=[{desc:!1,id:"name",label:(0,r.t)("Alphabetical"),value:"alphabetical"},{desc:!0,id:"changed_on_delta_humanized",label:(0,r.t)("Recently modified"),value:"recently_modified"},{desc:!1,id:"changed_on_delta_humanized",label:(0,r.t)("Least recently modified"),value:"least_recently_modified"}],Q=[];return H&&Q.push({name:(0,r.t)("Bulk select"),buttonStyle:"secondary",onClick:k}),Q.push({name:(0,f.FD)(f.FK,{children:[(0,f.Y)("i",{className:"fa fa-plus"})," ",(0,r.t)("Tag")]}),buttonStyle:"primary",onClick:()=>R(!0)}),(0,f.FD)(f.FK,{children:[(0,f.Y)(_.A,{show:M,onHide:()=>{R(!1),K(null)},editTag:F,refreshData:C,addSuccessToast:t,addDangerToast:a,clearOnHide:!0}),(0,f.Y)(d.A,{name:(0,r.t)("Tags"),buttons:Q}),(0,f.Y)(l.A,{title:(0,r.t)("Please confirm"),description:(0,r.t)("Are you sure you want to delete the selected tags?"),onConfirm:e=>$(e),children:e=>{const n=[];return H&&n.push({key:"delete",name:(0,r.t)("Delete"),type:"danger",onSelect:e}),(0,f.Y)(f.FK,{children:(0,f.Y)(u.A,{bulkActions:n,bulkSelectEnabled:N,cardSortSelectOptions:V,className:"tags-list-view",columns:q,count:I,data:L,disableBulkSelect:k,refreshData:C,emptyState:B,fetchData:w,filters:z,initialSort:U,loading:A,addDangerToast:a,addSuccessToast:t,pageSize:25,showThumbnails:x?x.thumbnails:(0,i.G7)(i.TO.Thumbnails),defaultViewMode:(0,i.G7)(i.TO.ListviewsDefaultCardView)?"card":"table"})})}})]})}))},25106:(e,a,t)=>{function n(e){return e?`${e.first_name} ${e.last_name}`:""}t.d(a,{A:()=>n})},52708:(e,a)=>{a.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},a.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},8960:(e,a,t)=>{var n=t(52708);a.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},a.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},a.createFirstPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===a}},a.createPreviousPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},a.createNextPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},a.createLastPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:t,isActive:a===t}},a.createPageFunctionFactory=function(e){var a=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===a}}}},17991:(e,a)=>{a.createRange=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t}},11447:(e,a,t)=>{var n=t(17991),r=t(8960);a.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var i=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(i))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(i<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var o=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(o))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(o<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var s=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),d=Boolean(e.hideEllipsis),u=d?0:1,c=[],g=r.createPageFunctionFactory(e);if(l||c.push(r.createFirstPageLink(e)),s||c.push(r.createPreviousPageLink(e)),1+2*u+2*o+2*i>=a){var h=n.createRange(1,a).map(g);c.push.apply(c,h)}else{var p=i,P=n.createRange(1,p).map(g),b=a+1-i,m=a,E=n.createRange(b,m).map(g),_=Math.min(Math.max(t-o,p+u+1),b-u-2*o-1),v=_+2*o,S=n.createRange(_,v).map(g);if(c.push.apply(c,P),!d){var f=_-1,y=(f===p+1?g:r.createFirstEllipsis)(f);c.push(y)}if(c.push.apply(c,S),!d){var T=v+1,A=(T===b-1?g:r.createSecondEllipsis)(T);c.push(A)}c.push.apply(c,E)}return s||c.push(r.createNextPageLink(e)),l||c.push(r.createLastPageLink(e)),c};var i=t(52708);a.ITEM_TYPES=i.ITEM_TYPES,a.ITEM_KEYS=i.ITEM_KEYS}}]);
//# sourceMappingURL=4bbebb89f88c14eea120.chunk.js.map